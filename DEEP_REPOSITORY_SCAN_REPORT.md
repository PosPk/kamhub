# üîç –û–¢–ß–ï–¢ –û –ì–õ–£–ë–û–ö–û–ú –°–ö–ê–ù–ò–†–û–í–ê–ù–ò–ò –†–ï–ü–û–ó–ò–¢–û–†–ò–Ø
## Kamchatour Hub - –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-05  
**–í–µ—Ç–∫–∞:** cursor/deep-repository-scan-for-cursor-e699  
**–†–∞–∑–º–µ—Ä —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:** 41 MB  
**–í—Å–µ–≥–æ TypeScript —Ñ–∞–π–ª–æ–≤:** 90

---

## üìä EXECUTIVE SUMMARY

Kamchatour Hub - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è full-stack —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ö–∞–º—á–∞—Ç—Å–∫–æ–≥–æ –∫—Ä–∞—è, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ Next.js 14 —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º TypeScript, PostgreSQL –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π. –ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ —Å —Å–æ–±–ª—é–¥–µ–Ω–∏–µ–º best practices.

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π (Next.js 14, TypeScript, PostgreSQL)
- –•–æ—Ä–æ—à–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º concerns
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (CSRF, rate limiting, JWT)
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤ —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- AI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (Vitest)

### ‚ö†Ô∏è –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ API endpoints –∏—Å–ø–æ–ª—å–∑—É—é—Ç demo-–¥–∞–Ω–Ω—ã–µ
- –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ console.log (423 –≤—Ö–æ–∂–¥–µ–Ω–∏—è)
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏
- JWT_SECRET –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –∑–∞—â–∏—â–µ–Ω
- –ù–µ—Å–∫–æ–ª—å–∫–æ TODO –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

#### Frontend
```typescript
- Next.js: 14.2.15 (App Router)
- React: 18.2.0
- TypeScript: 5.4.5
- TailwindCSS: 3.4.10
- Floating UI: 0.27.16
- Zod: 4.1.12 (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
```

#### Backend
```typescript
- Node.js: >=20.0.0
- PostgreSQL —Å PostGIS
- pg: 8.11.5
- JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- Nodemailer: 7.0.9
```

#### AI & –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- GROQ API (Llama 3.1 70B)
- DeepSeek API
- OpenRouter API
- Yandex Maps
- Open-Meteo (–ø–æ–≥–æ–¥–∞)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **PostgreSQL** —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏:
- **uuid-ossp** - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ UUID
- **postgis** - –¥–ª—è –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (25+ —Ç–∞–±–ª–∏—Ü)

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Ä–æ–ª—è–º–∏ (tourist, operator, guide, provider)
- `user_sessions` - —Å–µ—Å—Å–∏–∏ —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- `audit_logs` - –ª–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–¢—É—Ä—ã –∏ –ø–∞—Ä—Ç–Ω–µ—Ä—ã:**
- `tours` - —Ç—É—Ä—ã —Å —Ü–µ–Ω–∞–º–∏, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç—å—é
- `partners` - –ø–∞—Ä—Ç–Ω–µ—Ä—ã (–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, –≥–∏–¥—ã, —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä—ã)
- `bookings` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—É—Ä–æ–≤
- `reviews` - –æ—Ç–∑—ã–≤—ã —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏

**–°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤:**
- `transfer_routes` - –º–∞—Ä—à—Ä—É—Ç—ã —Å –≥–µ–æ–¥–∞–Ω–Ω—ã–º–∏
- `transfer_vehicles` - —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
- `transfer_drivers` - –≤–æ–¥–∏—Ç–µ–ª–∏ —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏
- `transfer_schedules` - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–π—Å–æ–≤
- `transfer_bookings` - –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤
- `transfer_stops` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –º–∞—Ä—à—Ä—É—Ç–∞—Ö
- `transfer_reviews` - –æ—Ç–∑—ã–≤—ã –æ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞—Ö
- `transfer_notifications` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**Loyalty & Eco-points:**
- `eco_points` - —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏
- `user_eco_points` - –±–∞–ª–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `eco_achievements` - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
- `user_achievements` - –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**AI & Chat:**
- `chat_sessions` - —Å–µ—Å—Å–∏–∏ —á–∞—Ç–∞
- `chat_messages` - —Å–æ–æ–±—â–µ–Ω–∏—è

**–§–∞–π–ª—ã:**
- `assets` - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ñ–∞–π–ª—ã —Å SHA256
- `tour_assets`, `partner_assets`, `review_assets` - —Å–≤—è–∑–∏

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –∑–∞—â–∏—Ç—ã

#### 1. CSRF Protection
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–§–∞–π–ª: `lib/middleware/csrf.ts`

```typescript
- Double Submit Cookie Pattern
- crypto.timingSafeEqual –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç timing attacks
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö state-changing –æ–ø–µ—Ä–∞—Ü–∏–π (POST, PUT, DELETE)
```

**–û—Ü–µ–Ω–∫–∞:** –û—Ç–ª–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è CSRF –∑–∞—â–∏—Ç—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤.

#### 2. Rate Limiting
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

–§–∞–π–ª: `lib/middleware/rate-limit.ts`

```typescript
Preset –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- Authentication: 5 –ø–æ–ø—ã—Ç–æ–∫ / 15 –º–∏–Ω—É—Ç
- API: 100 –∑–∞–ø—Ä–æ—Å–æ–≤ / 15 –º–∏–Ω—É—Ç
- Public: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ / 1 –º–∏–Ω—É—Ç–∞
- Creation: 5 —Å–æ–∑–¥–∞–Ω–∏–π / 1 –º–∏–Ω—É—Ç–∞

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: In-Memory Store
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –≤ production
```

#### 3. Security Headers
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã

–§–∞–π–ª: `middleware.ts`

```typescript
- X-Content-Type-Options: nosniff
- X-Frame-Options: DENY
- X-XSS-Protection: 1; mode=block
- Referrer-Policy: strict-origin-when-cross-origin
- Content-Security-Policy (–¥–ª—è production)
```

#### 4. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–§–∞–π–ª: `lib/config.ts`

```typescript
auth: {
  jwtSecret: process.env.JWT_SECRET || 'your-secret-key', // ‚ö†Ô∏è –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  jwtExpiresIn: '7d',
  refreshTokenExpiresIn: '30d',
  passwordMinLength: 8,
  maxLoginAttempts: 5,
  lockoutDuration: 15 * 60 * 1000
}
```

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û:** JWT_SECRET –Ω–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è!

### –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏ —Ä–∏—Å–∫–∏

#### üî¥ –í–´–°–û–ö–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

1. **–î–µ—Ñ–æ–ª—Ç–Ω—ã–π JWT Secret**
   - –§–∞–π–ª: `lib/config.ts:54`
   - –ü—Ä–æ–±–ª–µ–º–∞: `jwtSecret: process.env.JWT_SECRET || 'your-secret-key'`
   - –†–µ—à–µ–Ω–∏–µ: –¢—Ä–µ–±–æ–≤–∞—Ç—å JWT_SECRET –≤ production

2. **Hard-coded operator ID**
   - –§–∞–π–ª: `lib/database/transfer_schema.sql:237`
   - –ü—Ä–æ–±–ª–µ–º–∞: `'550e8400-e29b-41d4-a716-446655440000'` –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –¥–ª—è dev/test

#### üü° –°–†–ï–î–ù–ò–ô –ü–†–ò–û–†–ò–¢–ï–¢

1. **Console.log statements**
   - –ù–∞–π–¥–µ–Ω–æ: 423 –≤—Ö–æ–∂–¥–µ–Ω–∏—è
   - –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–≥—É—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
   - –†–µ—à–µ–Ω–∏–µ: –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ logging service

2. **TODO –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö**
   - `app/api/transfers/book/route.ts:104` - –ø–æ–ª—É—á–µ–Ω–∏–µ userId –∏–∑ JWT
   - –†–µ—à–µ–Ω–∏–µ: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ userId –∏–∑ —Ç–æ–∫–µ–Ω–∞

3. **API Keys –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   - –§–∞–π–ª—ã —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –ø–∞—Ä–æ–ª–µ–π/–∫–ª—é—á–µ–π: 20 —Ñ–∞–π–ª–æ–≤
   - –°—Ç–∞—Ç—É—Å: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚úÖ
   - –†–∏—Å–∫: –ù–∏–∑–∫–∏–π (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

---

## üìù –ö–ê–ß–ï–°–¢–í–û –ö–û–î–ê

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
–í—Å–µ–≥–æ —Ñ–∞–π–ª–æ–≤: 90+ TypeScript/TSX —Ñ–∞–π–ª–æ–≤
Console statements: 423
TODO/FIXME: 4
–¢–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã: 5
```

### –°—Ç–∏–ª—å –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è

#### ‚úÖ –•–æ—Ä–æ—à–æ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TypeScript strict mode
- –¢–∏–ø–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ —Ç–∏–ø–æ–≤
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º concerns
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ async/await –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- Path aliases (@/, @/lib, @/components)

#### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è
- –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ console.log –¥–ª—è production
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç inline TODO
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö

### TypeScript –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª: `tsconfig.json`

```json
{
  "compilerOptions": {
    "strict": true,              // ‚úÖ –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
    "noEmit": true,             // ‚úÖ –¢–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
    "skipLibCheck": true,       // –ü—Ä–æ–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
    "esModuleInterop": true,    // ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å CommonJS
    "moduleResolution": "bundler" // ‚úÖ –î–ª—è Next.js
  }
}
```

**–û—Ü–µ–Ω–∫–∞:** –û—Ç–ª–∏—á–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TypeScript

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**Framework:** Vitest + Testing Library  
**–¢–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 5  
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** –ù–µ –∏–∑–º–µ—Ä–µ–Ω–æ

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã

```typescript
test/
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ loyalty.test.ts          // –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ transfers.test.ts        // –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ booking-race-condition.test.ts // –¢–µ—Å—Ç—ã race conditions
‚îú‚îÄ‚îÄ webhook-validation.test.ts   // –í–∞–ª–∏–¥–∞—Ü–∏—è webhook
‚îî‚îÄ‚îÄ setup.ts                     // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤

```typescript
// vitest.config.ts
{
  globals: true,
  environment: 'node',
  coverage: {
    provider: 'v8',
    reporter: ['text', 'json', 'html']
  }
}
```

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. **–î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è:**
   - Middleware (CSRF, rate limiting)
   - Database utilities
   - Payment processing
   - Booking logic

2. **–î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã –¥–ª—è:**
   - API endpoints
   - Authentication flow
   - Transfer booking flow

3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å:**
   - Pre-commit hooks –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
   - CI/CD pipeline —Å —Ç–µ—Å—Ç–∞–º–∏
   - Coverage threshold (–º–∏–Ω–∏–º—É–º 70%)

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•

### –°—Ö–µ–º–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **7 SQL —Ñ–∞–π–ª–æ–≤** –¥–ª—è —Å—Ö–µ–º—ã –ë–î:

1. `schema.sql` - –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞ (367 —Å—Ç—Ä–æ–∫)
2. `transfer_schema.sql` - –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤ (377 —Å—Ç—Ä–æ–∫)
3. `loyalty_schema.sql` - –°–∏—Å—Ç–µ–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
4. `seat_holds_schema.sql` - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –º–µ—Å—Ç
5. `transfer_payments_schema.sql` - –ü–ª–∞—Ç–µ–∂–∏ –∑–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä—ã
6. `operators_schema.sql` - –û–ø–µ—Ä–∞—Ç–æ—Ä—ã
7. `init-postgresql.sql` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

### –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–û—Ç–ª–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ foreign keys
- ‚úÖ GiST –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Composite –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–æ–ª—è—Ö (email, status, created_at)

**–ü—Ä–∏–º–µ—Ä—ã –∏–Ω–¥–µ–∫—Å–æ–≤:**
```sql
-- –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_eco_points_coordinates ON eco_points 
  USING GIST (ST_GeogFromText(...));

-- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_transfer_stops_order 
  ON transfer_stops (route_id, stop_order);

-- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
CREATE INDEX idx_bookings_date ON bookings(date);
CREATE INDEX idx_tours_price ON tours(price);
```

### –¢—Ä–∏–≥–≥–µ—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `updated_at`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ —Ç—É—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤

```sql
CREATE TRIGGER update_tour_rating_trigger
  AFTER INSERT OR UPDATE OR DELETE ON reviews
  FOR EACH ROW EXECUTE FUNCTION update_tour_rating();
```

### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Views)

**–°–æ–∑–¥–∞–Ω—ã —É–º–Ω—ã–µ views:**
- `tour_details` - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—É—Ä–µ
- `partner_details` - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä—Ç–Ω–µ—Ä–µ
- `transfer_full_info` - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–µ
- `operator_transfer_stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–æ–≤

---

## üöÄ API ENDPOINTS

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç **25 API endpoints**:

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```
POST /api/auth/signup      - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST /api/auth/signin      - –í—Ö–æ–¥
POST /api/auth/demo        - Demo-–¥–æ—Å—Ç—É–ø
```

#### –¢—É—Ä—ã –∏ –ø–∞—Ä—Ç–Ω–µ—Ä—ã
```
GET  /api/tours            - –°–ø–∏—Å–æ–∫ —Ç—É—Ä–æ–≤
GET  /api/partners         - –°–ø–∏—Å–æ–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤
POST /api/roles            - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏
```

#### –¢—Ä–∞–Ω—Å—Ñ–µ—Ä—ã
```
GET  /api/transfers/search              - –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤
POST /api/transfers/book                - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
POST /api/transfers/confirm             - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
POST /api/transfers/payment/confirm     - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
GET  /api/transfers/operator/dashboard  - Dashboard –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
```

#### AI –∏ —á–∞—Ç
```
POST /api/ai               - AI –∑–∞–ø—Ä–æ—Å—ã
POST /api/ai/groq          - GROQ API
POST /api/chat             - –ß–∞—Ç —Å AI
```

#### –≠–∫–æ-—Å–∏—Å—Ç–µ–º–∞
```
GET  /api/eco-points       - –≠–∫–æ-—Ç–æ—á–∫–∏
GET  /api/eco-points/user  - –ë–∞–ª–ª—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

#### –õ–æ—è–ª—å–Ω–æ—Å—Ç—å
```
GET  /api/loyalty/levels   - –£—Ä–æ–≤–Ω–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
GET  /api/loyalty/stats    - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
POST /api/loyalty/promo/apply - –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
```

#### –£—Ç–∏–ª–∏—Ç—ã
```
GET  /api/csrf-token       - CSRF —Ç–æ–∫–µ–Ω
GET  /api/weather          - –ü–æ–≥–æ–¥–∞
GET  /api/health/db        - –ó–¥–æ—Ä–æ–≤—å–µ –ë–î
POST /api/webhooks/cloudpayments - Webhook –ø–ª–∞—Ç–µ–∂–µ–π
```

### –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### –•–æ—Ä–æ—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å –∑–∞—â–∏—Ç–æ–π
```typescript
// app/api/transfers/book/route.ts
export async function POST(request: NextRequest) {
  try {
    // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å Zod
    const body = await request.json();
    const validatedData = bookingSchema.parse(body);
    
    // –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
    const booking = await createBooking(validatedData);
    
    return NextResponse.json({
      success: true,
      data: booking
    });
  } catch (error) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    return handleError(error);
  }
}
```

---

## üê≥ DOCKER –ò –î–ï–ü–õ–û–ô

### Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–§–∞–π–ª—ã:**
- `Dockerfile` - Multi-stage build
- `docker-compose.yml` - –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫

### Docker Compose services

```yaml
services:
  postgres:     # PostgreSQL —Å PostGIS
  app:          # Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
  redis:        # Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–û—Ç–ª–∏—á–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏:**
- ‚úÖ Multi-stage build
- ‚úÖ Healthchecks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ Volume persistence
- ‚úÖ Environment variables
- ‚úÖ Network isolation

### –°–∫—Ä–∏–ø—Ç—ã –¥–µ–ø–ª–æ—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç **10+ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–µ–ø–ª–æ—è**:
- `deploy-kamhub.sh`
- `deploy-timeweb.sh`
- `auto-deploy-kamchatour.sh`
- `PUSH_AND_DEPLOY.sh`
- –ò –¥—Ä—É–≥–∏–µ...

---

## üì¶ –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

### Production Dependencies (13)

```json
{
  "@floating-ui/react": "^0.27.16",     // Floating UI
  "clsx": "^2.0.0",                     // Classnames
  "next": "14.2.15",                    // Next.js
  "nodemailer": "^7.0.9",               // Email
  "pg": "^8.11.5",                      // PostgreSQL
  "react": "18.2.0",                    // React
  "react-dom": "18.2.0",                // React DOM
  "tailwind-merge": "^2.0.0",           // Tailwind utils
  "zod": "^4.1.12"                      // Validation
}
```

### Dev Dependencies (19)

```json
{
  "@testing-library/react": "^16.3.0",  // Testing
  "@vitest/ui": "^3.2.4",               // Test UI
  "autoprefixer": "^10.4.20",           // PostCSS
  "eslint": "^8.57.0",                  // Linting
  "prettier": "^3.6.2",                 // Formatting
  "tailwindcss": "^3.4.10",             // Styling
  "typescript": "5.4.5",                // TypeScript
  "vitest": "^3.2.4"                    // Testing
}
```

### –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Dependabot –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å `npm audit`
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ `husky` –¥–ª—è git hooks

---

## üé® FRONTEND –ö–û–ú–ü–û–ù–ï–ù–¢–´

### React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (11)

```typescript
components/
‚îú‚îÄ‚îÄ AIChatWidget.tsx              // AI —á–∞—Ç
‚îú‚îÄ‚îÄ EcoPointsWidget.tsx           // –≠–∫–æ-–±–∞–ª–ª—ã
‚îú‚îÄ‚îÄ KamchatkaOutlineButton.tsx    // –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–Ω–æ–ø–∫–∞
‚îú‚îÄ‚îÄ LoyaltyWidget.tsx             // –í–∏–¥–∂–µ—Ç –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ PartnerCard.tsx               // –ö–∞—Ä—Ç–æ—á–∫–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
‚îú‚îÄ‚îÄ Protected.tsx                 // HOC –¥–ª—è –∑–∞—â–∏—Ç—ã —Ä–æ—É—Ç–æ–≤
‚îú‚îÄ‚îÄ TourCard.tsx                  // –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç—É—Ä–∞
‚îú‚îÄ‚îÄ TransferMap.tsx               // –ö–∞—Ä—Ç–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ TransferSearchWidget.tsx      // –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ UIShowcase.tsx                // UI –¥–µ–º–æ
‚îî‚îÄ‚îÄ WeatherWidget.tsx             // –í–∏–¥–∂–µ—Ç –ø–æ–≥–æ–¥—ã
```

### React Contexts (3)

```typescript
contexts/
‚îú‚îÄ‚îÄ AuthContext.tsx    // –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ RoleContext.tsx    // –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îî‚îÄ‚îÄ OrdersContext.tsx  // –ó–∞–∫–∞–∑—ã
```

**–û—Ü–µ–Ω–∫–∞:** –•–æ—Ä–æ—à–∞—è –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (—Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è)

1. **–ó–∞—â–∏—Ç–∞ JWT_SECRET**
   ```typescript
   // –°–ï–ô–ß–ê–°:
   jwtSecret: process.env.JWT_SECRET || 'your-secret-key'
   
   // –î–û–õ–ñ–ù–û –ë–´–¢–¨:
   jwtSecret: process.env.JWT_SECRET || (() => {
     throw new Error('JWT_SECRET must be set in production');
   })()
   ```

2. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è userId –∏–∑ JWT**
   ```typescript
   // app/api/transfers/book/route.ts:104
   // TODO: –ø–æ–ª—É—á–∞—Ç—å –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞
   userId: 'user_123'
   
   // –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ —Ç–æ–∫–µ–Ω–∞
   ```

### üü° –í–∞–∂–Ω—ã–µ (—É–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞)

1. **–ó–∞–º–µ–Ω–∞ console.log –Ω–∞ logging service**
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å winston –∏–ª–∏ pino
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å log levels
   - –î–æ–±–∞–≤–∏—Ç—å log rotation

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis –¥–ª—è rate limiting**
   ```typescript
   // –ó–∞–º–µ–Ω–∏—Ç—å MemoryStore –Ω–∞ RedisStore –≤ production
   if (process.env.NODE_ENV === 'production') {
     setRateLimitStore(new RedisStore(redisClient));
   }
   ```

3. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏**
   - –ú–∏–Ω–∏–º—É–º 70% code coverage
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è middleware
   - Integration —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö flows

### üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**
   - Sentry –¥–ª—è error tracking
   - Prometheus –¥–ª—è –º–µ—Ç—Ä–∏–∫
   - Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**
   - OpenAPI/Swagger —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
   - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
   - Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è

3. **Performance –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - –î–æ–±–∞–≤–∏—Ç—å Redis caching
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤
   - CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

4. **CI/CD pipeline**
   - GitHub Actions –¥–ª—è —Ç–µ—Å—Ç–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π
   - Staging environment

---

## üéØ –í–´–í–û–î–´

### –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 8.5/10

**Kamchatour Hub** - —ç—Ç–æ —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å—Ç–µ–∫–æ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ best practices –∏ –∏–º–µ–µ—Ç —Å–æ–ª–∏–¥–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –æ—Å–Ω–æ–≤—É.

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∞

‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ concerns
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –¥–∏–∑–∞–π–Ω

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- CSRF protection
- Rate limiting
- Security headers
- JWT authentication

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
- –•–æ—Ä–æ—à–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
- –¢—Ä–∏–≥–≥–µ—Ä—ã –∏ views

‚úÖ **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫
- TypeScript strict mode
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

‚ö†Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
- –ó–∞—â–∏—Ç–∞ JWT_SECRET
- –£–¥–∞–ª–µ–Ω–∏–µ console.log
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è userId

‚ö†Ô∏è **–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞**
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ test coverage
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ JSDoc
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ linting

‚ö†Ô∏è **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Redis
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥
- CI/CD pipeline

---

## üìû –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**
   - –£–±—Ä–∞—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ JWT_SECRET
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ userId –∏–∑ —Ç–æ–∫–µ–Ω–∞
   - –ü—Ä–æ–≤–µ—Å—Ç–∏ security audit

2. **–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ (1-2 –Ω–µ–¥–µ–ª–∏):**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis –¥–ª—è rate limiting
   - –£–≤–µ–ª–∏—á–∏—Ç—å test coverage
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD

3. **–°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω–æ (1-2 –º–µ—Å—è—Ü–∞):**
   - –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Sentry, Prometheus)
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
   - –°–æ–∑–¥–∞—Ç—å OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

4. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ:**
   - –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö features
   - –ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–°–£–†–°–´

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å –æ–±—à–∏—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `README.md` - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `START_HERE.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- `DEPLOYMENT_GUIDE.md` - –ì–∞–π–¥ –ø–æ –¥–µ–ø–ª–æ—é
- `SECURITY_SCAN_REPORT.md` - –û—Ç—á–µ—Ç –æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ò –º–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—Ä—É–≥–∏—Ö MD —Ñ–∞–π–ª–æ–≤ (50+)

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
npm run dev              # –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
npm run build            # Production build
npm run start            # –ó–∞–ø—É—Å–∫ production

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
npm run migrate          # –ú–∏–≥—Ä–∞—Ü–∏–∏
npm run db:test          # –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
npm run db:info          # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∞–±–ª–∏—Ü–∞—Ö
npm run db:stats         # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
npm test                 # –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
npm run test:ui          # –¢–µ—Å—Ç–æ–≤—ã–π UI
npm run test:coverage    # Coverage –æ—Ç—á–µ—Ç

# Code quality
npm run lint             # ESLint
npm run format           # Prettier
npm run type-check       # TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞
```

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** Cursor AI Agent  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-11-05

–≠—Ç–æ—Ç –æ—Ç—á–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ Kamchatour Hub –∏ —Å–ª—É–∂–∏—Ç –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.
