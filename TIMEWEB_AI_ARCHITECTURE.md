# ğŸ—ï¸ TIMEWEB CLOUD AI - ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ˜

**ĞĞ³ĞµĞ½Ñ‚:** https://timeweb.cloud/my/cloud-ai/agents/12805/

---

## ğŸ“ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     KAMCHATOUR HUB                              â”‚
â”‚                   (Next.js 14 + React 18)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                          â”‚                          â”‚
    â–¼                          â–¼                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Users  â”‚              â”‚  Admin   â”‚              â”‚  API     â”‚
â”‚  Chat   â”‚              â”‚  Panel   â”‚              â”‚  Routes  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                          â”‚                          â”‚
    â”‚ POST /api/ai/timeweb-ai  â”‚                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  app/api/ai/timeweb-ai/route.tsâ”‚
              â”‚  - Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°            â”‚
              â”‚  - ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº             â”‚
              â”‚  - Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ                  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  lib/timeweb-ai/client.ts      â”‚
              â”‚  - TimewebAIClient              â”‚
              â”‚  - Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ğ¼Ğ¸         â”‚
              â”‚  - Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ conversations       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  TIMEWEB CLOUD AI API          â”‚
              â”‚  https://api.timeweb.cloud     â”‚
              â”‚  /ai/v1/agents/{id}/chat       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                    â”‚                    â”‚
          â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Agent    â”‚         â”‚ Agent    â”‚        â”‚ Agent    â”‚
    â”‚ #12805   â”‚         â”‚ #12806   â”‚        â”‚ #12808   â”‚
    â”‚ Guide    â”‚         â”‚ Transfer â”‚        â”‚ Support  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                    â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   AI Models      â”‚
                    â”‚  GPT-4 / Claude  â”‚
                    â”‚  LLaMA / Custom  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ ĞŸĞĞ¢ĞĞš Ğ”ĞĞĞĞ«Ğ¥

### **1. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ**

```typescript
// ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¸ÑˆĞµÑ‚ Ğ² Ñ‡Ğ°Ñ‚ Ğ½Ğ° ÑĞ°Ğ¹Ñ‚Ğµ
User Input: "ĞŸĞ¾ÑĞ¾Ğ²ĞµÑ‚ÑƒĞ¹ Ñ‚ÑƒÑ€ Ğ½Ğ° 3 Ğ´Ğ½Ñ"

// Frontend (components/AIChatWidget.tsx)
fetch('/api/ai/timeweb-ai', {
  method: 'POST',
  body: JSON.stringify({
    message: "ĞŸĞ¾ÑĞ¾Ğ²ĞµÑ‚ÑƒĞ¹ Ñ‚ÑƒÑ€ Ğ½Ğ° 3 Ğ´Ğ½Ñ",
    agentId: "12805",
    conversationId: "conv_abc123"  // Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°
  })
})
```

---

### **2. API endpoint Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°**

```typescript
// app/api/ai/timeweb-ai/route.ts

export async function POST(req: NextRequest) {
  // âœ… Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
  const { message, agentId, conversationId } = await req.json();
  
  // âœ… ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ»Ğ¸Ğ½Ñ‹
  if (message.length > 4000) return error;
  
  // âœ… Ğ’Ñ‹Ğ·Ğ¾Ğ² ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°
  const result = await timewebAI.chat({
    agentId,
    message,
    conversationId
  });
  
  // âœ… Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
  await logAIUsage({
    agentId,
    message,
    response: result.response,
    tokensUsed: result.tokensUsed,
    responseTime: Date.now() - startTime
  });
  
  // âœ… ĞÑ‚Ğ²ĞµÑ‚
  return NextResponse.json({
    ok: true,
    answer: result.response,
    conversationId: result.conversationId
  });
}
```

---

### **3. ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ**

```typescript
// lib/timeweb-ai/client.ts

class TimewebAIClient {
  async chat(request: ChatRequest) {
    // âœ… HTTP Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº Timeweb API
    const response = await fetch(
      `https://api.timeweb.cloud/ai/v1/agents/${request.agentId}/chat`,
      {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${this.apiKey}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          message: request.message,
          conversation_id: request.conversationId
        })
      }
    );
    
    // âœ… ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
    const data = await response.json();
    
    return {
      response: data.response,
      conversationId: data.conversation_id,
      tokensUsed: data.tokens_used
    };
  }
}
```

---

### **4. Timeweb AI Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚**

```
Timeweb Cloud AI API
    â†“
ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğº Ğ°Ğ³ĞµĞ½Ñ‚Ñƒ #12805
    â†“
Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° System Prompt Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
    â†“
Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Knowledge Base (ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ)
    â†“
Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ° (conversation_id)
    â†“
ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² AI Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ (GPT-4 / Claude / etc)
    â†“
Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
    â†“
Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² conversation history
    â†“
Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
```

---

### **5. ĞÑ‚Ğ²ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ**

```typescript
// Frontend Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‚
{
  "ok": true,
  "answer": "Ğ¯ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ Ñ‚ÑƒÑ€ \"Ğ’ÑƒĞ»ĞºĞ°Ğ½Ñ‹ Ğ¸ Ñ‚ĞµÑ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸\" Ğ½Ğ° 3 Ğ´Ğ½Ñ...",
  "conversationId": "conv_abc123",
  "meta": {
    "agentId": "12805",
    "model": "gpt-4-turbo",
    "tokensUsed": 342,
    "responseTime": 1523
  }
}

// ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµÑ‚ÑÑ Ğ² Ñ‡Ğ°Ñ‚Ğµ
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Ğ’Ñ‹:                            â”‚
â”‚  ĞŸĞ¾ÑĞ¾Ğ²ĞµÑ‚ÑƒĞ¹ Ñ‚ÑƒÑ€ Ğ½Ğ° 3 Ğ´Ğ½Ñ            â”‚
â”‚                                    â”‚
â”‚  ğŸ¤– AI ĞÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚:                  â”‚
â”‚  Ğ¯ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑ Ñ‚ÑƒÑ€ "Ğ’ÑƒĞ»ĞºĞ°Ğ½Ñ‹ Ğ¸       â”‚
â”‚  Ñ‚ĞµÑ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸" Ğ½Ğ° 3 Ğ´Ğ½Ñ... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ MULTI-AGENT ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ

### **Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER REQUEST                         â”‚
â”‚              "Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¾Ğ¸Ñ‚ Ñ‚Ñ€Ğ°Ğ½ÑÑ„ĞµÑ€?"                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Intent Detection â”‚
              â”‚  (Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼ Ñ‚Ğ¸Ğ¿) â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
        â–¼                â–¼                â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ "tour"   â”‚    â”‚"transfer"â”‚    â”‚ "help"   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                â”‚                â”‚
        â–¼                â–¼                â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Agent    â”‚    â”‚ Agent    â”‚    â”‚ Agent    â”‚
  â”‚ #12805   â”‚    â”‚ #12806   â”‚    â”‚ #12808   â”‚
  â”‚ Guide    â”‚    â”‚ Transfer â”‚    â”‚ Support  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                â”‚                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Response â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **ĞšĞ¾Ğ´ Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ°Ğ³ĞµĞ½Ñ‚Ğ°:**

```typescript
// lib/timeweb-ai/router.ts

export const AGENTS = {
  GUIDE: '12805',      // Ğ“Ğ¸Ğ´ Ğ¿Ğ¾ ĞšĞ°Ğ¼Ñ‡Ğ°Ñ‚ĞºĞµ
  TRANSFERS: '12806',  // Ğ¢Ñ€Ğ°Ğ½ÑÑ„ĞµÑ€Ñ‹
  LOYALTY: '12807',    // ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ»Ğ¾ÑĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
  SUPPORT: '12808'     // ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°
} as const;

// ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ°Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ñ (intent)
export function detectIntent(message: string): keyof typeof AGENTS {
  const lower = message.toLowerCase();
  
  // Ğ¢Ñ€Ğ°Ğ½ÑÑ„ĞµÑ€Ñ‹
  if (
    lower.includes('Ñ‚Ñ€Ğ°Ğ½ÑÑ„ĞµÑ€') ||
    lower.includes('Ñ‚Ğ°ĞºÑĞ¸') ||
    lower.includes('Ğ´Ğ¾ĞµÑ…Ğ°Ñ‚ÑŒ') ||
    lower.includes('Ğ°ÑÑ€Ğ¾Ğ¿Ğ¾Ñ€Ñ‚')
  ) {
    return 'TRANSFERS';
  }
  
  // ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ğ»Ğ¾ÑĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
  if (
    lower.includes('Ğ±Ğ¾Ğ½ÑƒÑ') ||
    lower.includes('Ğ±Ğ°Ğ»Ğ»Ñ‹') ||
    lower.includes('ÑĞºĞ¸Ğ´ĞºĞ°') ||
    lower.includes('ÑÑ‚Ğ°Ñ‚ÑƒÑ')
  ) {
    return 'LOYALTY';
  }
  
  // ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°
  if (
    lower.includes('Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ') ||
    lower.includes('Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ') ||
    lower.includes('Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°') ||
    lower.includes('Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚')
  ) {
    return 'SUPPORT';
  }
  
  // ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ - Ğ³Ğ¸Ğ´
  return 'GUIDE';
}

// Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
export function selectAgent(message: string): string {
  const intent = detectIntent(message);
  return AGENTS[intent];
}
```

### **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**

```typescript
// app/api/ai/smart-chat/route.ts
import { timewebAI } from '@/lib/timeweb-ai/client';
import { selectAgent } from '@/lib/timeweb-ai/router';

export async function POST(req: NextRequest) {
  const { message } = await req.json();
  
  // ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ½ÑƒĞ¶Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
  const agentId = selectAgent(message);
  
  console.log(`Routing to agent ${agentId} for message: "${message}"`);
  
  // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğº Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¼Ñƒ Ğ°Ğ³ĞµĞ½Ñ‚Ñƒ
  const result = await timewebAI.chat({
    agentId,
    message
  });
  
  return NextResponse.json({
    ok: true,
    answer: result.response,
    agentUsed: agentId
  });
}
```

---

## ğŸ’¾ Ğ ĞĞ‘ĞĞ¢Ğ Ğ¡ ĞšĞĞĞ¢Ğ•ĞšĞ¡Ğ¢ĞĞœ

### **Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°:**

```typescript
// lib/timeweb-ai/conversation.ts

interface ConversationState {
  id: string;
  userId?: string;
  agentId: string;
  messages: Array<{
    role: 'user' | 'assistant';
    content: string;
    timestamp: Date;
  }>;
  metadata?: Record<string, any>;
}

// Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°
export async function createConversation(
  userId: string,
  agentId: string
): Promise<ConversationState> {
  // Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ² Timeweb AI
  const result = await timewebAI.createConversation(agentId, {
    userId,
    source: 'web-chat',
    createdAt: new Date().toISOString()
  });
  
  // Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ğ² Ğ‘Ğ”
  await db.query(`
    INSERT INTO ai_conversations 
    (id, user_id, agent_id, created_at)
    VALUES ($1, $2, $3, NOW())
  `, [result.conversation_id, userId, agentId]);
  
  return {
    id: result.conversation_id,
    userId,
    agentId,
    messages: []
  };
}

// Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ² ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚
export async function addMessage(
  conversationId: string,
  role: 'user' | 'assistant',
  content: string
) {
  await db.query(`
    INSERT INTO ai_messages 
    (conversation_id, role, content, created_at)
    VALUES ($1, $2, $3, NOW())
  `, [conversationId, role, content]);
}

// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸
export async function getConversationHistory(
  conversationId: string
): Promise<ConversationState> {
  const messages = await db.query(`
    SELECT role, content, created_at 
    FROM ai_messages
    WHERE conversation_id = $1
    ORDER BY created_at ASC
  `, [conversationId]);
  
  return {
    id: conversationId,
    messages: messages.rows.map(row => ({
      role: row.role,
      content: row.content,
      timestamp: row.created_at
    }))
  };
}
```

### **SQL ÑÑ…ĞµĞ¼Ğ°:**

```sql
-- lib/database/migrations/ai_conversations.sql

CREATE TABLE IF NOT EXISTS ai_conversations (
  id VARCHAR(100) PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  agent_id VARCHAR(50) NOT NULL,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS ai_messages (
  id BIGSERIAL PRIMARY KEY,
  conversation_id VARCHAR(100) REFERENCES ai_conversations(id) ON DELETE CASCADE,
  role VARCHAR(20) NOT NULL CHECK (role IN ('user', 'assistant', 'system')),
  content TEXT NOT NULL,
  tokens_used INTEGER,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_conversations_user ON ai_conversations(user_id);
CREATE INDEX idx_messages_conversation ON ai_messages(conversation_id);
CREATE INDEX idx_messages_created ON ai_messages(created_at DESC);
```

---

## ğŸ”Œ Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ¯ Ğ¡ Ğ¡Ğ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ£Ğ®Ğ©Ğ˜ĞœĞ˜ ĞšĞĞœĞŸĞĞĞ•ĞĞ¢ĞĞœĞ˜

### **1. AIChatWidget.tsx** (Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚ Ñ‡Ğ°Ñ‚Ğ°)

```typescript
// components/AIChatWidget.tsx

'use client';

import { useState, useEffect } from 'react';

interface Message {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: Date;
}

export function AIChatWidget() {
  const [messages, setMessages] = useState<Message[]>([]);
  const [input, setInput] = useState('');
  const [conversationId, setConversationId] = useState<string>();
  const [loading, setLoading] = useState(false);

  // Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ°
  useEffect(() => {
    const initConversation = async () => {
      const response = await fetch('/api/ai/conversation/create', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ agentId: '12805' })
      });
      
      const data = await response.json();
      setConversationId(data.conversationId);
    };
    
    initConversation();
  }, []);

  // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
  const sendMessage = async () => {
    if (!input.trim() || !conversationId) return;
    
    setLoading(true);
    
    // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    const userMessage: Message = {
      id: Date.now().toString(),
      role: 'user',
      content: input,
      timestamp: new Date()
    };
    
    setMessages(prev => [...prev, userMessage]);
    setInput('');
    
    try {
      // ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğº Timeweb AI
      const response = await fetch('/api/ai/timeweb-ai', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          message: input,
          agentId: '12805',
          conversationId
        })
      });
      
      const data = await response.json();
      
      if (data.ok) {
        // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚ AI
        const aiMessage: Message = {
          id: Date.now().toString() + '_ai',
          role: 'assistant',
          content: data.answer,
          timestamp: new Date()
        };
        
        setMessages(prev => [...prev, aiMessage]);
      }
    } catch (error) {
      console.error('Chat error:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="ai-chat-widget">
      {/* Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ */}
      <div className="messages">
        {messages.map(msg => (
          <div key={msg.id} className={`message message-${msg.role}`}>
            <div className="message-content">{msg.content}</div>
            <div className="message-time">
              {msg.timestamp.toLocaleTimeString()}
            </div>
          </div>
        ))}
        
        {loading && <div className="typing-indicator">AI Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ°ĞµÑ‚...</div>}
      </div>
      
      {/* ĞŸĞ¾Ğ»Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° */}
      <div className="input-area">
        <input
          type="text"
          value={input}
          onChange={(e) => setInput(e.target.value)}
          onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
          placeholder="Ğ¡Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚Ğµ Ğ¾ Ñ‚ÑƒÑ€Ğ°Ñ… Ğ½Ğ° ĞšĞ°Ğ¼Ñ‡Ğ°Ñ‚ĞºĞµ..."
          disabled={loading}
        />
        <button onClick={sendMessage} disabled={loading || !input.trim()}>
          ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ
        </button>
      </div>
    </div>
  );
}
```

---

### **2. Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ñ‚ÑƒÑ€Ğ¾Ğ²** (Tours Page)

```typescript
// app/hub/tours/ai-suggestions/page.tsx

'use client';

import { useState } from 'react';
import { timewebAI } from '@/lib/timeweb-ai/client';

export default function AITourSuggestionsPage() {
  const [preferences, setPreferences] = useState({
    duration: 3,
    budget: 50000,
    interests: [] as string[]
  });
  
  const [suggestions, setSuggestions] = useState<string>('');
  const [loading, setLoading] = useState(false);

  const getSuggestions = async () => {
    setLoading(true);
    
    try {
      const response = await fetch('/api/ai/timeweb-ai', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          agentId: '12805',
          message: `ĞŸĞ¾Ğ´Ğ±ĞµÑ€Ğ¸ Ñ‚ÑƒÑ€Ñ‹ Ğ½Ğ° ĞšĞ°Ğ¼Ñ‡Ğ°Ñ‚ĞºĞµ:
            Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: ${preferences.duration} Ğ´Ğ½Ñ
            Ğ‘ÑĞ´Ğ¶ĞµÑ‚: Ğ´Ğ¾ ${preferences.budget} RUB
            Ğ˜Ğ½Ñ‚ĞµÑ€ĞµÑÑ‹: ${preferences.interests.join(', ') || 'Ğ»ÑĞ±Ñ‹Ğµ'}
            
            Ğ’ĞµÑ€Ğ½Ğ¸ 3-5 Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ² Ñ ĞºÑ€Ğ°Ñ‚ĞºĞ¸Ğ¼ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸ĞµĞ¼.`
        })
      });
      
      const data = await response.json();
      
      if (data.ok) {
        setSuggestions(data.answer);
      }
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="ai-tour-suggestions">
      <h1>ğŸ¤– AI ĞŸĞ¾Ğ´Ğ±Ğ¾Ñ€ Ñ‚ÑƒÑ€Ğ¾Ğ²</h1>
      
      {/* Ğ¤Ğ¾Ñ€Ğ¼Ğ° Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ğ¹ */}
      <div className="preferences-form">
        <label>
          Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ (Ğ´Ğ½ĞµĞ¹):
          <input
            type="number"
            value={preferences.duration}
            onChange={(e) => setPreferences({
              ...preferences,
              duration: parseInt(e.target.value)
            })}
            min={1}
            max={14}
          />
        </label>
        
        <label>
          Ğ‘ÑĞ´Ğ¶ĞµÑ‚ (RUB):
          <input
            type="number"
            value={preferences.budget}
            onChange={(e) => setPreferences({
              ...preferences,
              budget: parseInt(e.target.value)
            })}
            step={10000}
          />
        </label>
        
        <label>
          Ğ˜Ğ½Ñ‚ĞµÑ€ĞµÑÑ‹:
          <select
            multiple
            value={preferences.interests}
            onChange={(e) => setPreferences({
              ...preferences,
              interests: Array.from(
                e.target.selectedOptions,
                option => option.value
              )
            })}
          >
            <option value="Ğ²ÑƒĞ»ĞºĞ°Ğ½Ñ‹">Ğ’ÑƒĞ»ĞºĞ°Ğ½Ñ‹</option>
            <option value="Ñ‚ĞµÑ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸">Ğ¢ĞµÑ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸</option>
            <option value="Ñ€Ñ‹Ğ±Ğ°Ğ»ĞºĞ°">Ğ Ñ‹Ğ±Ğ°Ğ»ĞºĞ°</option>
            <option value="Ğ´Ğ¸ĞºĞ°Ñ Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ°">Ğ”Ğ¸ĞºĞ°Ñ Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ°</option>
            <option value="ÑĞºÑÑ‚Ñ€Ğ¸Ğ¼">Ğ­ĞºÑÑ‚Ñ€Ğ¸Ğ¼</option>
          </select>
        </label>
        
        <button onClick={getSuggestions} disabled={loading}>
          {loading ? 'ĞŸĞ¾Ğ´Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼...' : 'ĞŸĞ¾Ğ´Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ‚ÑƒÑ€Ñ‹'}
        </button>
      </div>
      
      {/* Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ */}
      {suggestions && (
        <div className="suggestions-result">
          <h2>Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ AI:</h2>
          <div className="suggestions-content">
            {suggestions}
          </div>
        </div>
      )}
    </div>
  );
}
```

---

## ğŸ“Š ĞœĞĞĞ˜Ğ¢ĞĞ Ğ˜ĞĞ“ Ğ˜ ĞĞĞĞ›Ğ˜Ğ¢Ğ˜ĞšĞ

### **Dashboard Ğ´Ğ»Ñ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ AI Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**

```typescript
// app/admin/ai-analytics/page.tsx

export default async function AIAnalyticsPage() {
  // Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
  const stats = await db.query(`
    SELECT 
      agent_id,
      COUNT(*) as total_requests,
      AVG(response_time) as avg_response_time,
      SUM(tokens_used) as total_tokens,
      COUNT(DISTINCT user_id) as unique_users
    FROM ai_usage_logs
    WHERE created_at > NOW() - INTERVAL '30 days'
    GROUP BY agent_id
  `);
  
  // ĞŸĞ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ñ‚ĞµĞ¼Ñ‹
  const topics = await db.query(`
    SELECT 
      LEFT(message, 100) as topic,
      COUNT(*) as frequency
    FROM ai_usage_logs
    WHERE created_at > NOW() - INTERVAL '7 days'
    GROUP BY LEFT(message, 100)
    ORDER BY frequency DESC
    LIMIT 20
  `);
  
  // Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº Ğ¿Ğ¾ Ğ´Ğ½ÑĞ¼
  const daily = await db.query(`
    SELECT 
      DATE(created_at) as date,
      COUNT(*) as requests,
      AVG(response_time) as avg_time
    FROM ai_usage_logs
    WHERE created_at > NOW() - INTERVAL '30 days'
    GROUP BY DATE(created_at)
    ORDER BY date
  `);

  return (
    <div className="ai-analytics-dashboard">
      <h1>ğŸ“Š AI Analytics</h1>
      
      {/* ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° */}
      <div className="stats-grid">
        {stats.rows.map(stat => (
          <div key={stat.agent_id} className="stat-card">
            <h3>Agent {stat.agent_id}</h3>
            <p>Requests: {stat.total_requests}</p>
            <p>Avg Time: {Math.round(stat.avg_response_time)}ms</p>
            <p>Tokens: {stat.total_tokens}</p>
            <p>Users: {stat.unique_users}</p>
          </div>
        ))}
      </div>
      
      {/* Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº */}
      <div className="chart">
        <h2>Requests per Day</h2>
        {/* Chart component here */}
      </div>
      
      {/* ĞŸĞ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ñ‚ĞµĞ¼Ñ‹ */}
      <div className="topics">
        <h2>Popular Topics</h2>
        <ul>
          {topics.rows.map((topic, i) => (
            <li key={i}>
              {topic.topic} ({topic.frequency})
            </li>
          ))}
        </ul>
      </div>
    </div>
  );
}
```

---

## ğŸ Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• Ğ’ĞĞ—ĞœĞĞ–ĞĞĞ¡Ğ¢Ğ˜

### **1. Streaming responses** (Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²Ñ‹Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹)

```typescript
// app/api/ai/stream/route.ts
import { timewebAI } from '@/lib/timeweb-ai/client';

export async function POST(req: NextRequest) {
  const { message, agentId } = await req.json();
  
  const encoder = new TextEncoder();
  const stream = new ReadableStream({
    async start(controller) {
      try {
        // Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ñ streaming=true
        const response = await fetch(
          `https://api.timeweb.cloud/ai/v1/agents/${agentId}/chat`,
          {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${process.env.TIMEWEB_AI_KEY}`,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              message,
              stream: true
            })
          }
        );
        
        const reader = response.body?.getReader();
        
        while (true) {
          const { done, value } = await reader!.read();
          
          if (done) break;
          
          controller.enqueue(value);
        }
        
        controller.close();
      } catch (error) {
        controller.error(error);
      }
    }
  });
  
  return new Response(stream, {
    headers: {
      'Content-Type': 'text/event-stream',
      'Cache-Control': 'no-cache',
      'Connection': 'keep-alive'
    }
  });
}
```

---

### **2. Knowledge Base Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ**

```typescript
// lib/timeweb-ai/knowledge-base.ts

// Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Knowledge Base Ğ² Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
export async function uploadKnowledgeBase(
  agentId: string,
  data: {
    tours: any[];
    destinations: any[];
    faq: any[];
  }
) {
  const formattedData = `
# Ğ‘Ğ°Ğ·Ğ° Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹ KamchaTour Hub

## Ğ¢ÑƒÑ€Ñ‹:
${data.tours.map(t => `
- ${t.title}
  Ğ¦ĞµĞ½Ğ°: ${t.price} RUB
  Ğ”Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: ${t.duration} Ğ´Ğ½ĞµĞ¹
  ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ: ${t.description}
`).join('\n')}

## ĞĞ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:
${data.destinations.map(d => `
- ${d.name}
  Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ: ${d.info}
`).join('\n')}

## FAQ:
${data.faq.map(q => `
Q: ${q.question}
A: ${q.answer}
`).join('\n')}
  `;
  
  // Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· API (ĞµÑĞ»Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾)
  const response = await fetch(
    `https://api.timeweb.cloud/ai/v1/agents/${agentId}/knowledge-base`,
    {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${process.env.TIMEWEB_AI_KEY}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        content: formattedData,
        type: 'markdown'
      })
    }
  );
  
  return await response.json();
}
```

---

## âœ… Ğ˜Ğ¢ĞĞ“ĞĞ’ĞĞ¯ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    KAMCHATOUR HUB                           â”‚
â”‚                 (Timeweb Cloud Apps)                        â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Chat     â”‚  â”‚ Tours    â”‚  â”‚ Admin    â”‚  â”‚ API      â”‚  â”‚
â”‚  â”‚ Widget   â”‚  â”‚ Page     â”‚  â”‚ Panel    â”‚  â”‚ Routes   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚              â”‚              â”‚              â”‚       â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                           â”‚                                â”‚
â”‚              app/api/ai/timeweb-ai/route.ts                â”‚
â”‚                           â”‚                                â”‚
â”‚              lib/timeweb-ai/client.ts                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Timeweb Cloud AI  â”‚ â”‚Timeweb  â”‚ â”‚ Timeweb S3      â”‚
â”‚ Agents            â”‚ â”‚PostgreSQLâ”‚ â”‚ Storage         â”‚
â”‚                   â”‚ â”‚         â”‚ â”‚                 â”‚
â”‚ #12805 Guide      â”‚ â”‚ Databaseâ”‚ â”‚ Media files     â”‚
â”‚ #12806 Transfers  â”‚ â”‚ Users   â”‚ â”‚ Images          â”‚
â”‚ #12808 Support    â”‚ â”‚ Tours   â”‚ â”‚ Documents       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ğ•Ğ´Ğ¸Ğ½Ğ°Ñ ÑĞºĞ¾ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Timeweb Cloud! ğŸš€**

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹:**
- ğŸ“– ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ: `TIMEWEB_CLOUD_AI_INTEGRATION.md`
- ğŸš€ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚: `TIMEWEB_AI_QUICK_START.md`
- ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°: `TIMEWEB_AI_ARCHITECTURE.md` (ÑÑ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ»)

**ĞĞ³ĞµĞ½Ñ‚:** https://timeweb.cloud/my/cloud-ai/agents/12805/
