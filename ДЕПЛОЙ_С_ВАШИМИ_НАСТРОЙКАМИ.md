# üöÄ –î–ï–ü–õ–û–ô –° –í–ê–®–ò–ú–ò –ù–ê–°–¢–†–û–ô–ö–ê–ú–ò TIMEWEB

## ‚úÖ –í–°–Å –ù–ê–°–¢–†–û–ï–ù–û –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò!

–Ø –ø–æ–ª—É—á–∏–ª –≤–∞—à–∏ credentials –∏ –Ω–∞—Å—Ç—Ä–æ–∏–ª –≤—Å—ë –¥–ª—è –¥–µ–ø–ª–æ—è!

---

## üì¶ –ß–¢–û –ì–û–¢–û–í–û:

### 1. ‚úÖ Credentials —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ
**–§–∞–π–ª:** `.env.timeweb.local` (–Ω–µ –ø–æ–ø–∞–¥–µ—Ç –≤ Git!)

```
TIMEWEB_TOKEN     ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω
S3 Storage        ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω (Bucket: d9542536...)
VDS Server        ‚úÖ IP: 5.129.248.224
SSH Access        ‚úÖ root@5.129.248.224
```

### 2. ‚úÖ –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è —Å–æ–∑–¥–∞–Ω
**–§–∞–π–ª:** `scripts/deploy-to-timeweb-auto.sh`

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç API —Ç–æ–∫–µ–Ω
- –°–æ–±–∏—Ä–∞–µ—Ç production –≤–µ—Ä—Å–∏—é
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏–∫—É –≤ S3
- –ü—É—à–∏—Ç –≤ GitHub
- –î–µ–ø–ª–æ–∏—Ç –Ω–∞ VDS —Å–µ—Ä–≤–µ—Ä

### 3. ‚úÖ S3 Storage –Ω–∞—Å—Ç—Ä–æ–µ–Ω
```
Endpoint: https://s3.twcstorage.ru
Bucket:   d9542536-676ee691-7f59-46bb-bf0e-ab64230eec50
Region:   ru-1
```

### 4. ‚úÖ VDS Server –ø—Ä–æ–≤–µ—Ä–µ–Ω
```
IP:       5.129.248.224
Status:   –ê–∫—Ç–∏–≤–µ–Ω
SSH:      root@5.129.248.224
```

‚ö†Ô∏è **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –µ—â–µ –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** (–ø–æ—Ä—Ç 3000 –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç)

---

## üöÄ –ë–´–°–¢–†–´–ô –î–ï–ü–õ–û–ô (–û–î–ù–ê –ö–û–ú–ê–ù–î–ê!)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
bash scripts/deploy-to-timeweb-auto.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
2. ‚úÖ –°–æ–±–µ—Ä–µ—Ç—Å—è production –≤–µ—Ä—Å–∏—è
3. ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç—Å—è —Å—Ç–∞—Ç–∏–∫–∞ –≤ S3
4. ‚úÖ –ó–∞–ø—É—à–∏—Ç—Å—è –≤ GitHub
5. ‚úÖ –ó–∞–¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ VDS
6. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è PM2

**–í—Ä–µ–º—è:** ~5 –º–∏–Ω—É—Ç

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–æ–π (–µ—Å–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç)

#### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ SSH
```bash
ssh root@5.129.248.224
# –ü–∞—Ä–æ–ª—å: xQvB1pv?yZTjaR
```

#### –®–∞–≥ 2: –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
```bash
cd /var/www
git clone https://github.com/PosPk/kamhub.git
cd kamhub
```

#### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Node.js (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js 20
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt-get install -y nodejs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é
node --version  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å v20.x
```

#### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2 (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
```bash
npm install -g pm2
```

#### –®–∞–≥ 5: –°–æ–∑–¥–∞–π—Ç–µ .env.production
```bash
cat > .env.production << 'EOF'
NODE_ENV=production
PORT=3000

# JWT (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ: npm run generate:jwt-secret)
JWT_SECRET=–ó–ê–ú–ï–ù–ò–¢–ï_–ù–ê_–†–ï–ê–õ–¨–ù–´–ô

# Database (–µ—Å–ª–∏ –µ—Å—Ç—å)
DATABASE_URL=postgresql://user:pass@host:5432/db

# AI
GROQ_API_KEY=

# –ü–æ–≥–æ–¥–∞
OPENWEATHER_API_KEY=

# S3 (–≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
S3_ENDPOINT=https://s3.twcstorage.ru
S3_BUCKET=d9542536-676ee691-7f59-46bb-bf0e-ab64230eec50
S3_ACCESS_KEY=F2CP4X3X17GVQ1YH5I5D
S3_SECRET_KEY=72iAsYR4QQCIdaDI9e9AzXnzVvvP8bvPELmrBVzX
S3_REGION=ru-1
EOF
```

#### –®–∞–≥ 6: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å–æ–±–µ—Ä–∏—Ç–µ
```bash
npm install
npm run build
```

#### –®–∞–≥ 7: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å PM2
```bash
pm2 start npm --name kamhub -- start
pm2 save
pm2 startup
```

#### –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Nginx (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–æ–º–µ–Ω–∞)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx
apt-get install -y nginx

# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥
cat > /etc/nginx/sites-available/kamhub << 'EOF'
server {
    listen 80;
    server_name _;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
EOF

# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ
ln -s /etc/nginx/sites-available/kamhub /etc/nginx/sites-enabled/
rm /etc/nginx/sites-enabled/default
nginx -t
systemctl restart nginx
```

---

## üîç –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ:
```bash
pm2 list
pm2 logs kamhub
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:
```bash
curl http://localhost:3000
```

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://5.129.248.224
```
–∏–ª–∏
```
http://5.129.248.224:3000
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∫—Ä–∞—Å–∏–≤—É—é –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ —Å—Ç–∏–ª–µ Samsung Weather! üé®

---

## üåê –ù–ê–°–¢–†–û–ô–ö–ê –î–û–ú–ï–ù–ê (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å —Å–≤–æ–π –¥–æ–º–µ–Ω:

### –í Timeweb:
1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://timeweb.cloud/my/domains
2. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, kamchatour.ru)
3. –°–æ–∑–¥–∞–π—Ç–µ A-–∑–∞–ø–∏—Å—å:
   ```
   Type: A
   Name: @
   Value: 5.129.248.224
   TTL: 3600
   ```

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
# –û–±–Ω–æ–≤–∏—Ç–µ Nginx –∫–æ–Ω—Ñ–∏–≥
nano /etc/nginx/sites-available/kamhub

# –ó–∞–º–µ–Ω–∏—Ç–µ:
server_name _;
# –ù–∞:
server_name kamchatour.ru www.kamchatour.ru;

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
nginx -t
systemctl restart nginx
```

### –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL (Let's Encrypt):
```bash
apt-get install -y certbot python3-certbot-nginx
certbot --nginx -d kamchatour.ru -d www.kamchatour.ru
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### PM2 Dashboard:
```bash
pm2 monit
```

### –õ–æ–≥–∏:
```bash
pm2 logs kamhub
pm2 logs kamhub --lines 100
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
```bash
pm2 show kamhub
```

### –ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö:
```bash
pm2 startup
pm2 save
```

---

## üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞):
```bash
bash scripts/deploy-to-timeweb-auto.sh
```

### –í—Ä—É—á–Ω—É—é (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):
```bash
cd /var/www/kamhub
git pull origin main
npm install
npm run build
pm2 restart kamhub
```

---

## üìã –ß–ï–ö–õ–ò–°–¢

```
–ü–û–î–ì–û–¢–û–í–ö–ê:
‚úÖ Credentials —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (.env.timeweb.local)
‚úÖ –°–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è —Å–æ–∑–¥–∞–Ω
‚úÖ S3 –Ω–∞—Å—Ç—Ä–æ–µ–Ω
‚úÖ VDS —Å–µ—Ä–≤–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω

–î–ï–ü–õ–û–ô:
- [ ] –ó–∞–ø—É—â–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ò–õ–ò
- [ ] –ü–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å –ø–æ SSH
- [ ] –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ Node.js 20
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ PM2
- [ ] –°–æ–∑–¥–∞–ª–∏ .env.production
- [ ] –°–æ–±—Ä–∞–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª–∏ —Å PM2

–ü–†–û–í–ï–†–ö–ê:
- [ ] pm2 list –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç kamhub (online)
- [ ] curl http://localhost:3000 —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- [ ] –î–∏–∑–∞–π–Ω Samsung Weather –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
```

---

## üÜò –ü–†–û–ë–õ–ï–ú–´?

### "npm install" –ø–∞–¥–∞–µ—Ç
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### "npm run build" –ø–∞–¥–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Node.js –≤–µ—Ä—Å–∏—é
node --version  # –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å v20.x

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt-get install -y nodejs
```

### PM2 –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2
npm uninstall -g pm2
npm install -g pm2
pm2 update
```

### –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç
```bash
# –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å
lsof -i :3000

# –£–±–µ–π—Ç–µ –µ–≥–æ
kill -9 <PID>

# –ò–ª–∏ —Å–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ .env.production
PORT=3001
```

---

## üí° –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

1. **–ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á–∏:**
   - OpenWeather: https://openweathermap.org/api
   - GROQ: https://console.groq.com

2. **–î–æ–±–∞–≤—å—Ç–µ –≤ .env.production –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   OPENWEATHER_API_KEY=–≤–∞—à_–∫–ª—é—á
   GROQ_API_KEY=–≤–∞—à_–∫–ª—é—á
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:**
   ```bash
   pm2 restart kamhub
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ PostgreSQL** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
   - –í Timeweb: https://timeweb.cloud/my/databases
   - –°–æ–∑–¥–∞–π—Ç–µ –ë–î
   - –î–æ–±–∞–≤—å—Ç–µ DATABASE_URL
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏

5. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –¥–æ–º–µ–Ω** (–µ—Å–ª–∏ –µ—Å—Ç—å)

6. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

---

## üéâ –ì–û–¢–û–í–û!

**–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!**

### –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
bash scripts/deploy-to-timeweb-auto.sh
```

### –ò–ª–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –≤—Ä—É—á–Ω—É—é:
```bash
ssh root@5.129.248.224
```

---

**–£–¥–∞—á–∏ —Å –¥–µ–ø–ª–æ–µ–º!** üöÄ

---

**–í–∞—à–∏ credentials:**
- VDS: 5.129.248.224
- S3 Dashboard: https://timeweb.cloud/my/storage/422469/dashboard
- VDS Dashboard: https://timeweb.cloud/my/servers/5898003
