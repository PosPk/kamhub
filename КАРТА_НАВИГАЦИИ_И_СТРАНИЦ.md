# 🗺️ ПОЛНАЯ КАРТА НАВИГАЦИИ KAMHUB

**Документ:** Карта страниц, переходов и действий по ролям  
**Дата:** 30 октября 2025  
**Версия:** 1.0

---

## 📋 СОДЕРЖАНИЕ

1. [Карта навигации (схема)](#карта-навигации-схема)
2. [Матрица доступа (роли × страницы)](#матрица-доступа)
3. [Публичные страницы](#публичные-страницы)
4. [Hub страницы по ролям](#hub-страницы-по-ролям)
5. [Сущности и CRUD операции](#сущности-и-crud-операции)
6. [Переходы между страницами](#переходы-между-страницами)

---

# 🎯 КАРТА НАВИГАЦИИ (СХЕМА)

```
┌─────────────────────────────────────────────────────────────────┐
│                        ПУБЛИЧНАЯ ЗОНА                            │
└─────────────────────────────────────────────────────────────────┘
                                │
                ┌───────────────┼───────────────┐
                │               │               │
         ┌──────▼──────┐ ┌─────▼──────┐ ┌─────▼──────┐
         │   / (Home)  │ │   /demo    │ │ /auth/login│
         │  Лендинг    │ │  Демо      │ │   Вход     │
         └──────┬──────┘ └─────┬──────┘ └─────┬──────┘
                │               │               │
                └───────────────┼───────────────┘
                                │
                    ┌───────────▼───────────┐
                    │   АУТЕНТИФИКАЦИЯ      │
                    │   (JWT Token)         │
                    └───────────┬───────────┘
                                │
┌───────────────────────────────┴───────────────────────────────┐
│                          HUB ЗОНА                              │
│                   (Protected Routes)                           │
└────────────────────────────────────────────────────────────────┘
                                │
        ┌───────────────────────┼───────────────────────┐
        │                       │                       │
   ┌────▼────┐          ┌──────▼──────┐        ┌──────▼──────┐
   │ ТУРИСТ  │          │  ОПЕРАТОР   │        │    ГИД      │
   └────┬────┘          └──────┬──────┘        └──────┬──────┘
        │                      │                       │
   /hub/tourist           /hub/operator           /hub/guide
   /hub/tours             /hub/tours              
   /hub/transfers         
                                │
        ┌───────────────────────┼───────────────────────┐
        │                       │                       │
   ┌────▼────┐          ┌──────▼──────┐        ┌──────▼──────┐
   │ТРАНСФЕР │          │    АГЕНТ    │        │   ADMIN     │
   └────┬────┘          └──────┬──────┘        └──────┬──────┘
        │                      │                       │
   /hub/transfer          /hub/agent             /hub/admin
   /hub/transfer-operator
                                │
┌───────────────────────────────┴───────────────────────────────┐
│                      ОБЩИЕ HUB СТРАНИЦЫ                        │
│                   (Доступны всем ролям)                        │
└────────────────────────────────────────────────────────────────┘
                                │
        ┌───────────────────────┼───────────────────────┐
        │                       │                       │
   /hub/cars              /hub/gear               /hub/stay
   /hub/souvenirs         /hub/safety
```

---

# 📊 МАТРИЦА ДОСТУПА

## Роли × Страницы

| Страница | Турист | Оператор | Гид | Transfer | Агент | Admin | Публичный |
|----------|--------|----------|-----|----------|-------|-------|-----------|
| `/` (Home) | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| `/demo` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| `/auth/login` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| **HUB СТРАНИЦЫ** |
| `/hub/tourist` | ✅ | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ |
| `/hub/operator` | ❌ | ✅ | ❌ | ❌ | ❌ | ✅ | ❌ |
| `/hub/guide` | ❌ | ❌ | ✅ | ❌ | ❌ | ✅ | ❌ |
| `/hub/transfer` | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ | ❌ |
| `/hub/transfer-operator` | ❌ | ❌ | ❌ | ✅ | ❌ | ✅ | ❌ |
| `/hub/agent` | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ | ❌ |
| `/hub/admin` | ❌ | ❌ | ❌ | ❌ | ❌ | ✅ | ❌ |
| **ОБЩИЕ HUB** |
| `/hub/tours` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |
| `/hub/cars` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |
| `/hub/gear` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |
| `/hub/stay` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |
| `/hub/souvenirs` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |
| `/hub/safety` | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ❌ |

---

# 🌐 ПУБЛИЧНЫЕ СТРАНИЦЫ

## 1. **`/` (Главная страница - Лендинг)**

### **URL:** `/`

### **Доступ:** Публичный (все пользователи, включая неавторизованных)

### **Назначение:**
Главная страница-лендинг, представляющая платформу KamHub.

### **Компоненты:**
- Hero секция с видео
- Поиск туров
- Карточки ролей (8 типов)
- Популярные туры (6 шт)
- Виджет погоды
- Виджет Eco-points
- AI-чат
- SOS и безопасность
- Быстрые переходы

### **Основные действия:**

#### **Для всех пользователей:**
```typescript
1. Просмотр информации о платформе
2. Поиск туров (инпут в Hero)
3. Выбор роли → Переход в соответствующий Hub
4. Просмотр популярных туров (карточки)
5. Просмотр погоды для Камчатки
6. Просмотр Eco-points (требует регистрации)
7. Общение с AI-чатом
8. Переход к регистрации/входу
9. Переход в демо-режим
```

### **Сущности:**
- **Tours** (чтение) - топ-6 туров
- **Partners** (чтение) - партнёры
- **Weather** (чтение) - погода
- **EcoPoints** (чтение) - экологические точки

### **API вызовы:**
```typescript
GET /api/tours?limit=6           // Загрузка туров
GET /api/partners?limit=6        // Загрузка партнёров
GET /api/eco-points?limit=10     // Загрузка eco-точек
GET /api/weather                 // Прогноз погоды
```

### **Переходы:**
```typescript
→ /demo                    // Демо-режим
→ /auth/login              // Вход
→ /hub/tourist             // Hub туриста
→ /hub/operator            // Hub оператора
→ /hub/guide               // Hub гида
→ /hub/transfer            // Hub трансфера
→ /hub/stay                // Размещение
→ /hub/souvenirs           // Сувениры
→ /hub/gear                // Прокат снаряжения
→ /hub/cars                // Прокат авто
→ /hub/safety              // Безопасность
```

---

## 2. **`/demo` (Демо-страница)**

### **URL:** `/demo`

### **Доступ:** Публичный

### **Назначение:**
Демонстрационная страница для ознакомления с функционалом без регистрации.

### **Основные действия:**

#### **Для всех пользователей:**
```typescript
1. Переключение между ролями (демо-режим)
2. Просмотр функционала каждой роли
3. Тестовое бронирование (без оплаты)
4. Просмотр аналитики (демо-данные)
5. Общение с AI-чатом
```

### **Сущности:**
- **Все сущности** (тестовые данные, без сохранения в БД)

### **Переходы:**
```typescript
→ /auth/login              // Регистрация для полного доступа
→ /hub/tourist             // Hub туриста (демо)
→ /hub/operator            // Hub оператора (демо)
```

---

## 3. **`/auth/login` (Страница входа)**

### **URL:** `/auth/login`

### **Доступ:** Публичный

### **Назначение:**
Аутентификация пользователей.

### **Основные действия:**

#### **Для неавторизованных:**
```typescript
1. Ввод email и пароля
2. Выбор роли (если несколько)
3. Вход в систему → Получение JWT токена
4. Переход в соответствующий Hub
```

#### **Для авторизованных:**
```typescript
→ Редирект в Hub согласно роли
```

### **Сущности:**
- **User** (создание сессии)
- **UserSession** (JWT token)

### **API вызовы:**
```typescript
POST /api/auth/signin             // Вход
POST /api/auth/signup             // Регистрация
POST /api/auth/demo               // Демо-доступ
```

### **Переходы после входа:**
```typescript
Tourist → /hub/tourist
Operator → /hub/operator
Guide → /hub/guide
Transfer → /hub/transfer
Agent → /hub/agent
Admin → /hub/admin
```

---

# 🏠 HUB СТРАНИЦЫ ПО РОЛЯМ

---

## 👤 **ТУРИСТ (Tourist)**

### **1. `/hub/tourist` - Личный кабинет туриста**

#### **Доступ:** Только роль `tourist` + `admin`

#### **Назначение:**
Главная страница туриста с персональным дашбордом.

#### **Что видит турист:**
```typescript
1. Приветствие с именем
2. Активные бронирования
3. История поездок
4. Баланс баллов лояльности (уровень, скидка)
5. Eco-points (баллы, достижения)
6. Предстоящие туры (календарь)
7. Рекомендации AI на основе предпочтений
8. Погода для запланированных туров
9. Быстрые действия (забронировать, поиск)
```

#### **Основные действия:**

##### **1. Просмотр информации:**
```typescript
- Просмотр активных бронирований
- Просмотр истории поездок
- Просмотр баланса баллов
- Просмотр Eco-points
- Просмотр достижений
```

##### **2. Управление бронированиями:**
```typescript
- Просмотр деталей бронирования
- Отмена бронирования (с возвратом)
- Изменение даты/количества участников
- Скачивание ваучера (PDF)
- Связь с оператором/гидом
```

##### **3. Работа с турами:**
```typescript
- Поиск туров (фильтры)
- Просмотр деталей тура
- Бронирование тура
- Добавление в избранное
- Сравнение туров
```

##### **4. Работа с трансферами:**
```typescript
- Поиск трансферов
- Бронирование трансфера
- Отслеживание водителя (real-time)
- Связь с водителем
```

##### **5. Лояльность:**
```typescript
- Просмотр баланса баллов
- Использование баллов при оплате
- Применение промокодов
- Реферальная программа (приглашение друзей)
- Просмотр истории транзакций
```

##### **6. Eco-points:**
```typescript
- Просмотр баланса Eco-баллов
- Просмотр ближайших Eco-точек
- Сканирование QR-кода для начисления
- Просмотр достижений
- Обмен баллов на скидки
```

##### **7. AI-помощник:**
```typescript
- Запрос рекомендаций туров
- Вопросы о Камчатке
- Планирование маршрута
- Консультация по безопасности
```

#### **Сущности:**

##### **Чтение (Read):**
- `User` (свой профиль)
- `Booking` (свои бронирования)
- `Tour` (все туры)
- `Review` (все отзывы)
- `Weather` (погода)
- `EcoPoint` (Eco-точки)
- `LoyaltyTransaction` (свои транзакции)
- `PromoCode` (доступные промокоды)
- `TransferBooking` (свои трансферы)

##### **Создание (Create):**
- `Booking` (новое бронирование)
- `Review` (отзыв после тура)
- `TransferBooking` (бронирование трансфера)
- `ChatMessage` (сообщения AI-чату)

##### **Обновление (Update):**
- `User` (свой профиль)
- `Booking` (изменение бронирования)

##### **Удаление (Delete):**
- `Booking` (отмена бронирования)

#### **API вызовы:**
```typescript
// Туры
GET /api/tours                      // Список туров
GET /api/tours/:id                  // Детали тура
POST /api/bookings                  // Создание бронирования

// Трансферы
POST /api/transfers/search          // Поиск трансферов
POST /api/transfers/book            // Бронирование трансфера

// Лояльность
GET /api/loyalty/stats              // Статистика баллов
POST /api/loyalty/promo/apply       // Применение промокода
GET /api/loyalty/levels             // Уровни лояльности

// Eco-points
GET /api/eco-points                 // Список Eco-точек
GET /api/eco-points/user            // Моя статистика

// AI
POST /api/ai                        // AI-помощник

// Отзывы
POST /api/reviews                   // Оставить отзыв
```

#### **Переходы:**
```typescript
→ /hub/tours                 // Каталог туров
→ /hub/tours/:id             // Детали тура
→ /hub/booking/:id           // Детали бронирования
→ /hub/transfers/search      // Поиск трансферов
→ /hub/profile               // Профиль
→ /hub/loyalty               // Лояльность
→ /hub/eco-points            // Eco-points
```

---

### **2. `/hub/tours` - Каталог туров**

#### **Доступ:** Все авторизованные роли

#### **Назначение:**
Каталог всех доступных туров с фильтрацией и поиском.

#### **Что видит турист:**
```typescript
1. Поиск туров (текстовый + фильтры)
2. Фильтры:
   - Цена (от-до)
   - Сложность (easy, medium, hard)
   - Длительность (часы)
   - Сезон (spring, summer, autumn, winter)
   - Активность (hiking, climbing, etc)
   - Рейтинг (4+, 4.5+, 5)
3. Список туров (карточки)
4. Сортировка (цена, рейтинг, популярность)
5. Пагинация
```

#### **Основные действия:**

##### **Турист:**
```typescript
- Поиск и фильтрация туров
- Просмотр деталей тура
- Бронирование тура
- Добавление в избранное
- Просмотр отзывов
- Сравнение туров
```

##### **Оператор:**
```typescript
- Просмотр всех туров
- Создание нового тура (если свой)
- Редактирование своих туров
- Управление слотами
- Просмотр статистики бронирований
```

##### **Гид:**
```typescript
- Просмотр туров, к которым назначен
- Просмотр расписания
- Просмотр групп туристов
```

#### **Сущности:**

##### **Турист:**
- `Tour` (Read)
- `Review` (Read, Create)
- `Booking` (Create)

##### **Оператор:**
- `Tour` (Read, Create, Update, Delete - только свои)
- `Booking` (Read - только свои туры)
- `Review` (Read)

##### **Гид:**
- `Tour` (Read - только назначенные)
- `Booking` (Read - только свои туры)

#### **API вызовы:**
```typescript
GET /api/tours                      // Список туров
GET /api/tours/:id                  // Детали тура
POST /api/tours                     // Создание тура (оператор)
PUT /api/tours/:id                  // Обновление тура (оператор)
DELETE /api/tours/:id               // Удаление тура (оператор)
GET /api/tours/:id/reviews          // Отзывы о туре
POST /api/tours/:id/reviews         // Оставить отзыв
```

---

## 🏢 **ТУРОПЕРАТОР (Operator)**

### **3. `/hub/operator` - Панель оператора**

#### **Доступ:** Только роль `operator` + `admin`

#### **Назначение:**
CRM система для управления турами, бронированиями и аналитикой.

#### **Что видит оператор:**
```typescript
1. Dashboard (статистика):
   - Общая выручка (total, month, week, day)
   - Активные бронирования
   - Завершённые бронирования
   - Отменённые бронирования
   - Средний чек
   - Конверсия
   - Рейтинг
2. Список туров (свои)
3. Список бронирований (свои туры)
4. Список гидов (назначенные)
5. Календарь (расписание)
6. Финансовая отчётность
7. Уведомления (новые бронирования)
8. Аналитика (графики, тренды)
```

#### **Основные действия:**

##### **1. Управление турами:**
```typescript
CREATE Tour:
  - Название, описание
  - Цена (от-до)
  - Сложность (easy, medium, hard)
  - Длительность (часы)
  - Макс/мин участников
  - Сезон
  - Требования к снаряжению
  - Включено/не включено
  - Координаты маршрута
  - Изображения (загрузка)
  → POST /api/tours

READ Tours:
  - Список всех своих туров
  - Детали тура
  - Статистика по туру
  → GET /api/tours?operator_id=self

UPDATE Tour:
  - Редактирование деталей
  - Изменение цены
  - Обновление изображений
  - Активация/деактивация
  → PUT /api/tours/:id

DELETE Tour:
  - Удаление тура (если нет активных бронирований)
  → DELETE /api/tours/:id
```

##### **2. Управление бронированиями:**
```typescript
READ Bookings:
  - Список всех бронирований своих туров
  - Фильтрация по статусу
  - Поиск по туристу
  → GET /api/bookings?operator_id=self

UPDATE Booking:
  - Подтверждение бронирования (pending → confirmed)
  - Отмена бронирования (+ причина)
  - Завершение тура (confirmed → completed)
  → PUT /api/bookings/:id

Уведомления:
  - Автоматические при новом бронировании
  - SMS/Email/Telegram
```

##### **3. Управление гидами:**
```typescript
READ Guides:
  - Список всех гидов
  - Загрузка гидов (календарь)
  - Рейтинг гидов
  → GET /api/guides

ASSIGN Guide:
  - Назначение гида на тур
  - Изменение назначения
  → PUT /api/tours/:id/guide
```

##### **4. Управление слотами:**
```typescript
CREATE Slot:
  - Создание временного слота для тура
  - Дата, время начала
  - Количество мест
  → POST /api/slots

UPDATE Slot:
  - Изменение доступности
  - Изменение количества мест
  → PUT /api/slots/:id
```

##### **5. Финансовая отчётность:**
```typescript
READ Stats:
  - Общая выручка
  - Выручка по периодам (день, неделя, месяц)
  - Выручка по турам
  - Комиссии платформы
  → GET /api/operator/stats
```

##### **6. Управление погодой:**
```typescript
READ Weather:
  - Прогноз погоды для туров
  - Уровень безопасности
  - Рекомендации
  → GET /api/weather

DECISION:
  - Отмена тура из-за погоды
  - Перенос тура
  - Автоматический возврат средств
```

#### **Сущности:**

##### **Чтение (Read):**
- `Tour` (свои)
- `Booking` (своих туров)
- `Review` (своих туров)
- `Guide` (все)
- `Weather` (все)
- `OperatorStats` (своя статистика)

##### **Создание (Create):**
- `Tour` (новый тур)
- `Slot` (временной слот)
- `Notification` (уведомления туристам)

##### **Обновление (Update):**
- `Tour` (свои туры)
- `Booking` (подтверждение/отмена)
- `Slot` (доступность)

##### **Удаление (Delete):**
- `Tour` (свои туры, если нет активных бронирований)
- `Slot` (свои слоты)

#### **API вызовы:**
```typescript
// Туры
GET /api/tours?operator_id=self     // Мои туры
POST /api/tours                     // Создать тур
PUT /api/tours/:id                  // Обновить тур
DELETE /api/tours/:id               // Удалить тур

// Бронирования
GET /api/bookings?operator_id=self  // Мои бронирования
PUT /api/bookings/:id/confirm       // Подтвердить
PUT /api/bookings/:id/cancel        // Отменить

// Гиды
GET /api/guides                     // Список гидов
PUT /api/tours/:id/guide            // Назначить гида

// Слоты
POST /api/slots                     // Создать слот
PUT /api/slots/:id                  // Обновить слот

// Статистика
GET /api/operator/stats             // Моя статистика

// Погода
GET /api/weather                    // Прогноз
```

#### **Уровни оператора:**

##### **L1 - Базовый:**
```typescript
Доступ:
  - Создание туров
  - Управление слотами
  - Базовые отчёты
  
Ограничения:
  - Макс 10 туров
  - Без AI-ассистента
  - Без API
```

##### **L2 - Партнёр (~5,000₽/мес):**
```typescript
Доступ:
  ✅ Всё из L1
  ✅ Обработка лидов
  ✅ Платёжная система (комиссия ниже)
  ✅ Чат с клиентами
  ✅ Расширенная аналитика
  
Ограничения:
  - Макс 50 туров
  - Без API
```

##### **L3 - Официальный (~15,000₽/мес):**
```typescript
Доступ:
  ✅ Всё из L1 + L2
  ✅ AI-ассистент для операторов
  ✅ Мобильное приложение
  ✅ API интеграции (GDS)
  ✅ White Label (своя брендировка)
  ✅ Приоритетная поддержка
  
Ограничения:
  - Неограниченно
```

---

## 🎒 **ГИД (Guide)**

### **4. `/hub/guide` - Панель гида**

#### **Доступ:** Только роль `guide` + `admin`

#### **Назначение:**
Управление расписанием, группами и доходами.

#### **Что видит гид:**
```typescript
1. Календарь туров (назначенные)
2. Предстоящие туры (ближайшие 7 дней)
3. Активные группы (текущие туры)
4. История завершённых туров
5. Доходы (total, месяц, неделя)
6. Рейтинг (средний + количество отзывов)
7. Уведомления (назначения, изменения)
8. Погода для предстоящих туров
```

#### **Основные действия:**

##### **1. Работа с расписанием:**
```typescript
READ Schedule:
  - Просмотр календаря туров
  - Фильтрация по дате
  - Просмотр деталей тура
  → GET /api/guide/schedule

UPDATE Availability:
  - Установка доступности (даты отпусков)
  - Блокировка дат
  → PUT /api/guide/availability
```

##### **2. Работа с группами:**
```typescript
READ Groups:
  - Список туристов в группе
  - Контактные данные
  - Особые требования (child_seat, wheelchair, etc)
  → GET /api/guide/groups/:tour_id

COMMUNICATE:
  - Отправка сообщений группе
  - Чат с туристами
  - Уведомления (SMS/Telegram)
  → POST /api/guide/notify
```

##### **3. Доходы:**
```typescript
READ Earnings:
  - Общий заработок
  - Заработок по периодам
  - Заработок по турам
  - История выплат
  → GET /api/guide/earnings
```

##### **4. Рейтинг и отзывы:**
```typescript
READ Reviews:
  - Все отзывы о гиде
  - Средний рейтинг
  - Ответы на отзывы
  → GET /api/guide/reviews

CREATE Response:
  - Ответ на отзыв
  → POST /api/reviews/:id/response
```

##### **5. Безопасность:**
```typescript
READ Weather:
  - Погода для предстоящих туров
  - Уровень безопасности
  - Рекомендации
  → GET /api/weather

REPORT Issue:
  - Сообщение о проблеме
  - Запрос отмены тура
  → POST /api/guide/report
```

#### **Сущности:**

##### **Чтение (Read):**
- `Tour` (назначенные)
- `Booking` (групп туристов)
- `User` (туристы в группе)
- `Review` (отзывы о себе)
- `GuideEarnings` (доходы)
- `Weather` (погода)

##### **Создание (Create):**
- `ReviewResponse` (ответ на отзыв)
- `GuideReport` (отчёт о проблеме)
- `Message` (сообщения группе)

##### **Обновление (Update):**
- `GuideAvailability` (доступность)
- `TourStatus` (завершение тура)

#### **API вызовы:**
```typescript
// Расписание
GET /api/guide/schedule              // Календарь туров
PUT /api/guide/availability          // Доступность

// Группы
GET /api/guide/groups/:tour_id       // Туристы в группе
POST /api/guide/notify               // Уведомления группе

// Доходы
GET /api/guide/earnings              // Заработок

// Отзывы
GET /api/guide/reviews               // Мои отзывы
POST /api/reviews/:id/response       // Ответить

// Безопасность
GET /api/weather                     // Погода
POST /api/guide/report               // Сообщить о проблеме
```

---

## 🚗 **ВЛАДЕЛЕЦ ТРАНСФЕРА (Transfer Owner)**

### **5. `/hub/transfer` - Панель трансфера (основная)**

#### **Доступ:** Только роль `transfer` + `admin`

#### **Назначение:**
Управление маршрутами, транспортом и водителями.

#### **Что видит владелец:**
```typescript
1. Dashboard (статистика):
   - Общая выручка
   - Активные заявки
   - Завершённые поездки
   - Средний рейтинг водителей
   - Комиссии платформы
2. Список маршрутов
3. Список транспорта (5 типов)
4. Список водителей
5. Расписание рейсов
6. Календарь загрузки
7. Финансовая отчётность
8. Уведомления (новые заявки)
```

#### **Основные действия:**

##### **1. Управление маршрутами:**
```typescript
CREATE Route:
  - Откуда (название, координаты)
  - Куда (название, координаты)
  - Расстояние (км)
  - Время в пути (мин)
  - Остановки (pickup/dropoff)
  → POST /api/transfer/routes

READ Routes:
  - Список всех маршрутов
  - Статистика по маршруту
  → GET /api/transfer/routes

UPDATE Route:
  - Редактирование маршрута
  - Активация/деактивация
  → PUT /api/transfer/routes/:id

DELETE Route:
  - Удаление маршрута
  → DELETE /api/transfer/routes/:id
```

##### **2. Управление транспортом:**
```typescript
CREATE Vehicle:
  - Тип (economy, comfort, business, minibus, bus)
  - Марка, модель
  - Год выпуска
  - Вместимость
  - Функции (wifi, child_seat, wheelchair, etc)
  - Номер (гос. номер)
  → POST /api/transfer/vehicles

READ Vehicles:
  - Список всего транспорта
  - Статистика по транспорту
  - Загрузка (% использования)
  → GET /api/transfer/vehicles

UPDATE Vehicle:
  - Редактирование
  - Активация/деактивация
  → PUT /api/transfer/vehicles/:id

DELETE Vehicle:
  - Удаление транспорта
  → DELETE /api/transfer/vehicles/:id
```

##### **3. Управление водителями:**
```typescript
CREATE Driver:
  - ФИО
  - Телефон, email
  - Номер водительского удостоверения
  - Языки (ru, en, zh, ja)
  - Telegram chat_id (для уведомлений)
  → POST /api/transfer/drivers

READ Drivers:
  - Список всех водителей
  - Рейтинг водителей
  - Количество поездок
  - Доступность
  → GET /api/transfer/drivers

UPDATE Driver:
  - Редактирование
  - Активация/деактивация
  - Обновление рейтинга (автоматически)
  → PUT /api/transfer/drivers/:id

DELETE Driver:
  - Удаление водителя
  → DELETE /api/transfer/drivers/:id
```

##### **4. Управление расписанием:**
```typescript
CREATE Schedule:
  - Маршрут
  - Транспорт
  - Водитель
  - Время отправления
  - Время прибытия
  - Цена за место
  - Количество мест
  → POST /api/transfer/schedules

READ Schedules:
  - Список всех рейсов
  - Фильтрация по дате, маршруту
  → GET /api/transfer/schedules

UPDATE Schedule:
  - Редактирование
  - Изменение цены
  - Изменение доступных мест
  → PUT /api/transfer/schedules/:id

DELETE Schedule:
  - Удаление рейса
  → DELETE /api/transfer/schedules/:id
```

##### **5. Работа с заявками:**
```typescript
READ Bookings:
  - Список всех заявок
  - Фильтрация по статусу
  - Поиск по пассажиру
  → GET /api/transfers/bookings

UPDATE Booking:
  - Подтверждение заявки
  - Отмена заявки
  - Завершение поездки
  → PUT /api/transfers/bookings/:id
```

##### **6. AI-сопоставление:**
```typescript
Автоматическое при новой заявке:
  1. Анализ всех доступных водителей
  2. Расчёт балла для каждого:
     - Рейтинг (30%)
     - Цена (25%)
     - Расстояние (20%)
     - Доступность (15%)
     - Опыт (10%)
  3. Топ-5 водителей
  4. Турист выбирает
  5. Автоматическое уведомление водителю (Telegram)
```

##### **7. Финансовая отчётность:**
```typescript
READ Stats:
  - Общая выручка
  - Выручка по периодам
  - Комиссии:
    - Платформа (15%)
    - Оператор (10%)
    - Водитель (75%)
  → GET /api/transfers/operator/stats
```

#### **Сущности:**

##### **Чтение (Read):**
- `TransferRoute` (свои)
- `TransferVehicle` (свои)
- `TransferDriver` (свои)
- `TransferSchedule` (свои)
- `TransferBooking` (свои)
- `TransferReview` (своих водителей)
- `TransferOperatorStats` (своя статистика)

##### **Создание (Create):**
- `TransferRoute` (новый маршрут)
- `TransferVehicle` (новый транспорт)
- `TransferDriver` (новый водитель)
- `TransferSchedule` (новый рейс)
- `TransferNotification` (уведомления)

##### **Обновление (Update):**
- `TransferRoute` (свои маршруты)
- `TransferVehicle` (свой транспорт)
- `TransferDriver` (своих водителей)
- `TransferSchedule` (свои рейсы)
- `TransferBooking` (подтверждение/отмена)

##### **Удаление (Delete):**
- `TransferRoute` (свои маршруты)
- `TransferVehicle` (свой транспорт)
- `TransferDriver` (своих водителей)
- `TransferSchedule` (свои рейсы)

#### **API вызовы:**
```typescript
// Маршруты
GET /api/transfer/routes             // Мои маршруты
POST /api/transfer/routes            // Создать маршрут
PUT /api/transfer/routes/:id         // Обновить
DELETE /api/transfer/routes/:id      // Удалить

// Транспорт
GET /api/transfer/vehicles           // Мой транспорт
POST /api/transfer/vehicles          // Добавить
PUT /api/transfer/vehicles/:id       // Обновить
DELETE /api/transfer/vehicles/:id    // Удалить

// Водители
GET /api/transfer/drivers            // Мои водители
POST /api/transfer/drivers           // Добавить
PUT /api/transfer/drivers/:id        // Обновить
DELETE /api/transfer/drivers/:id     // Удалить

// Расписание
GET /api/transfer/schedules          // Мои рейсы
POST /api/transfer/schedules         // Создать
PUT /api/transfer/schedules/:id      // Обновить
DELETE /api/transfer/schedules/:id   // Удалить

// Заявки
GET /api/transfers/bookings          // Мои заявки
PUT /api/transfers/bookings/:id      // Подтвердить/отменить

// Статистика
GET /api/transfers/operator/dashboard // Дашборд оператора
```

---

### **6. `/hub/transfer-operator` - Панель управления трансфером (расширенная)**

#### **Доступ:** Только роль `transfer` + `admin`

#### **Назначение:**
Расширенная панель с аналитикой и управлением.

#### **Отличия от `/hub/transfer`:**
```typescript
/hub/transfer:
  - Основная панель (список, CRUD)
  
/hub/transfer-operator:
  - Аналитика (графики, тренды)
  - Финансовая отчётность (детальная)
  - Управление водителями (расписание, загрузка)
  - AI-сопоставление (настройки, статистика)
  - Интеграции (Yandex Taxi, Uber)
```

#### **Что видит владелец:**
```typescript
1. Расширенная аналитика:
   - Графики выручки (по дням, неделям, месяцам)
   - Загрузка транспорта (%)
   - Топ маршрутов
   - Топ водителей
   - Конверсия заявок
   - Средний чек
2. Финансовая отчётность:
   - Детальный отчёт по платежам
   - Комиссии (разбивка)
   - Выплаты водителям
   - Налоги
3. Управление водителями:
   - Загрузка водителей (график)
   - Доступность
   - Рейтинги (динамика)
   - Заработок водителей
4. AI-сопоставление:
   - Статистика алгоритма
   - Настройки весов
   - История сопоставлений
5. Интеграции:
   - Yandex Taxi API
   - Uber API
   - Webhooks
```

---

## 💼 **АГЕНТ (Agent)**

### **7. `/hub/agent` - Панель агента**

#### **Доступ:** Только роль `agent` + `admin`

#### **Назначение:**
B2B продажи, групповые туры, ваучеры, комиссии.

#### **Что видит агент:**
```typescript
1. Dashboard:
   - Общий объём продаж
   - Комиссии (заработано)
   - Активные группы
   - Завершённые группы
   - Средний чек
2. Список групповых туров
3. Список ваучеров
4. Список партнёров (операторы)
5. Финансовая отчётность
6. GDS интеграции (Amadeus, Sabre)
```

#### **Основные действия:**

##### **1. Работа с групповыми турами:**
```typescript
CREATE Group Tour:
  - Выбор базового тура
  - Количество участников (мин 10)
  - Даты
  - Особые требования
  - Согласование с оператором
  → POST /api/agent/group-tours

READ Group Tours:
  - Список всех групповых туров
  - Статус (pending, confirmed, completed)
  → GET /api/agent/group-tours

UPDATE Group Tour:
  - Изменение количества участников
  - Изменение дат
  → PUT /api/agent/group-tours/:id
```

##### **2. Работа с ваучерами:**
```typescript
CREATE Voucher:
  - Выпуск ваучеров для группы
  - Персонализация (имя, дата)
  - Электронный формат (PDF/QR)
  → POST /api/agent/vouchers

READ Vouchers:
  - Список всех ваучеров
  - Статус (active, used, expired)
  → GET /api/agent/vouchers

SEND Voucher:
  - Отправка по email
  - Отправка в Telegram
  → POST /api/agent/vouchers/:id/send
```

##### **3. Работа с комиссиями:**
```typescript
READ Commissions:
  - Общая сумма комиссий
  - Комиссии по турам
  - История выплат
  → GET /api/agent/commissions

REQUEST Payout:
  - Запрос выплаты
  → POST /api/agent/payouts
```

##### **4. Работа с партнёрами:**
```typescript
READ Partners:
  - Список всех операторов
  - Условия сотрудничества
  - Рейтинги
  → GET /api/partners

CREATE Partnership:
  - Запрос партнёрства
  - Условия комиссий
  → POST /api/agent/partnerships
```

##### **5. GDS интеграции:**
```typescript
SEARCH Tours (через GDS):
  - Поиск в глобальных системах
  - Amadeus API
  - Sabre API
  → POST /api/agent/gds/search

BOOK Tour (через GDS):
  - Бронирование через GDS
  → POST /api/agent/gds/book
```

#### **Сущности:**

##### **Чтение (Read):**
- `Tour` (все)
- `Partner` (все операторы)
- `GroupTour` (свои)
- `Voucher` (свои)
- `AgentCommission` (свои комиссии)
- `Partnership` (свои партнёрства)

##### **Создание (Create):**
- `GroupTour` (новая группа)
- `Voucher` (новый ваучер)
- `Partnership` (новое партнёрство)
- `Booking` (через GDS)

##### **Обновление (Update):**
- `GroupTour` (свои группы)
- `Voucher` (статус)

#### **API вызовы:**
```typescript
// Групповые туры
GET /api/agent/group-tours          // Мои группы
POST /api/agent/group-tours         // Создать группу
PUT /api/agent/group-tours/:id      // Обновить

// Ваучеры
GET /api/agent/vouchers             // Мои ваучеры
POST /api/agent/vouchers            // Выпустить
POST /api/agent/vouchers/:id/send   // Отправить

// Комиссии
GET /api/agent/commissions          // Мои комиссии
POST /api/agent/payouts             // Запрос выплаты

// Партнёры
GET /api/partners                   // Все операторы
POST /api/agent/partnerships        // Запрос партнёрства

// GDS
POST /api/agent/gds/search          // Поиск в GDS
POST /api/agent/gds/book            // Бронирование через GDS
```

---

## ⚙️ **АДМИНИСТРАТОР (Admin)**

### **8. `/hub/admin` - Панель администратора**

#### **Доступ:** Только роль `admin`

#### **Назначение:**
Системное управление платформой.

#### **Что видит администратор:**
```typescript
1. Dashboard (общая статистика):
   - Всего пользователей
   - Всего операторов
   - Всего туров
   - Общая выручка (GMV)
   - Комиссия платформы
   - Активных бронирований
2. Список пользователей (все роли)
3. Список операторов (модерация)
4. Список туров (модерация)
5. Список бронирований (все)
6. Финансовая отчётность (платформа)
7. Системный мониторинг (БД, API, сервисы)
8. Аудит действий (логи)
9. Управление погодой
10. Межоператорские связи
```

#### **Основные действия:**

##### **1. Управление пользователями:**
```typescript
READ Users:
  - Список всех пользователей
  - Фильтрация по роли
  - Поиск
  → GET /api/admin/users

UPDATE User:
  - Изменение роли
  - Блокировка/разблокировка
  - Изменение уровня оператора (L1, L2, L3)
  → PUT /api/admin/users/:id

DELETE User:
  - Удаление пользователя
  → DELETE /api/admin/users/:id
```

##### **2. Модерация контента:**
```typescript
READ Tours (все):
  - Список всех туров
  - Фильтрация по статусу (pending, approved, rejected)
  → GET /api/admin/tours

UPDATE Tour:
  - Одобрение тура
  - Отклонение тура (+ причина)
  - Редактирование (исправление ошибок)
  → PUT /api/admin/tours/:id/moderate

DELETE Tour:
  - Удаление нарушающего контента
  → DELETE /api/admin/tours/:id
```

##### **3. Модерация операторов:**
```typescript
READ Operators:
  - Список всех операторов
  - Фильтрация по статусу (pending, verified, rejected)
  → GET /api/admin/operators

UPDATE Operator:
  - Верификация оператора
  - Отклонение (+ причина)
  - Изменение уровня (L1, L2, L3)
  → PUT /api/admin/operators/:id/verify
```

##### **4. Управление финансами:**
```typescript
READ Financial Stats:
  - GMV (Gross Merchandise Value)
  - Комиссии платформы
  - Комиссии по операторам
  - Выплаты
  - Возвраты
  → GET /api/admin/finance/stats

CREATE Commission Rules:
  - Установка комиссий
  - Особые условия для операторов
  → POST /api/admin/finance/commissions
```

##### **5. Системный мониторинг:**
```typescript
READ Health:
  - Статус БД (PostgreSQL)
  - Статус API (endpoints)
  - Статус внешних сервисов (SMS, Email, AI)
  - Использование ресурсов (CPU, Memory, Disk)
  → GET /api/admin/health

READ Logs:
  - Логи системы
  - Ошибки
  - Предупреждения
  → GET /api/admin/logs
```

##### **6. Аудит действий:**
```typescript
READ Audit Logs:
  - Все действия пользователей
  - Фильтрация по пользователю, действию, дате
  - IP-адреса
  - User-Agent
  → GET /api/admin/audit
```

##### **7. Управление погодой:**
```typescript
READ Weather:
  - Текущая погода
  - Прогнозы
  - Уровни безопасности
  → GET /api/admin/weather

UPDATE Weather:
  - Ручная корректировка
  - Установка уровня безопасности
  → PUT /api/admin/weather

CREATE Weather Alert:
  - Создание предупреждения
  - Массовая рассылка операторам
  → POST /api/admin/weather/alert
```

##### **8. Межоператорские связи:**
```typescript
CREATE Partnership:
  - Создание партнёрства между операторами
  - Обмен слотами
  - Совместные туры
  → POST /api/admin/partnerships

READ Partnerships:
  - Список всех партнёрств
  → GET /api/admin/partnerships
```

#### **Сущности:**

##### **Чтение (Read):**
- **ВСЁ** (все сущности всех пользователей)

##### **Создание (Create):**
- `User` (создание пользователей)
- `Tour` (создание туров от лица операторов)
- `Operator` (создание операторов)
- `Partnership` (межоператорские связи)
- `WeatherAlert` (предупреждения)
- `CommissionRule` (правила комиссий)

##### **Обновление (Update):**
- **ВСЁ** (все сущности)
- `UserRole` (изменение ролей)
- `OperatorLevel` (изменение уровней)
- `TourStatus` (модерация)
- `Weather` (корректировка)

##### **Удаление (Delete):**
- **ВСЁ** (с ограничениями на критичные данные)

#### **API вызовы:**
```typescript
// Пользователи
GET /api/admin/users                 // Все пользователи
PUT /api/admin/users/:id             // Обновить
DELETE /api/admin/users/:id          // Удалить

// Модерация
GET /api/admin/tours                 // Все туры
PUT /api/admin/tours/:id/moderate    // Модерировать

// Операторы
GET /api/admin/operators             // Все операторы
PUT /api/admin/operators/:id/verify  // Верифицировать

// Финансы
GET /api/admin/finance/stats         // Финансовая статистика
POST /api/admin/finance/commissions  // Комиссии

// Мониторинг
GET /api/admin/health                // Здоровье системы
GET /api/admin/logs                  // Логи

// Аудит
GET /api/admin/audit                 // Аудит действий

// Погода
GET /api/admin/weather               // Погода
PUT /api/admin/weather               // Обновить
POST /api/admin/weather/alert        // Предупреждение

// Партнёрства
GET /api/admin/partnerships          // Все партнёрства
POST /api/admin/partnerships         // Создать
```

---

# 🔗 ОБЩИЕ HUB СТРАНИЦЫ

## 9. **`/hub/cars` - Аренда авто**

**Доступ:** Все авторизованные роли

**Назначение:** Каталог автомобилей для аренды.

**Сущности:** `Car`, `CarBooking`

---

## 10. **`/hub/gear` - Прокат снаряжения**

**Доступ:** Все авторизованные роли

**Назначение:** Каталог снаряжения для туризма.

**Сущности:** `Gear`, `GearBooking`

---

## 11. **`/hub/stay` - Проживание**

**Доступ:** Все авторизованные роли

**Назначение:** Каталог отелей, гостиниц, хостелов.

**Сущности:** `Stay`, `StayBooking`

---

## 12. **`/hub/souvenirs` - Сувениры**

**Доступ:** Все авторизованные роли

**Назначение:** Каталог сувениров Камчатки.

**Сущности:** `Souvenir`, `SouvenirOrder`

---

## 13. **`/hub/safety` - Безопасность**

**Доступ:** Все авторизованные роли

**Назначение:** Информация о безопасности на Камчатке.

**Функционал:**
- SOS кнопка
- Контакты МЧС
- Карта опасных зон
- Сейсмическая активность
- Погодные предупреждения

---

# 🔄 ПЕРЕХОДЫ МЕЖДУ СТРАНИЦАМИ

## **Типовые сценарии навигации:**

### **Сценарий 1: Турист бронирует тур**

```
/ (Home)
  ↓ Клик "Поиск туров" или "Турист"
/hub/tourist
  ↓ Клик "Каталог туров"
/hub/tours
  ↓ Клик на карточку тура
/hub/tours/:id (Детали тура)
  ↓ Клик "Забронировать"
/hub/booking/new
  ↓ Заполнение формы
  ↓ Клик "Оплатить"
/hub/payment/:booking_id
  ↓ Оплата (CloudPayments)
  ↓ Успех
/hub/booking/:booking_id/success
  ↓ Клик "Вернуться в профиль"
/hub/tourist
```

### **Сценарий 2: Турист бронирует трансфер**

```
/ (Home)
  ↓
/hub/tourist
  ↓ Клик "Трансферы"
/hub/transfers/search
  ↓ Ввод: откуда, куда, дата, пассажиры
  ↓ Клик "Найти"
/hub/transfers/search/results
  ↓ AI Matching → Топ-5 водителей
  ↓ Клик на водителя
/hub/transfers/booking/new
  ↓ Заполнение формы
  ↓ Клик "Забронировать"
  ↓ API: POST /api/transfers/book
  ↓ Уведомления (SMS + Email + Telegram)
/hub/transfers/booking/:booking_id/success
  ↓
/hub/tourist
```

### **Сценарий 3: Оператор создаёт тур**

```
/hub/operator
  ↓ Клик "Создать тур"
/hub/operator/tours/new
  ↓ Заполнение формы:
    - Название, описание
    - Цена, сложность, длительность
    - Координаты, требования
    - Загрузка изображений
  ↓ Клик "Создать"
  ↓ API: POST /api/tours
/hub/operator
  ↓ Тур добавлен в список
  ↓ Модерация администратором (если требуется)
```

### **Сценарий 4: Гид просматривает расписание**

```
/hub/guide
  ↓ Клик "Календарь"
/hub/guide/schedule
  ↓ Фильтрация по дате
  ↓ Клик на тур
/hub/guide/tour/:id
  ↓ Просмотр деталей:
    - Список туристов
    - Контакты
    - Погода
    - Особые требования
  ↓ Клик "Связаться с группой"
/hub/guide/tour/:id/chat
  ↓ Отправка сообщений
```

### **Сценарий 5: Владелец трансфера добавляет водителя**

```
/hub/transfer-operator
  ↓ Клик "Водители"
/hub/transfer-operator/drivers
  ↓ Клик "Добавить водителя"
/hub/transfer-operator/drivers/new
  ↓ Заполнение формы:
    - ФИО, телефон, email
    - Водительское удостоверение
    - Языки
    - Telegram chat_id
  ↓ Клик "Добавить"
  ↓ API: POST /api/transfer/drivers
/hub/transfer-operator/drivers
  ↓ Водитель добавлен в список
```

---

# 📊 СУЩНОСТИ И CRUD ОПЕРАЦИИ

## **Основные сущности:**

### **1. User (Пользователь)**
```typescript
interface User {
  id: string;
  email: string;
  name: string;
  role: 'tourist' | 'operator' | 'guide' | 'transfer' | 'agent' | 'admin';
  preferences: UserPreferences;
  createdAt: Date;
  updatedAt: Date;
}
```

**CRUD по ролям:**
- **Tourist:** Read (свой), Update (свой)
- **Operator:** Read (свой), Update (свой)
- **Guide:** Read (свой), Update (свой)
- **Transfer:** Read (свой), Update (свой)
- **Agent:** Read (свой), Update (свой)
- **Admin:** Read (все), Create, Update (все), Delete (с ограничениями)

---

### **2. Tour (Тур)**
```typescript
interface Tour {
  id: string;
  title: string;
  description: string;
  difficulty: 'easy' | 'medium' | 'hard';
  duration: number; // часы
  priceFrom: number;
  priceTo: number;
  operatorId: string;
  guideId: string;
  maxParticipants: number;
  minParticipants: number;
  isActive: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

**CRUD по ролям:**
- **Tourist:** Read (все активные)
- **Operator:** Read (все), Create (свои), Update (свои), Delete (свои)
- **Guide:** Read (назначенные)
- **Admin:** Read (все), Update (все), Delete (все)

---

### **3. Booking (Бронирование)**
```typescript
interface Booking {
  id: string;
  userId: string;
  tourId: string;
  date: Date;
  participants: number;
  totalPrice: number;
  status: 'pending' | 'confirmed' | 'cancelled' | 'completed';
  paymentStatus: 'pending' | 'paid' | 'refunded';
  createdAt: Date;
  updatedAt: Date;
}
```

**CRUD по ролям:**
- **Tourist:** Read (свои), Create, Update (свои), Delete (отмена)
- **Operator:** Read (своих туров), Update (подтверждение/отмена)
- **Guide:** Read (своих туров)
- **Admin:** Read (все), Update (все)

---

### **4. TransferBooking (Бронирование трансфера)**
```typescript
interface TransferBooking {
  id: string;
  userId: string;
  operatorId: string;
  routeId: string;
  vehicleId: string;
  driverId: string;
  scheduleId: string;
  bookingDate: string;
  passengersCount: number;
  totalPrice: number;
  status: 'pending' | 'confirmed' | 'cancelled' | 'completed' | 'in_progress';
  confirmationCode: string;
  createdAt: Date;
  updatedAt: Date;
}
```

**CRUD по ролям:**
- **Tourist:** Read (свои), Create
- **Transfer:** Read (свои), Update (подтверждение/отмена)
- **Admin:** Read (все), Update (все)

---

### **5. Review (Отзыв)**
```typescript
interface Review {
  id: string;
  userId: string;
  tourId: string;
  rating: number; // 1-5
  comment: string;
  isVerified: boolean;
  createdAt: Date;
  updatedAt: Date;
}
```

**CRUD по ролям:**
- **Tourist:** Read (все), Create (после завершения тура)
- **Operator:** Read (своих туров)
- **Guide:** Read (о себе)
- **Admin:** Read (все), Delete (нарушающие)

---

### **6. LoyaltyTransaction (Транзакция лояльности)**
```typescript
interface LoyaltyTransaction {
  id: string;
  userId: string;
  type: 'earn' | 'redeem' | 'expire' | 'refund';
  amount: number;
  description: string;
  bookingId?: string;
  createdAt: Date;
  expiresAt?: Date;
}
```

**CRUD по ролям:**
- **Tourist:** Read (свои)
- **System:** Create (автоматически при оплате)
- **Admin:** Read (все)

---

### **7. EcoPoint (Экологическая точка)**
```typescript
interface EcoPoint {
  id: string;
  name: string;
  description: string;
  coordinates: GeoPoint;
  category: 'recycling' | 'cleaning' | 'conservation' | 'education';
  points: number;
  isActive: boolean;
  createdAt: Date;
}
```

**CRUD по ролям:**
- **Tourist:** Read (все активные)
- **Admin:** Read (все), Create, Update, Delete

---

# 📈 СТАТИСТИКА И АНАЛИТИКА

## **Доступ к статистике по ролям:**

### **Турист:**
```typescript
- Мои бронирования
- Мои баллы лояльности
- Мои Eco-points
- Мои отзывы
```

### **Оператор:**
```typescript
- Выручка (total, месяц, неделя, день)
- Количество бронирований
- Средний чек
- Конверсия
- Рейтинг
- Топ туры
```

### **Гид:**
```typescript
- Количество туров
- Заработок
- Рейтинг
- Отзывы
```

### **Владелец трансфера:**
```typescript
- Выручка (total, месяц, неделя, день)
- Количество поездок
- Средний чек
- Загрузка транспорта
- Рейтинг водителей
- Топ маршруты
```

### **Агент:**
```typescript
- Объём продаж
- Комиссии
- Количество групп
- Средний чек
```

### **Администратор:**
```typescript
- ВСЁ (все метрики всех пользователей)
- GMV (Gross Merchandise Value)
- Комиссия платформы
- Количество пользователей
- Системное здоровье
```

---

# ✅ ИТОГОВАЯ СВОДКА

## **Всего страниц:** 13

### **Публичные:** 3
- `/` (Home)
- `/demo`
- `/auth/login`

### **Hub (Protected):** 10
- `/hub/tourist` (Турист)
- `/hub/operator` (Оператор)
- `/hub/guide` (Гид)
- `/hub/transfer` (Трансфер - основная)
- `/hub/transfer-operator` (Трансфер - расширенная)
- `/hub/agent` (Агент) *[планируется]*
- `/hub/admin` (Админ) *[планируется]*
- `/hub/tours` (Общая - каталог туров)
- `/hub/cars`, `/hub/gear`, `/hub/stay`, `/hub/souvenirs`, `/hub/safety` (Общие - дополнительные услуги)

## **Основные сущности:** 18+

**Модуль пользователей:**
- User, UserSession, AuditLog

**Модуль туров:**
- Tour, Partner, Booking, Review, Asset

**Модуль трансферов:**
- TransferRoute, TransferVehicle, TransferDriver, TransferSchedule, TransferBooking, TransferStop, TransferReview, TransferNotification

**Модуль платежей:**
- TransferPayment, TransferCommission, TransferRefund, TransferFinancialOperation

**Модуль лояльности:**
- LoyaltyTransaction, PromoCode, PromoCodeUsage, Referral, LoyaltyLevel

**Модуль экологии:**
- EcoPoint, UserEcoPoint, EcoAchievement, UserAchievement, UserEcoActivity

**Модуль AI:**
- ChatSession, ChatMessage

## **API Endpoints:** 23

---

**ДОКУМЕНТ ЗАВЕРШЁН!** 🗺️  
**Полная карта навигации создана!** ✅
