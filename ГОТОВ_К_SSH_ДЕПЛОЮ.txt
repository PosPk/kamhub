╔══════════════════════════════════════════════════════════════╗
║  🚀 KAMHUB - ГОТОВ К ДЕПЛОЮ ЧЕРЕЗ SSH                       ║
║  IP: 147.45.158.166                                          ║
║  ✅ ВСЁ НАСТРОЕНО И ПРОВЕРЕНО                               ║
╚══════════════════════════════════════════════════════════════╝

═══════════════════════════════════════════════════════════════
✅ ЧТО СДЕЛАНО
═══════════════════════════════════════════════════════════════

1. ✅ Установлен sshpass для автоматического ввода пароля
2. ✅ Проверено подключение к серверу (147.45.158.166)
3. ✅ Создан скрипт быстрого деплоя (quick-deploy-ssh.sh)
4. ✅ Создан скрипт детального деплоя (auto-deploy-ssh.sh)
5. ✅ Создана полная документация (SSH_DEPLOY_ИНСТРУКЦИЯ.md)
6. ✅ Сервер готов: Ubuntu 6.8.0-87-generic x86_64

═══════════════════════════════════════════════════════════════
⚡ ЗАПУСК ДЕПЛОЯ (ВЫБЕРИТЕ ОДИН ВАРИАНТ)
═══════════════════════════════════════════════════════════════

ВАРИАНТ 1: Быстрый деплой (РЕКОМЕНДУЕТСЯ)
────────────────────────────────────────────────────────────────

./quick-deploy-ssh.sh

✓ Автоматический деплой одной командой
✓ Время: 10-15 минут
✓ Минимальный вывод
✓ Всё делается автоматически


ВАРИАНТ 2: Детальный деплой
────────────────────────────────────────────────────────────────

./auto-deploy-ssh.sh

✓ Подробные логи каждого шага
✓ Цветной вывод
✓ Сохранение credentials
✓ Проверки на каждом этапе


ВАРИАНТ 3: Ручной деплой
────────────────────────────────────────────────────────────────

См. SSH_DEPLOY_ИНСТРУКЦИЯ.md для пошаговых команд

═══════════════════════════════════════════════════════════════
📋 ДАННЫЕ СЕРВЕРА
═══════════════════════════════════════════════════════════════

IP:       147.45.158.166
User:     root
Password: eiGo@VK4.,,VH7
ОС:       Ubuntu 6.8.0-87-generic
Статус:   ✅ ОНЛАЙН (ping: 176ms)

Подключение:
  ssh root@147.45.158.166
  или
  sshpass -p 'eiGo@VK4.,,VH7' ssh root@147.45.158.166

═══════════════════════════════════════════════════════════════
🎯 ЧТО БУДЕТ УСТАНОВЛЕНО
═══════════════════════════════════════════════════════════════

✓ Node.js 20
✓ PostgreSQL (база данных kamchatour)
✓ Nginx (веб-сервер)
✓ PM2 (менеджер процессов)
✓ Git (для клонирования)
✓ KamHub (проект из GitHub)
✓ Настроенный .env файл
✓ Применённые миграции БД
✓ Автозапуск при перезагрузке
✓ Firewall (UFW)

═══════════════════════════════════════════════════════════════
⏱️ ВРЕМЯ ВЫПОЛНЕНИЯ
═══════════════════════════════════════════════════════════════

Обновление системы:         1-2 минуты
Установка Node.js:          1-2 минуты
Установка PostgreSQL:       1-2 минуты
Установка Nginx + PM2:      1 минута
Клонирование проекта:       30 секунд
Установка зависимостей:     2-3 минуты
Сборка проекта:             3-5 минут
Применение миграций:        30 секунд
Настройка PM2 + Nginx:      1 минута
─────────────────────────────────────────────────────────────
ИТОГО:                      10-15 минут

═══════════════════════════════════════════════════════════════
⚠️ ПОСЛЕ ДЕПЛОЯ: ЗАПОЛНИТЬ API КЛЮЧИ
═══════════════════════════════════════════════════════════════

1. Подключиться к серверу:
   sshpass -p 'eiGo@VK4.,,VH7' ssh root@147.45.158.166

2. Отредактировать .env:
   nano /var/www/kamchatour/.env

3. Заполнить обязательные ключи:
   
   YANDEX_MAPS_API_KEY=ваш_ключ
   → Получить: https://developer.tech.yandex.ru/
   → Лимит: 25,000 запросов/день (бесплатно)
   
   GROQ_API_KEY=gsk_ваш_ключ
   → Получить: https://console.groq.com/
   → Лимит: 14,400 запросов/день (бесплатно)
   
   DEEPSEEK_API_KEY=sk_ваш_ключ
   → Получить: https://platform.deepseek.com/
   → Бонус: $5 бесплатных кредитов

4. Перезапустить:
   pm2 restart kamchatour-hub

═══════════════════════════════════════════════════════════════
🔧 ПОЛЕЗНЫЕ КОМАНДЫ
═══════════════════════════════════════════════════════════════

Подключение:
  sshpass -p 'eiGo@VK4.,,VH7' ssh root@147.45.158.166

Статус PM2:
  sshpass -p 'eiGo@VK4.,,VH7' ssh root@147.45.158.166 "pm2 status"

Логи PM2:
  sshpass -p 'eiGo@VK4.,,VH7' ssh root@147.45.158.166 "pm2 logs kamchatour-hub"

Перезапуск:
  sshpass -p 'eiGo@VK4.,,VH7' ssh root@147.45.158.166 "pm2 restart kamchatour-hub"

Статус Nginx:
  sshpass -p 'eiGo@VK4.,,VH7' ssh root@147.45.158.166 "systemctl status nginx"

═══════════════════════════════════════════════════════════════
📄 СОЗДАННЫЕ ФАЙЛЫ
═══════════════════════════════════════════════════════════════

✓ quick-deploy-ssh.sh           - Быстрый автодеплой
✓ auto-deploy-ssh.sh            - Детальный автодеплой
✓ SSH_DEPLOY_ИНСТРУКЦИЯ.md      - Полная документация
✓ ДЕПЛОЙ_НА_147.45.158.166.md   - Подробное руководство
✓ КОМАНДЫ_ДЕПЛОЯ.sh             - Шпаргалка команд
✓ СТАРТ_ДЕПЛОЯ.txt              - Быстрый старт

═══════════════════════════════════════════════════════════════
✅ ЧЕКЛИСТ
═══════════════════════════════════════════════════════════════

☐ 1. Запустить ./quick-deploy-ssh.sh
☐ 2. Подождать 10-15 минут
☐ 3. Получить API ключи (25 минут):
     ☐ Yandex Maps
     ☐ GROQ
     ☐ DeepSeek
☐ 4. Подключиться к серверу
☐ 5. Отредактировать .env
☐ 6. Перезапустить PM2
☐ 7. Проверить: http://147.45.158.166

═══════════════════════════════════════════════════════════════
💰 СТОИМОСТЬ
═══════════════════════════════════════════════════════════════

VDS сервер (Timeweb):     ~700₽/мес
PostgreSQL (локальная):   БЕСПЛАТНО
Nginx:                    БЕСПЛАТНО
PM2:                      БЕСПЛАТНО
SSL (Let's Encrypt):      БЕСПЛАТНО
AI APIs (в лимитах):      БЕСПЛАТНО
────────────────────────────────────────────────────────────
ИТОГО:                    ~700₽/мес

═══════════════════════════════════════════════════════════════

✅ ВСЁ ГОТОВО К ДЕПЛОЮ!

Запустите:
  ./quick-deploy-ssh.sh

Или прочитайте:
  SSH_DEPLOY_ИНСТРУКЦИЯ.md

═══════════════════════════════════════════════════════════════

🚀 Удачного деплоя! 🏔️

KamHub - Создано для Камчатки с любовью
Дата: 26 ноября 2025
