"use strict";(()=>{var e={};e.id=958,e.ids=[958],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8678:e=>{e.exports=import("pg")},5411:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{originalPathname:()=>m,patchFetch:()=>l,requestAsyncStorage:()=>u,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var n=a(3278),s=a(5002),o=a(4877),i=a(3247),p=e([i]);i=(p.then?(await p)():p)[0];let c=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/health/db/route",pathname:"/api/health/db",filename:"route",bundlePath:"app/api/health/db/route"},resolvedPagePath:"/workspace/app/api/health/db/route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:u,staticGenerationAsyncStorage:d,serverHooks:h}=c,m="/api/health/db/route";function l(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}r()}catch(e){r(e)}})},3247:(e,t,a)=>{a.a(e,async(e,r)=>{try{a.r(t),a.d(t,{GET:()=>i,runtime:()=>p});var n=a(1309),s=a(8678),o=e([s]);s=(o.then?(await o)():o)[0];let p="nodejs";async function i(e){let t=process.env.DATABASE_URL;if(!t)return n.NextResponse.json({error:"NO_DATABASE_URL"},{status:500});let a=new s.Client({connectionString:t,ssl:{rejectUnauthorized:!1}});try{await a.connect();let e=await a.query(`select table_schema, table_name
         from information_schema.tables
        where table_schema not in ('pg_catalog','information_schema')
        order by 1,2`),t=await a.query(`select relname as table, reltuples::bigint as approx_rows
         from pg_class where relkind='r' order by 1`);return n.NextResponse.json({tables:e.rows,approx:t.rows})}catch(e){return n.NextResponse.json({error:"DB_FAILED",message:e?.message},{status:500})}finally{try{await a.end()}catch{}}}r()}catch(e){r(e)}})}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[379,833],()=>a(5411));module.exports=r})();