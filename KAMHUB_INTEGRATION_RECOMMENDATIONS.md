# üîÑ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ KamHub —Å —Ç–µ–∫—É—â–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º

## üìã –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è KamHub –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –≤ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç KamchaTour Hub.

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | KamHub (GitHub) | –¢–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-----------|-----------------|----------------|--------------|
| **Next.js** | 14.2.15 | 14.2.15 | ‚úÖ –í–µ—Ä—Å–∏–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç |
| **TypeScript** | 5.4.5 | 5.4.5 | ‚úÖ –í–µ—Ä—Å–∏–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç |
| **API Routes** | 13 –≥—Ä—É–ø–ø, Edge Runtime | 23 —Ñ–∞–π–ª–∞, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ | ‚ö° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Edge –¥–ª—è AI |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | PostgreSQL + PostGIS | PostgreSQL | ‚úÖ PostGIS —É–∂–µ –µ—Å—Ç—å |
| **–î–∏–∑–∞–π–Ω** | –ß–µ—Ä–Ω–æ-–∑–æ–ª–æ—Ç–æ–π –ø—Ä–µ–º–∏—É–º | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π | üé® –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω |

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

| –§—É–Ω–∫—Ü–∏—è | KamHub | –¢–µ–∫—É—â–∏–π –ø—Ä–æ–µ–∫—Ç | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---------|--------|----------------|-----------|
| **AI-—á–∞—Ç** | 3 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –∫–æ–Ω—Å–µ–Ω—Å—É—Å | –ù–µ—Ç | üî• –í—ã—Å–æ–∫–∏–π |
| **–ü–æ–≥–æ–¥–∞** | 2 API, –∞–≤—Ç–æ–∑–∞–º–µ–Ω—ã | –ë–∞–∑–æ–≤–∞—è | üî• –í—ã—Å–æ–∫–∏–π |
| **–¢—Ä–∞–Ω—Å—Ñ–µ—Ä—ã** | –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ | –ë–∞–∑–æ–≤–∞—è | üü° –°—Ä–µ–¥–Ω–∏–π |
| **–õ–æ—è–ª—å–Ω–æ—Å—Ç—å** | –£—Ä–æ–≤–Ω–∏, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è | –ù–µ—Ç | üü° –°—Ä–µ–¥–Ω–∏–π |
| **–≠–∫–æ-–ø–æ–∏–Ω—Ç—ã** | –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ | –ù–µ—Ç | üü¢ –ù–∏–∑–∫–∏–π |
| **–†–æ–ª–∏** | 6 —Ç–∏–ø–æ–≤, –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ | –ë–∞–∑–æ–≤–∞—è | üî• –í—ã—Å–æ–∫–∏–π |
| **CRM** | –ü–æ–ª–Ω–∞—è –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ | –ë–∞–∑–æ–≤–∞—è | üî• –í—ã—Å–æ–∫–∏–π |

---

## üöÄ –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (1-2 –Ω–µ–¥–µ–ª–∏)

#### 1.1 AI-—Å–∏—Å—Ç–µ–º–∞ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî•üî•üî•)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**

```typescript
// 1. –ú–Ω–æ–≥–æ–ø—Ä–æ–≤–∞–π–¥–µ—Ä–Ω—ã–π AI –∫–æ–Ω—Å–µ–Ω—Å—É—Å
// lib/ai/consensus.ts

interface AIProvider {
  name: 'groq' | 'deepseek' | 'openrouter';
  call: (message: string, context: any) => Promise<string>;
  priority: number;
}

async function getAIConsensus(
  message: string,
  context: any
): Promise<{
  response: string;
  confidence: number;
  providers: string[];
}> {
  // –í—ã–∑–æ–≤ –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
  const results = await Promise.allSettled([
    callGroqAI(message, context),
    callDeepSeekAI(message, context),
    callOpenRouterAI(message, context),
  ]);

  // –ê–Ω–∞–ª–∏–∑ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –≤—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ
  return analyzeCon sensusResponses(results);
}
```

**–§–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞:**
- `app/api/ai/route.ts` (Edge Runtime)
- `app/api/ai/groq/route.ts`
- `app/api/chat/route.ts`
- `components/AIChatWidget.tsx`
- `lib/config.ts` (AI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- ‚úÖ –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –æ–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π Edge Runtime

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å `lib/ai/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
2. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Edge Runtime
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å AIChatWidget
5. –î–æ–±–∞–≤–∏—Ç—å API keys –≤ .env
6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

#### 1.2 –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî•üî•)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**

```typescript
// contexts/RoleContext.tsx - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

export type AppRole = 
  | 'traveler'   // –¢—É—Ä–∏—Å—Ç
  | 'operator'   // –¢—É—Ä–æ–ø–µ—Ä–∞—Ç–æ—Ä
  | 'guide'      // –ì–∏–¥
  | 'transfer'   // –í–ª–∞–¥–µ–ª–µ—Ü —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞
  | 'agent'      // –ê–≥–µ–Ω—Ç
  | 'admin';     // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

interface RolePermissions {
  canCreateTours: boolean;
  canManageBookings: boolean;
  canViewAnalytics: boolean;
  canManageUsers: boolean;
  canAccessCRM: boolean;
  canManageTransfers: boolean;
}

const rolePermissions: Record<AppRole, RolePermissions> = {
  traveler: {
    canCreateTours: false,
    canManageBookings: true,  // –°–≤–æ–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    canViewAnalytics: false,
    canManageUsers: false,
    canAccessCRM: false,
    canManageTransfers: false,
  },
  operator: {
    canCreateTours: true,
    canManageBookings: true,
    canViewAnalytics: true,
    canManageUsers: false,
    canAccessCRM: true,
    canManageTransfers: false,
  },
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏
};
```

**–§–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞:**
- `contexts/RoleContext.tsx` (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- `components/Protected.tsx`
- `app/api/roles/route.ts`
- `lib/auth/permissions.ts`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∑–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤

**–®–∞–≥–∏:**
1. –†–∞—Å—à–∏—Ä–∏—Ç—å RoleContext
2. –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–∞–≤ (permissions)
3. –û–±–Ω–æ–≤–∏—Ç—å Protected –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ä–æ—É—Ç–∞–º
5. –û–±–Ω–æ–≤–∏—Ç—å UI –ø–æ–¥ —Ä–æ–ª–∏

---

#### 1.3 CRM –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî•üî•)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**

```typescript
// app/operator/page.tsx - –î–∞—à–±–æ—Ä–¥

interface OperatorStats {
  totalTours: number;
  activeTours: number;
  totalBookings: number;
  revenue: {
    today: number;
    week: number;
    month: number;
    year: number;
  };
  upcomingTours: Tour[];
  recentBookings: Booking[];
  weatherAlerts: WeatherAlert[];
}
```

**–§–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞:**
- `app/operator/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
- `app/api/operator/stats/route.ts`
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

**–°—Ç—Ä–∞–Ω–∏—Ü—ã CRM:**
1. `/operator` - –ì–ª–∞–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥
2. `/operator/tours` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–∞–º–∏
3. `/operator/bookings` - –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
4. `/operator/guides` - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–∏–¥–∞–º–∏
5. `/operator/analytics` - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
6. `/operator/weather` - –ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –†–µ–∞–ª-—Ç–∞–π–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –ü–æ–≥–æ–¥–Ω—ã–µ –∞–ª–µ—Ä—Ç—ã
- ‚úÖ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å `/app/operator` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
2. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–∞—à–±–æ—Ä–¥–∞
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å API endpoints
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
5. –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ (Chart.js –∏–ª–∏ Recharts)
6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

---

### –§–∞–∑–∞ 2: –í–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (2-3 –Ω–µ–¥–µ–ª–∏)

#### 2.1 –ü–æ–≥–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üî•üî•)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**

```typescript
// lib/weather/index.ts

interface WeatherSystem {
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã
  getWeather(location: GeoPoint): Promise<Weather>;
  
  // –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ N –¥–Ω–µ–π
  getForecast(location: GeoPoint, days: number): Promise<WeatherForecast[]>;
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è —Ç—É—Ä–∞
  checkTourSafety(tour: Tour): Promise<{
    isSafe: boolean;
    safetyLevel: SafetyLevel;
    recommendations: string[];
    alternatives?: Tour[];
  }>;
  
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–º–µ–Ω—ã –ø—Ä–∏ –ø–ª–æ—Ö–æ–π –ø–æ–≥–æ–¥–µ
  handleWeatherCancellation(tour: Tour): Promise<{
    cancelled: boolean;
    alternatives: Tour[];
    notifiedUsers: number;
  }>;
}
```

**–§–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞:**
- `app/api/weather/route.ts`
- `components/WeatherWidget.tsx`
- `lib/weather/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Open-Meteo
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Yandex Weather

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:**
```typescript
// Cron job –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–≥–æ–¥—ã
setInterval(async () => {
  const upcomingTours = await getUpcomingTours(7); // 7 –¥–Ω–µ–π –≤–ø–µ—Ä–µ–¥
  
  for (const tour of upcomingTours) {
    const safety = await checkTourSafety(tour);
    
    if (!safety.isSafe) {
      await handleWeatherCancellation(tour);
    }
  }
}, 30 * 60 * 1000); // –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç—É—Ä–∏—Å—Ç–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –æ—Ç–º–µ–Ω

**–®–∞–≥–∏:**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Open-Meteo API
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Yandex Weather API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –°–æ–∑–¥–∞—Ç—å WeatherSystem –∫–ª–∞—Å—Å
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Ç—É—Ä–∞–º–∏
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
6. –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
7. –°–æ–∑–¥–∞—Ç—å UI –≤–∏–¥–∂–µ—Ç

---

#### 2.2 –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü°)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**

```typescript
// lib/transfers/index.ts

interface TransferSystem {
  // –ü–æ–∏—Å–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤
  searchTransfers(params: {
    from: GeoPoint;
    to: GeoPoint;
    date: Date;
    passengers: number;
  }): Promise<Transfer[]>;
  
  // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–µ—Å—Ç
  holdSeats(transferId: string, seats: number): Promise<{
    holdId: string;
    expiresAt: Date;
  }>;
  
  // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
  confirmBooking(holdId: string): Promise<TransferBooking>;
  
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∏–ª–µ—Ç–∞ —Å QR-–∫–æ–¥–æ–º
  generateTicket(bookingId: string): Promise<{
    ticketId: string;
    qrCode: string;
    details: TransferBooking;
  }>;
  
  // –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–ª–µ—Ç–∞
  validateTicket(qrCode: string): Promise<{
    valid: boolean;
    booking?: TransferBooking;
  }>;
}
```

**–°—Ö–µ–º–∞ –ë–î:**
```sql
-- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑ lib/database/transfer_schema.sql
CREATE TABLE transfer_routes (
  id UUID PRIMARY KEY,
  name VARCHAR(255),
  from_location JSONB,
  to_location JSONB,
  distance DECIMAL,
  duration INTEGER,
  stops JSONB[],
  price DECIMAL
);

CREATE TABLE transfer_schedules (
  id UUID PRIMARY KEY,
  route_id UUID REFERENCES transfer_routes(id),
  departure_time TIMESTAMPTZ,
  available_seats INTEGER,
  vehicle_id UUID
);

CREATE TABLE transfer_bookings (
  id UUID PRIMARY KEY,
  schedule_id UUID,
  user_id UUID,
  seats_booked INTEGER,
  total_price DECIMAL,
  status VARCHAR(20),
  qr_code TEXT
);
```

**–§–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞:**
- `app/api/transfers/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
- `components/TransferMap.tsx`
- `components/TransferSearchWidget.tsx`
- `lib/transfers/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
- `lib/database/transfer_schema.sql`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ª–æ–≥–∏—Å—Ç–∏–∫–∞
- ‚úÖ QR-–∫–æ–¥—ã –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç—É—Ä–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–¥–±–æ—Ä

**–®–∞–≥–∏:**
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤
2. –°–æ–∑–¥–∞—Ç—å API endpoints
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å TransferSearchWidget
4. –î–æ–±–∞–≤–∏—Ç—å TransferMap (Yandex Maps)
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –º–µ—Å—Ç
6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–æ–≤
7. –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π

---

#### 2.3 –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü°)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**

```typescript
// lib/loyalty/index.ts

interface LoyaltySystem {
  // –£—Ä–æ–≤–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  getUserLevel(userId: string): Promise<LoyaltyLevel>;
  
  // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–∏–Ω—Ç–æ–≤
  awardPoints(userId: string, points: number, reason: string): Promise<void>;
  
  // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
  unlockAchievement(userId: string, achievementId: string): Promise<void>;
  
  // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
  applyPromoCode(userId: string, code: string): Promise<{
    valid: boolean;
    discount: number;
  }>;
  
  // –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≥—Ä–∞–¥
  getAvailableRewards(userId: string): Promise<Reward[]>;
}

// –£—Ä–æ–≤–Ω–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
enum LoyaltyLevel {
  BRONZE = 1,    // 0-1000 points
  SILVER = 2,    // 1001-5000 points
  GOLD = 3,      // 5001-15000 points
  PLATINUM = 4,  // 15001+ points
}
```

**–°—Ö–µ–º–∞ –ë–î:**
```sql
-- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑ lib/database/loyalty_schema.sql
CREATE TABLE loyalty_levels (
  id UUID PRIMARY KEY,
  name VARCHAR(50),
  min_points INTEGER,
  max_points INTEGER,
  benefits JSONB
);

CREATE TABLE user_loyalty (
  user_id UUID PRIMARY KEY,
  total_points INTEGER,
  current_level INTEGER,
  tier_progress DECIMAL
);

CREATE TABLE loyalty_transactions (
  id UUID PRIMARY KEY,
  user_id UUID,
  points INTEGER,
  type VARCHAR(20), -- earn, spend, expire
  reason TEXT,
  created_at TIMESTAMPTZ
);

CREATE TABLE promo_codes (
  id UUID PRIMARY KEY,
  code VARCHAR(50) UNIQUE,
  discount DECIMAL,
  min_purchase DECIMAL,
  valid_from TIMESTAMPTZ,
  valid_to TIMESTAMPTZ,
  usage_limit INTEGER,
  usage_count INTEGER
);
```

**–§–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞:**
- `app/api/loyalty/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
- `components/LoyaltyWidget.tsx`
- `lib/loyalty/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
- `lib/database/loyalty_schema.sql`

**–ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–∏–Ω—Ç–æ–≤:**
```typescript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö
eventEmitter.on('booking:confirmed', async (booking) => {
  const points = Math.floor(booking.totalPrice * 0.05); // 5%
  await awardPoints(booking.userId, points, 'Booking confirmed');
});

eventEmitter.on('review:created', async (review) => {
  let points = 20; // –ë–∞–∑–æ–≤—ã–µ –ø–æ–∏–Ω—Ç—ã
  if (review.images.length > 0) points += 10; // –ë–æ–Ω—É—Å –∑–∞ —Ñ–æ—Ç–æ
  await awardPoints(review.userId, points, 'Review created');
});
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü–æ–≤—ã—à–µ–Ω–∏–µ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –°—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫
- ‚úÖ –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

**–®–∞–≥–∏:**
1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
2. –°–æ–∑–¥–∞—Ç—å LoyaltySystem –∫–ª–∞—Å—Å
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏
4. –î–æ–±–∞–≤–∏—Ç—å LoyaltyWidget –≤ UI
5. –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

### –§–∞–∑–∞ 3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (3-4 –Ω–µ–¥–µ–ª–∏)

#### 3.1 –≠–∫–æ-–ø–æ–∏–Ω—Ç—ã (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üü¢)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**

```typescript
// lib/eco-points/index.ts

interface EcoPointsSystem {
  // –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–æ-–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  getUserEcoPoints(userId: string): Promise<UserEcoPoints>;
  
  // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∑–∞ —ç–∫–æ-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
  awardEcoPoints(userId: string, activity: EcoActivity): Promise<void>;
  
  // –°–ø–∏—Å–æ–∫ —ç–∫–æ-—Ç–æ—á–µ–∫
  getEcoPoints(filters?: EcoPointFilters): Promise<EcoPoint[]>;
  
  // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —ç–∫–æ-–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
  unlockEcoAchievement(userId: string, achievementId: string): Promise<void>;
}

interface EcoActivity {
  type: 'recycling' | 'cleaning' | 'conservation' | 'education';
  ecoPointId: string;
  description: string;
  points: number;
}
```

**–§–∞–π–ª—ã –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞:**
- `app/api/eco-points/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
- `components/EcoPointsWidget.tsx`
- –°—Ö–µ–º–∞ –ë–î –¥–ª—è eco_points

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≥–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π –∏–º–∏–¥–∂
- ‚úÖ –ü—Ä–∏–≤–ª–µ—á–µ–Ω–∏–µ —ç–∫–æ-—Ç—É—Ä–∏—Å—Ç–æ–≤

---

#### 3.2 –ü—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: üé®)

**–ß—Ç–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**

```typescript
// tailwind.config.ts - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

export default {
  theme: {
    extend: {
      colors: {
        premium: {
          black: '#000000',
          border: '#222222',
          gold: '#E6C149',
          ice: '#A2D2FF',
        },
        gold: '#E6C149',
      },
      boxShadow: {
        gold: '0 8px 24px rgba(230,193,73,0.25)',
      },
      backgroundImage: {
        'gold-gradient': 'linear-gradient(135deg, #E6C149, #A2D2FF)',
        'gold-aurora': `
          radial-gradient(1200px 600px at 20% 80%, 
            rgba(230,193,73,0.18), transparent 60%),
          radial-gradient(1000px 500px at 80% 20%, 
            rgba(162,210,255,0.12), transparent 60%)
        `,
      },
    },
  },
}
```

**–§–∞–π–ª—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**
- `tailwind.config.ts` (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π)
- `app/globals.css` (–ø—Ä–µ–º–∏—É–º —Å—Ç–∏–ª–∏)
- –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –Ω–æ–≤—ã–º–∏ —Å—Ç–∏–ª—è–º–∏

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω–∞:**
```typescript
// –ü—Ä–µ–º–∏—É–º –∫–Ω–æ–ø–∫–∞
<button className="
  bg-premium-black 
  border border-premium-gold 
  text-premium-gold 
  hover:bg-premium-gold 
  hover:text-premium-black
  shadow-gold
  transition-all
  px-6 py-3 
  rounded-xl
">
  –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç—É—Ä
</button>

// –ü—Ä–µ–º–∏—É–º –∫–∞—Ä—Ç–æ—á–∫–∞
<div className="
  bg-premium-black/90
  border border-premium-border
  rounded-2xl
  p-6
  hover:border-premium-gold
  transition-all
  shadow-gold
">
  {/* –ö–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ */}
</div>
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–µ–º–∏—É–º –≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ –±—Ä–µ–Ω–¥–∞
- ‚úÖ –í—ã–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–π UX

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. Edge Runtime –¥–ª—è AI (–ö—Ä–∏—Ç–∏—á–Ω–æ)

**–ó–∞—á–µ–º:**
- ‚ö° –ë—ã—Å—Ç—Ä–µ–µ –Ω–∞ 30-50%
- üåç –ë–ª–∏–∂–µ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- üí∞ –î–µ—à–µ–≤–ª–µ –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏

**–ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å:**

```typescript
// app/api/ai/route.ts

export const runtime = 'edge';
export const dynamic = 'force-dynamic';

export async function POST(request: Request) {
  const { message, context } = await request.json();
  
  // –ö–æ–Ω—Å–µ–Ω—Å—É—Å –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö AI
  const responses = await Promise.allSettled([
    callGroqAI(message, context),
    callDeepSeekAI(message, context),
    callOpenRouterAI(message, context),
  ]);
  
  const bestResponse = selectBestResponse(responses);
  
  return Response.json({
    success: true,
    data: bestResponse,
  });
}
```

---

### 2. Database Connection Pooling (–í–∞–∂–Ω–æ)

**–ó–∞—á–µ–º:**
- üìä –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚ö° –ë—ã—Å—Ç—Ä–µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
- üí∞ –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è KamHub:**

```typescript
// lib/database.ts

import { Pool } from 'pg';
import { config } from '@/lib/config';

const pool = new Pool({
  connectionString: config.database.url,
  ssl: config.database.ssl ? { rejectUnauthorized: false } : false,
  max: 20, // –ú–∞–∫—Å–∏–º—É–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
  idleTimeoutMillis: 30000,
  connectionTimeoutMillis: 2000,
});

export async function query<T>(text: string, params?: any[]) {
  const client = await pool.connect();
  try {
    return await client.query(text, params);
  } finally {
    client.release();
  }
}

export async function transaction<T>(
  callback: (client: PoolClient) => Promise<T>
): Promise<T> {
  const client = await pool.connect();
  try {
    await client.query('BEGIN');
    const result = await callback(client);
    await client.query('COMMIT');
    return result;
  } catch (error) {
    await client.query('ROLLBACK');
    throw error;
  } finally {
    client.release();
  }
}
```

---

### 3. –¢–∏–ø–∏–∑–∞—Ü–∏—è API –æ—Ç–≤–µ—Ç–æ–≤ (–í–∞–∂–Ω–æ)

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤:**

```typescript
// types/api.ts

export interface ApiResponse<T = any> {
  success: boolean;
  data?: T;
  error?: string;
  message?: string;
  metadata?: {
    timestamp: string;
    requestId: string;
  };
}

export interface PaginatedResponse<T> {
  data: T[];
  pagination: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
    hasNext: boolean;
    hasPrev: boolean;
  };
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
export async function GET(request: Request): Promise<Response> {
  try {
    const tours = await getTours();
    
    return Response.json({
      success: true,
      data: tours,
      metadata: {
        timestamp: new Date().toISOString(),
        requestId: crypto.randomUUID(),
      },
    } as ApiResponse<Tour[]>);
  } catch (error) {
    return Response.json({
      success: false,
      error: error.message,
    } as ApiResponse, { status: 500 });
  }
}
```

---

### 4. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–í–∞–∂–Ω–æ)

**–ò–∑ KamHub:**

```typescript
// lib/config.ts

export const config = {
  app: {
    name: 'Kamchatour Hub',
    version: '1.0.0',
    environment: process.env.NODE_ENV || 'development',
  },
  
  database: {
    url: process.env.DATABASE_URL!,
    maxConnections: 20,
  },
  
  ai: {
    groq: {
      apiKey: process.env.GROQ_API_KEY!,
      model: 'llama-3.1-70b-versatile',
      maxTokens: 4000,
    },
    // ... –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
  },
  
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
};

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
import { config } from '@/lib/config';

const apiKey = config.ai.groq.apiKey;
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –¢–∏–ø–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

## üìä –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ù–µ–¥–µ–ª—è 1-2: –§—É–Ω–¥–∞–º–µ–Ω—Ç

```
–î–µ–Ω—å 1-3: AI —Å–∏—Å—Ç–µ–º–∞
‚îú‚îÄ‚îÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (GROQ, DeepSeek, OpenRouter)
‚îú‚îÄ‚îÄ Edge Runtime –¥–ª—è API
‚îú‚îÄ‚îÄ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç AIChatWidget
‚îî‚îÄ‚îÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞

–î–µ–Ω—å 4-7: –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π
‚îú‚îÄ‚îÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ RoleContext
‚îú‚îÄ‚îÄ –°–∏—Å—Ç–µ–º–∞ permissions
‚îú‚îÄ‚îÄ Protected –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îú‚îÄ‚îÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ä–æ—É—Ç–∞–º
‚îî‚îÄ‚îÄ UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–î–µ–Ω—å 8-14: CRM –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ –î–∞—à–±–æ—Ä–¥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
‚îú‚îÄ‚îÄ API endpoints —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
‚îú‚îÄ‚îÄ –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îî‚îÄ‚îÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### –ù–µ–¥–µ–ª—è 3-4: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```
–î–µ–Ω—å 15-21: –ü–æ–≥–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îú‚îÄ‚îÄ Open-Meteo API
‚îú‚îÄ‚îÄ WeatherWidget –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îú‚îÄ‚îÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îú‚îÄ‚îÄ –°–∏—Å—Ç–µ–º–∞ –∑–∞–º–µ–Ω
‚îú‚îÄ‚îÄ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îî‚îÄ‚îÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–µ–Ω—å 22-28: –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤
‚îú‚îÄ‚îÄ –ë–î –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ API endpoints
‚îú‚îÄ‚îÄ TransferSearchWidget
‚îú‚îÄ‚îÄ TransferMap
‚îú‚îÄ‚îÄ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–µ—Å—Ç
‚îú‚îÄ‚îÄ QR-–∫–æ–¥—ã
‚îî‚îÄ‚îÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

### –ù–µ–¥–µ–ª—è 5-6: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```
–î–µ–Ω—å 29-35: –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ –ë–î –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ LoyaltySystem
‚îú‚îÄ‚îÄ LoyaltyWidget
‚îú‚îÄ‚îÄ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
‚îú‚îÄ‚îÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ–±—ã—Ç–∏—è–º–∏
‚îî‚îÄ‚îÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–µ–Ω—å 36-42: –≠–∫–æ-–ø–æ–∏–Ω—Ç—ã + –ü—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω
‚îú‚îÄ‚îÄ EcoPointsSystem
‚îú‚îÄ‚îÄ EcoPointsWidget
‚îú‚îÄ‚îÄ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Tailwind config
‚îú‚îÄ‚îÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–µ–º–∏—É–º —Å—Ç–∏–ª–µ–π
‚îî‚îÄ‚îÄ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

---

## üé® –î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω–∞

#### –®–∞–≥ 1: –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞

```typescript
// tailwind.config.ts - –¥–æ–±–∞–≤–∏—Ç—å —Ü–≤–µ—Ç–∞
colors: {
  premium: {
    black: '#000000',
    border: '#222222',
    gold: '#E6C149',
    ice: '#A2D2FF',
  },
}
```

#### –®–∞–≥ 2: –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã

```css
/* app/globals.css */

/* –°–µ–≤–µ—Ä–Ω–æ–µ —Å–∏—è–Ω–∏–µ —Ñ–æ–Ω */
.aurora-bg {
  background: 
    radial-gradient(1200px 600px at 20% 80%, 
      rgba(230,193,73,0.18), transparent 60%),
    radial-gradient(1000px 500px at 80% 20%, 
      rgba(162,210,255,0.12), transparent 60%);
}

/* –ó–æ–ª–æ—Ç–∞—è —Ç–µ–Ω—å */
.shadow-gold {
  box-shadow: 0 8px 24px rgba(230,193,73,0.25);
}

/* –ó–æ–ª–æ—Ç–æ–π –≥—Ä–∞–¥–∏–µ–Ω—Ç */
.gold-gradient {
  background: linear-gradient(135deg, #E6C149, #A2D2FF);
}
```

#### –®–∞–≥ 3: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```typescript
// –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

// –ö–Ω–æ–ø–∫–∏
<button className="
  bg-premium-black 
  border-2 border-premium-gold 
  text-premium-gold
  hover:bg-premium-gold 
  hover:text-premium-black
  px-6 py-3 
  rounded-xl
  font-semibold
  transition-all 
  duration-300
  shadow-gold
">
  –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏
</button>

// –ö–∞—Ä—Ç–æ—á–∫–∏
<div className="
  bg-premium-black/90 
  backdrop-blur-sm
  border border-premium-border
  hover:border-premium-gold
  rounded-2xl 
  p-6
  transition-all 
  duration-300
  shadow-gold
">
  –ö–æ–Ω—Ç–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏
</div>

// –ó–∞–≥–æ–ª–æ–≤–∫–∏
<h1 className="
  text-4xl 
  font-bold 
  bg-gold-gradient 
  bg-clip-text 
  text-transparent
">
  –ó–∞–≥–æ–ª–æ–≤–æ–∫
</h1>
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### 1. Unit —Ç–µ—Å—Ç—ã

```typescript
// test/ai/consensus.test.ts

describe('AI Consensus System', () => {
  it('should get consensus from multiple providers', async () => {
    const result = await getAIConsensus('–ö–∞–∫–∏–µ —Ç—É—Ä—ã –Ω–∞ –ö–∞–º—á–∞—Ç–∫–µ?', {});
    
    expect(result.response).toBeDefined();
    expect(result.confidence).toBeGreaterThan(0.7);
    expect(result.providers.length).toBeGreaterThan(1);
  });
  
  it('should fallback if one provider fails', async () => {
    // Mock –æ–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä –ø–∞–¥–∞–µ—Ç
    jest.spyOn(groqAI, 'call').mockRejectedValue(new Error('API Error'));
    
    const result = await getAIConsensus('Test', {});
    
    expect(result.response).toBeDefined();
    expect(result.providers).not.toContain('groq');
  });
});
```

#### 2. Integration —Ç–µ—Å—Ç—ã

```typescript
// test/integration/booking-flow.test.ts

describe('Booking Flow with Weather Check', () => {
  it('should complete full booking with weather validation', async () => {
    // 1. –ù–∞–π—Ç–∏ —Ç—É—Ä
    const tour = await findTour({ activity: 'hiking' });
    
    // 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≥–æ–¥—É
    const weather = await checkWeather(tour.location);
    expect(weather.isSafe).toBe(true);
    
    // 3. –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å
    const booking = await createBooking({
      tourId: tour.id,
      userId: 'test-user',
      date: new Date(),
    });
    expect(booking.status).toBe('pending');
    
    // 4. –ù–∞—á–∏—Å–ª–∏—Ç—å –ø–æ–∏–Ω—Ç—ã
    const loyalty = await getUserLoyalty('test-user');
    expect(loyalty.totalPoints).toBeGreaterThan(0);
  });
});
```

#### 3. E2E —Ç–µ—Å—Ç—ã

```typescript
// test/e2e/operator-dashboard.test.ts

describe('Operator Dashboard', () => {
  it('should display stats and manage tours', async () => {
    // –õ–æ–≥–∏–Ω –∫–∞–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä
    await loginAs({ role: 'operator' });
    
    // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –¥–∞—à–±–æ—Ä–¥
    await page.goto('/operator');
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    expect(await page.textContent('[data-test="total-tours"]')).toBeDefined();
    expect(await page.textContent('[data-test="revenue"]')).toBeDefined();
    
    // –°–æ–∑–¥–∞–Ω–∏–µ —Ç—É—Ä–∞
    await page.click('[data-test="create-tour"]');
    await fillTourForm();
    await page.click('[data-test="submit"]');
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
    expect(await page.textContent('[data-test="success-message"]'))
      .toContain('–¢—É—Ä —Å–æ–∑–¥–∞–Ω');
  });
});
```

---

## üìù –ß–µ–∫-–ª–∏—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: AI –∏ —Ä–æ–ª–∏ ‚úÖ

- [ ] –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã API keys –¥–ª—è AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- [ ] –°–æ–∑–¥–∞–Ω `/lib/ai` —Å –∫–æ–Ω—Å–µ–Ω—Å—É—Å —Å–∏—Å—Ç–µ–º–æ–π
- [ ] –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω `AIChatWidget.tsx`
- [ ] Edge Runtime –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è AI endpoints
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω AI –∫–æ–Ω—Å–µ–Ω—Å—É—Å
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω `RoleContext` –¥–æ 6 —Ä–æ–ª–µ–π
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ permissions
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `Protected` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω—ã —Ä–æ–ª–∏ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ä–æ—É—Ç–∞–º
- [ ] CRM –¥–∞—à–±–æ—Ä–¥ —Å–æ–∑–¥–∞–Ω
- [ ] API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ì—Ä–∞—Ñ–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã unit —Ç–µ—Å—Ç—ã

### –§–∞–∑–∞ 2: –ü–æ–≥–æ–¥–∞ –∏ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä—ã ‚úÖ

- [ ] Open-Meteo API –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] `WeatherWidget` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–≥–æ–¥—ã –∑–∞–ø—É—â–µ–Ω—ã
- [ ] –°–∏—Å—Ç–µ–º–∞ –∑–∞–º–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –ë–î –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] Transfer API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] `TransferSearchWidget` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] `TransferMap` —Å Yandex Maps —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- [ ] QR-–∫–æ–¥—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- [ ] –ù–∞–ø–∏—Å–∞–Ω—ã integration —Ç–µ—Å—Ç—ã

### –§–∞–∑–∞ 3: –õ–æ—è–ª—å–Ω–æ—Å—Ç—å –∏ –¥–∏–∑–∞–π–Ω ‚úÖ

- [ ] –ë–î –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] `LoyaltySystem` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `LoyaltyWidget` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –ü—Ä–æ–º–æ–∫–æ–¥—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç
- [ ] –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø–æ–∏–Ω—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ
- [ ] `EcoPointsSystem` –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] `EcoPointsWidget` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Tailwind config –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø—Ä–µ–º–∏—É–º —Ü–≤–µ—Ç–∞–º–∏
- [ ] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å –Ω–æ–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º
- [ ] –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [ ] E2E —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- [ ] Performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üöÄ –î–µ–ø–ª–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

### –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Timeweb Cloud

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run migrate:up

# –°–±–æ—Ä–∫–∞ production
npm run build

# –¢–µ—Å—Ç—ã –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
npm run test
npm run lint
npm run type-check
```

#### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
# AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
GROQ_API_KEY=your_groq_key
DEEPSEEK_API_KEY=your_deepseek_key
OPENROUTER_API_KEY=your_openrouter_key

# Weather APIs
OPEN_METEO_API_URL=https://api.open-meteo.com/v1
YANDEX_WEATHER_API_KEY=your_yandex_weather_key

# Loyalty —Å–∏—Å—Ç–µ–º–∞
LOYALTY_POINTS_PER_RUB=0.05
PROMO_CODE_SECRET=your_promo_secret
```

#### 3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π rollout

```
Week 1: Beta testing (10% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
‚îú‚îÄ‚îÄ AI —á–∞—Ç
‚îú‚îÄ‚îÄ –ù–æ–≤—ã–µ —Ä–æ–ª–∏
‚îî‚îÄ‚îÄ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫

Week 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ (50% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
‚îú‚îÄ‚îÄ CRM –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ –ü–æ–≥–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
‚îî‚îÄ‚îÄ –ê–Ω–∞–ª–∏–∑ feedback

Week 3: Full rollout (100% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
‚îú‚îÄ‚îÄ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ –§–∏–Ω–∞–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### KPI –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

#### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏

- **AI Response Time:** < 2 —Å–µ–∫—É–Ω–¥—ã
- **API Latency:** < 200ms (p95)
- **Error Rate:** < 1%
- **Uptime:** > 99.9%

#### –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏

- **AI Chat Engagement:** > 30% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç —á–∞—Ç
- **Weather-based Cancellations:** < 5% –æ—Ç –≤—Å–µ—Ö —Ç—É—Ä–æ–≤
- **Transfer Adoption:** > 50% –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π –≤–∫–ª—é—á–∞—é—Ç —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä
- **Loyalty Participation:** > 40% –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Operator CRM Usage:** > 80% –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω–æ

---

## üí∞ –û—Ü–µ–Ω–∫–∞ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

### –í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

| –§–∞–∑–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –í—Ä–µ–º—è |
|------|-----------|-------|
| 1 | AI —Å–∏—Å—Ç–µ–º–∞ | 5 –¥–Ω–µ–π |
| 1 | –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π | 4 –¥–Ω—è |
| 1 | CRM –¥–∞—à–±–æ—Ä–¥ | 5 –¥–Ω–µ–π |
| 2 | –ü–æ–≥–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ | 7 –¥–Ω–µ–π |
| 2 | –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤ | 7 –¥–Ω–µ–π |
| 3 | –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ | 7 –¥–Ω–µ–π |
| 3 | –≠–∫–æ-–ø–æ–∏–Ω—Ç—ã | 3 –¥–Ω—è |
| 3 | –ü—Ä–µ–º–∏—É–º –¥–∏–∑–∞–π–Ω | 4 –¥–Ω—è |
| - | **–ò–¢–û–ì–û** | **42 –¥–Ω—è (6 –Ω–µ–¥–µ–ª—å)** |

### –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã (–º–µ—Å—è—Ü)

```
AI API costs:
‚îú‚îÄ‚îÄ GROQ: $20-50/–º–µ—Å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–æ –ª–∏–º–∏—Ç–∞)
‚îú‚îÄ‚îÄ DeepSeek: $30-70/–º–µ—Å
‚îî‚îÄ‚îÄ OpenRouter: $20-60/–º–µ—Å
Total: ~$70-180/–º–µ—Å

Weather APIs:
‚îú‚îÄ‚îÄ Open-Meteo: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
‚îî‚îÄ‚îÄ Yandex Weather: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (–¥–æ –ª–∏–º–∏—Ç–∞)
Total: $0/–º–µ—Å

Infrastructure (–¥–æ–±–∞–≤–æ—á–Ω—ã–µ):
‚îî‚îÄ‚îÄ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ë–î storage: +$10-20/–º–µ—Å

GRAND TOTAL: ~$80-200/–º–µ—Å
```

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã

1. **KamHub - —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–∞—è –±–∞–∑–∞** —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
2. **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   - AI –∫–æ–Ω—Å–µ–Ω—Å—É—Å —Å–∏—Å—Ç–µ–º–∞
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ä–æ–ª–∏ –∏ permissions
   - CRM –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
   - –ü–æ–≥–æ–¥–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–π–º–µ—Ç ~6 –Ω–µ–¥–µ–ª—å** –ø–æ–ª–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
4. **–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã —É–º–µ—Ä–µ–Ω–Ω—ã–µ:** ~$100/–º–µ—Å
5. **ROI –æ–∂–∏–¥–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–∏–π** –∑–∞ —Å—á–µ—Ç:
   - –£–ª—É—á—à–µ–Ω–Ω–æ–≥–æ UX (AI —á–∞—Ç)
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ø–æ–≥–æ–¥–∞)
   - –õ–æ—è–ª—å–Ω–æ—Å—Ç–∏ (–ø—Ä–æ–≥—Ä–∞–º–º–∞)
   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ (CRM)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

‚úÖ **–ù–ê–ß–ê–¢–¨ –°:** AI —Å–∏—Å—Ç–µ–º–∞ + –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π + CRM (–§–∞–∑–∞ 1)  
‚úÖ **–ó–ê–¢–ï–ú:** –ü–æ–≥–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ + –¢—Ä–∞–Ω—Å—Ñ–µ—Ä—ã (–§–∞–∑–∞ 2)  
‚úÖ **–ù–ê–ö–û–ù–ï–¶:** –õ–æ—è–ª—å–Ω–æ—Å—Ç—å + –î–∏–∑–∞–π–Ω (–§–∞–∑–∞ 3)

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–∑—É—á–∏—Ç—å** –¥–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∏ KAMHUB_REPOSITORY_ANALYSIS.md
2. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥ –±–∏–∑–Ω–µ—Å-—Ü–µ–ª–∏
3. **–ù–∞—á–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é** —Å –§–∞–∑—ã 1
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** –∫–∞–∂–¥—É—é —Ñ–∞–∑—É –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–π
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å** –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–ª–∏–∑–∞

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-29  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

üöÄ **–£—Å–ø–µ—Ö–æ–≤ –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –∏–∑ KamHub!**
