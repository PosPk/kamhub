# üå§Ô∏è –ü–û–ì–û–î–ê –í –ü–†–û–ï–ö–¢–ï (Weather System)

**–î–∞—Ç–∞:** 4 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [API Endpoint](#api-endpoint)
3. [Weather Widget](#weather-widget)
4. [–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö](#–∏—Å—Ç–æ—á–Ω–∏–∫–∏-–¥–∞–Ω–Ω—ã—Ö)
5. [–§—É–Ω–∫—Ü–∏–∏ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#—Ñ—É–Ω–∫—Ü–∏–∏-–∏-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
6. [–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è](#–≥–¥–µ-–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

---

## üåê –û–ë–ó–û–† –°–ò–°–¢–ï–ú–´

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

```
–ü–æ–≥–æ–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Kamchatour Hub
‚îú‚îÄ‚îÄ API Endpoint: /api/weather
‚îÇ   ‚îú‚îÄ‚îÄ Open-Meteo API (–æ—Å–Ω–æ–≤–Ω–æ–π, –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
‚îÇ   ‚îî‚îÄ‚îÄ Yandex Weather API (fallback)
‚îÇ
‚îú‚îÄ‚îÄ WeatherWidget –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ –¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ –î–µ—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –∑–∞–≤—Ç—Ä–∞
‚îÇ
‚îî‚îÄ‚îÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
    ‚îú‚îÄ‚îÄ –•–∞–± —Ç—É—Ä–∏—Å—Ç–∞
    ‚îî‚îÄ‚îÄ –•–∞–± –≥–∏–¥–∞
```

---

## üîå API ENDPOINT

### `/api/weather/route.ts`

**–§–∞–π–ª:** `app/api/weather/route.ts` (310 —Å—Ç—Ä–æ–∫)

**–ú–µ—Ç–æ–¥:** `GET`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
```typescript
{
  lat: number,      // –®–∏—Ä–æ—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  lng: number,      // –î–æ–ª–≥–æ—Ç–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  location?: string // –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
}
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
GET /api/weather?lat=53.0195&lng=158.6505&location=–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π
```

**–û—Ç–≤–µ—Ç (success):**
```json
{
  "success": true,
  "data": {
    "location": "–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π",
    "temperature": 8,
    "condition": "partly_cloudy",
    "humidity": 75,
    "windSpeed": 12,
    "windDirection": 180,
    "pressure": 760,
    "visibility": 10,
    "uvIndex": 2,
    "forecast": [...],
    "lastUpdated": "2025-11-04T09:30:00.000Z",
    "safetyLevel": "good",
    "recommendations": [
      "–•–æ—Ä–æ—à–∞—è –ø–æ–≥–æ–¥–∞ - –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Ç—É—Ä–æ–≤"
    ]
  }
}
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

#### 1. `getWeatherData(lat, lng, location)`
–ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ –∏–∑ Open-Meteo API

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ–º:**
- –¢–µ–∫—É—â–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
- –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–≥–æ–¥—ã (—è—Å–Ω–æ, –æ–±–ª–∞—á–Ω–æ, –¥–æ–∂–¥—å, —Å–Ω–µ–≥, –∏ —Ç.–¥.)
- –í–ª–∞–∂–Ω–æ—Å—Ç—å
- –°–∫–æ—Ä–æ—Å—Ç—å –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ç—Ä–∞
- –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ
- –í–∏–¥–∏–º–æ—Å—Ç—å
- –£–§-–∏–Ω–¥–µ–∫—Å
- –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 7 –¥–Ω–µ–π

#### 2. `getYandexWeather(lat, lng, location)`
Fallback –Ω–∞ Yandex Weather API (–µ—Å–ª–∏ Open-Meteo –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)

**–¢—Ä–µ–±—É–µ—Ç:**
- Yandex Weather API Key (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### 3. `getDefaultWeather(lat, lng, location)`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–µ—Å–ª–∏ –≤—Å–µ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã)

**–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: 15¬∞C
- –°–æ—Å—Ç–æ—è–Ω–∏–µ: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å
- –í–ª–∞–∂–Ω–æ—Å—Ç—å: 60%
- –í–µ—Ç–µ—Ä: 10 –∫–º/—á

---

## üé® WEATHER WIDGET

### `WeatherWidget.tsx`

**–§–∞–π–ª:** `components/WeatherWidget.tsx` (243 —Å—Ç—Ä–æ–∫–∏)

**–ü—Ä–æ–ø—Å—ã:**
```typescript
interface WeatherWidgetProps {
  lat: number;       // –®–∏—Ä–æ—Ç–∞
  lng: number;       // –î–æ–ª–≥–æ—Ç–∞
  location?: string; // –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞
  className?: string; // CSS –∫–ª–∞—Å—Å—ã
}
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```tsx
<WeatherWidget 
  lat={53.0195} 
  lng={158.6505} 
  location="–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π"
/>
```

### –í–Ω–µ—à–Ω–∏–π –≤–∏–¥:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–æ–≥–æ–¥–∞      –ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ          üå§Ô∏è                        ‚îÇ
‚îÇ          8¬∞C                       ‚îÇ
‚îÇ   –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å      75%              ‚îÇ
‚îÇ üí® –í–µ—Ç–µ—Ä          12 –∫–º/—á –Æ       ‚îÇ
‚îÇ ‚è≤Ô∏è  –î–∞–≤–ª–µ–Ω–∏–µ      760 –º–º —Ä—Ç.—Å—Ç.    ‚îÇ
‚îÇ üëÅÔ∏è  –í–∏–¥–∏–º–æ—Å—Ç—å     10 –∫–º            ‚îÇ
‚îÇ ‚òÄÔ∏è  –£–§-–∏–Ω–¥–µ–∫—Å     2 (–ù–∏–∑–∫–∏–π)      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ó–∞–≤—Ç—Ä–∞                             ‚îÇ
‚îÇ üå•Ô∏è  5¬∞ - 10¬∞  –ü–∞—Å–º—É—Ä–Ω–æ           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –û–±–Ω–æ–≤–ª–µ–Ω–æ: 09:30                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –°–æ—Å—Ç–æ—è–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞:

#### 1. **Loading** (–∑–∞–≥—Ä—É–∑–∫–∞)
```tsx
<div className="animate-pulse">
  <div className="h-4 bg-gray-200 rounded w-3/4 mb-2"></div>
  <div className="h-8 bg-gray-200 rounded w-1/2 mb-4"></div>
  ...
</div>
```

#### 2. **Error** (–æ—à–∏–±–∫–∞)
```tsx
<div className="text-center text-gray-500">
  <CloudSun className="w-8 h-8" />
  <div>–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–≥–æ–¥—ã</div>
  <button onClick={fetchWeather}>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
</div>
```

#### 3. **Success** (–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã)
–ü–æ–ª–Ω—ã–π –≤–∏–¥–∂–µ—Ç —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

---

## üåç –ò–°–¢–û–ß–ù–ò–ö–ò –î–ê–ù–ù–´–•

### 1. **Open-Meteo API** (–æ—Å–Ω–æ–≤–Ω–æ–π)

**URL:** `https://api.open-meteo.com/v1/forecast`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π
- ‚úÖ –ë–µ–∑ API –∫–ª—é—á–∞
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 7 –¥–Ω–µ–π

**–î–∞–Ω–Ω—ã–µ:**
```javascript
{
  current_weather: {
    temperature: 8,
    weathercode: 2,  // –ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–≥–æ–¥—ã
    windspeed: 3.5,  // –º/—Å
    winddirection: 180
  },
  hourly: {
    temperature_2m: [...],
    relativehumidity_2m: [...],
    precipitation: [...],
    windspeed_10m: [...],
    pressure_msl: [...],
    visibility: [...],
    uv_index: [...]
  },
  daily: {
    temperature_2m_max: [...],
    temperature_2m_min: [...],
    precipitation_sum: [...],
    windspeed_10m_max: [...]
  }
}
```

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** 30 –º–∏–Ω—É—Ç (1800 —Å–µ–∫—É–Ω–¥)

---

### 2. **Yandex Weather API** (fallback)

**URL:** `https://api.weather.yandex.ru/v2/forecast`

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- API Key: `config.weather.yandex.apiKey`
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: `X-Yandex-API-Key`

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –¢–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –†–æ—Å—Å–∏–∏
- ‚úÖ –†—É—Å—Å–∫–∏–π —è–∑—ã–∫
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –¢—Ä–µ–±—É–µ—Ç API –∫–ª—é—á
- ‚ùå –ü–ª–∞—Ç–Ω—ã–π –ø–æ—Å–ª–µ –ª–∏–º–∏—Ç–∞
- ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ fallback

---

### 3. **Default Weather** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

–ï—Å–ª–∏ –æ–±–∞ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

```javascript
{
  temperature: 15,
  condition: 'partly_cloudy',
  humidity: 60,
  windSpeed: 10,
  pressure: 760,
  visibility: 10,
  uvIndex: 3,
  safetyLevel: 'good',
  recommendations: ['–ü–æ–¥—Ö–æ–¥—è—â–∏–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Ç—É—Ä–∏–∑–º–∞']
}
```

---

## ‚ö° –§–£–ù–ö–¶–ò–ò –ò –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

### 1. **–°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–≥–æ–¥—ã** (12 —Ç–∏–ø–æ–≤)

```typescript
const weatherConditions = {
  'clear': '–Ø—Å–Ω–æ',                    // ‚òÄÔ∏è
  'mostly_clear': '–í –æ—Å–Ω–æ–≤–Ω–æ–º —è—Å–Ω–æ',  // üå§Ô∏è
  'partly_cloudy': '–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å', // ‚õÖ
  'overcast': '–ü–∞—Å–º—É—Ä–Ω–æ',             // ‚òÅÔ∏è
  'fog': '–¢—É–º–∞–Ω',                      // üå´Ô∏è
  'drizzle': '–ú–æ—Ä–æ—Å—è—â–∏–π –¥–æ–∂–¥—å',       // üå¶Ô∏è
  'rain': '–î–æ–∂–¥—å',                     // üåßÔ∏è
  'snow': '–°–Ω–µ–≥',                      // üå®Ô∏è
  'thunderstorm': '–ì—Ä–æ–∑–∞',            // ‚õàÔ∏è
}
```

**–ò–∫–æ–Ω–∫–∏ (Lucide React):**
```tsx
import { 
  Sun,              // ‚òÄÔ∏è –Ø—Å–Ω–æ
  CloudSun,         // üå§Ô∏è –í –æ—Å–Ω–æ–≤–Ω–æ–º —è—Å–Ω–æ
  Cloud,            // ‚òÅÔ∏è –û–±–ª–∞—á–Ω–æ
  CloudRain,        // üåßÔ∏è –î–æ–∂–¥—å
  CloudSnow,        // üå®Ô∏è –°–Ω–µ–≥
  CloudDrizzle,     // üå¶Ô∏è –ú–æ—Ä–æ—Å—è—â–∏–π –¥–æ–∂–¥—å
  CloudFog,         // üå´Ô∏è –¢—É–º–∞–Ω
  CloudLightning,   // ‚õàÔ∏è –ì—Ä–æ–∑–∞
} from 'lucide-react';
```

---

### 2. **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ç—Ä–∞**

```typescript
const directions = ['–°', '–°–í', '–í', '–Æ–í', '–Æ', '–Æ–ó', '–ó', '–°–ó'];

function getWindDirection(degrees: number) {
  const index = Math.round(degrees / 45) % 8;
  return directions[index];
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- 0¬∞ ‚Üí –°–µ–≤–µ—Ä (–°)
- 90¬∞ ‚Üí –í–æ—Å—Ç–æ–∫ (–í)
- 180¬∞ ‚Üí –Æ–≥ (–Æ)
- 270¬∞ ‚Üí –ó–∞–ø–∞–¥ (–ó)

---

### 3. **–£–§-–∏–Ω–¥–µ–∫—Å**

```typescript
function getUVIndexText(index: number) {
  if (index <= 2) return '–ù–∏–∑–∫–∏–π';          // üü¢
  if (index <= 5) return '–£–º–µ—Ä–µ–Ω–Ω—ã–π';       // üü°
  if (index <= 7) return '–í—ã—Å–æ–∫–∏–π';         // üü†
  if (index <= 10) return '–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π';  // üî¥
  return '–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π';                   // üü£
}
```

**–¶–≤–µ—Ç–∞:**
- 0-2: –ó–µ–ª—ë–Ω—ã–π (–ù–∏–∑–∫–∏–π)
- 3-5: –ñ—ë–ª—Ç—ã–π (–£–º–µ—Ä–µ–Ω–Ω—ã–π)
- 6-7: –û—Ä–∞–Ω–∂–µ–≤—ã–π (–í—ã—Å–æ–∫–∏–π)
- 8-10: –ö—Ä–∞—Å–Ω—ã–π (–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π)
- 11+: –§–∏–æ–ª–µ—Ç–æ–≤—ã–π (–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π)

---

### 4. **–£—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**

```typescript
type SafetyLevel = 'excellent' | 'good' | 'difficult' | 'dangerous';

function getSafetyLevel(condition, windSpeed, visibility) {
  // –û–ø–∞—Å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
  if (thunderstorm || windSpeed > 20 || visibility < 1) {
    return 'dangerous';
  }
  
  // –°–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
  if (rain || snow || windSpeed > 15 || visibility < 3) {
    return 'difficult';
  }
  
  // –•–æ—Ä–æ—à–∏–µ —É—Å–ª–æ–≤–∏—è
  if (partly_cloudy || overcast || windSpeed > 10 || visibility < 5) {
    return 'good';
  }
  
  // –û—Ç–ª–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
  return 'excellent';
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- `excellent` üü¢ - –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Ç—É—Ä–æ–≤
- `good` üü° - –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Ç—É—Ä–æ–≤
- `difficult` üü† - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –≥–æ—Ä–Ω—ã—Ö —Ç—É—Ä–æ–≤
- `dangerous` üî¥ - –¢—É—Ä—ã –æ—Ç–º–µ–Ω–µ–Ω—ã

---

### 5. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

```typescript
function getWeatherRecommendations(condition, windSpeed, visibility): string[] {
  const recommendations = [];
  
  // –ü–æ –≤–∏–¥–∏–º–æ—Å—Ç–∏
  if (visibility < 1) {
    recommendations.push('–û—á–µ–Ω—å –ø–ª–æ—Ö–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å - —Ç—É—Ä—ã –æ—Ç–º–µ–Ω–µ–Ω—ã');
  }
  
  // –ü–æ –≤–µ—Ç—Ä—É
  if (windSpeed > 20) {
    recommendations.push('–û—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π –≤–µ—Ç–µ—Ä - —Ç—É—Ä—ã –æ—Ç–º–µ–Ω–µ–Ω—ã');
  } else if (windSpeed > 15) {
    recommendations.push('–°–∏–ª—å–Ω—ã–π –≤–µ—Ç–µ—Ä - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –≥–æ—Ä–Ω—ã—Ö —Ç—É—Ä–æ–≤');
  }
  
  // –ü–æ –æ—Å–∞–¥–∫–∞–º
  if (condition === 'thunderstorm') {
    recommendations.push('–ì—Ä–æ–∑–∞ - –≤—Å–µ —Ç—É—Ä—ã –æ—Ç–º–µ–Ω–µ–Ω—ã');
  } else if (condition === 'rain' || condition === 'snow') {
    recommendations.push('–û—Å–∞–¥–∫–∏ - –≤–æ–∑—å–º–∏—Ç–µ –¥–æ–∂–¥–µ–≤–∏–∫');
  }
  
  // –ü–æ –æ–±–ª–∞—á–Ω–æ—Å—Ç–∏
  if (condition === 'clear') {
    recommendations.push('–û—Ç–ª–∏—á–Ω–∞—è –ø–æ–≥–æ–¥–∞ - –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Ç—É—Ä–æ–≤');
  }
  
  return recommendations;
}
```

**–ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**
- ‚úÖ "–û—Ç–ª–∏—á–Ω–∞—è –ø–æ–≥–æ–¥–∞ - –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Ç—É—Ä–æ–≤"
- ‚ö†Ô∏è "–°–∏–ª—å–Ω—ã–π –≤–µ—Ç–µ—Ä - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –≥–æ—Ä–Ω—ã—Ö —Ç—É—Ä–æ–≤"
- ‚ùå "–ì—Ä–æ–∑–∞ - –≤—Å–µ —Ç—É—Ä—ã –æ—Ç–º–µ–Ω–µ–Ω—ã"
- üíß "–û—Å–∞–¥–∫–∏ - –≤–æ–∑—å–º–∏—Ç–µ –¥–æ–∂–¥–µ–≤–∏–∫"

---

### 6. **–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 7 –¥–Ω–µ–π**

```typescript
interface WeatherForecast {
  date: Date;
  temperature: {
    min: number;
    max: number;
  };
  condition: string;
  precipitation: number;
  windSpeed: number;
  humidity: number;
}
```

**–ü—Ä–∏–º–µ—Ä:**
```json
{
  "date": "2025-11-05",
  "temperature": { "min": 5, "max": 10 },
  "condition": "rain",
  "precipitation": 5.2,
  "windSpeed": 15,
  "humidity": 80
}
```

---

## üìç –ì–î–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø

### 1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`/`)

```tsx
// app/page.tsx
<WeatherWidget 
  lat={userLocation.lat} 
  lng={userLocation.lng} 
  location="–ö–∞–º—á–∞—Ç–∫–∞"
/>
```

**–ì–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:**
- –í –±–æ–∫–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏
- –†—è–¥–æ–º —Å —Ç—É—Ä–∞–º–∏
- –ù–∞–¥ –∫–∞—Ä—Ç–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

### 2. **–•–∞–± —Ç—É—Ä–∏—Å—Ç–∞** (`/hub/tourist`)

```tsx
// app/hub/tourist/page.tsx
<WeatherWidget 
  lat={53.0195} 
  lng={158.6505} 
  location="–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π"
/>
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–º–æ–≥–∞–µ—Ç —Ç—É—Ä–∏—Å—Ç—É –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–µ–∑–¥–∫–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ —É—Å–ª–æ–≤–∏—è
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–¥–µ–∂–¥–µ

---

### 3. **–•–∞–± –≥–∏–¥–∞** (`/hub/guide`)

```tsx
// app/hub/guide/page.tsx
<WeatherWidget 
  lat={53.0195} 
  lng={158.6505} 
/>
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ì–∏–¥ –≤–∏–¥–∏—Ç –ø–æ–≥–æ–¥—É –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —ç–∫—Å–∫—É—Ä—Å–∏–π
- –£—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
- –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏

---

### 4. **–•–∞–± —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤** (`/hub/transfer`)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û—Ü–µ–Ω–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–æ—Ä–æ–≥
- –í–∏–¥–∏–º–æ—Å—Ç—å –¥–ª—è –≤–æ–¥–∏—Ç–µ–ª–µ–π
- –í–µ—Ç–µ—Ä –¥–ª—è –≥–æ—Ä–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

---

## üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### `lib/config.ts`

```typescript
export const config = {
  weather: {
    openMeteo: {
      baseUrl: 'https://api.open-meteo.com/v1',
    },
    yandex: {
      baseUrl: 'https://api.weather.yandex.ru/v2',
      apiKey: process.env.YANDEX_WEATHER_API_KEY || '',
    },
  },
};
```

### Environment Variables

```bash
# .env.local
YANDEX_WEATHER_API_KEY=your_api_key_here  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
```

---

## üìä –¢–ò–ü–´ (TypeScript)

### `types/index.ts`

```typescript
export interface Weather {
  location: string;
  temperature: number;
  condition: string;
  humidity: number;
  windSpeed: number;
  windDirection: number;
  pressure: number;
  visibility: number;
  uvIndex: number;
  forecast: WeatherForecast[];
  lastUpdated: Date;
  safetyLevel: 'excellent' | 'good' | 'difficult' | 'dangerous';
  recommendations: string[];
}

export interface WeatherForecast {
  date: Date;
  temperature: {
    min: number;
    max: number;
  };
  condition: string;
  precipitation: number;
  windSpeed: number;
  humidity: number;
}
```

---

## üéØ –û–°–û–ë–ï–ù–ù–û–°–¢–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### 1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
```typescript
fetch(url, {
  next: { revalidate: 1800 } // 30 –º–∏–Ω—É—Ç
});
```

### 2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- Fallback –Ω–∞ Yandex Weather
- –ó–∞—Ç–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π

### 3. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å**
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- –ö—Ä–∞—Å–∏–≤—ã–µ –∏–∫–æ–Ω–∫–∏
- –¢—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞

### 4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- Lazy loading
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä

---

## ‚úÖ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê

1. **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á–µ–π (Open-Meteo)
2. **–ù–∞–¥—ë–∂–Ω–æ** - 2 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö + fallback
3. **–¢–æ—á–Ω–æ** - –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
4. **–ö—Ä–∞—Å–∏–≤–æ** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –∏–∫–æ–Ω–∫–∞–º–∏
5. **–ü–æ–ª–µ–∑–Ω–æ** - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤
6. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ** - —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è —Ç—É—Ä–æ–≤

---

## üì± –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ë–∞–∑–æ–≤—ã–π –≤–∏–¥–∂–µ—Ç
```tsx
<WeatherWidget 
  lat={53.0195} 
  lng={158.6505} 
/>
```

### –° –Ω–∞–∑–≤–∞–Ω–∏–µ–º –º–µ—Å—Ç–∞
```tsx
<WeatherWidget 
  lat={53.0195} 
  lng={158.6505} 
  location="–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫-–ö–∞–º—á–∞—Ç—Å–∫–∏–π"
/>
```

### –° –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å—Ç–∏–ª—è–º–∏
```tsx
<WeatherWidget 
  lat={53.0195} 
  lng={158.6505} 
  className="shadow-xl rounded-2xl"
/>
```

### API –∑–∞–ø—Ä–æ—Å
```javascript
const response = await fetch(
  '/api/weather?lat=53.0195&lng=158.6505&location=–ü–µ—Ç—Ä–æ–ø–∞–≤–ª–æ–≤—Å–∫'
);
const data = await response.json();
console.log(data.data.temperature); // 8
```

---

## üîó –°–°–´–õ–ö–ò –ù–ê –ö–û–î

### –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:
- **API:** `app/api/weather/route.ts`
- **Widget:** `components/WeatherWidget.tsx`
- **Types:** `types/index.ts`
- **Config:** `lib/config.ts`

### –ù–∞ GitHub:
- https://github.com/PosPk/kamhub/blob/cursor/deep-repository-scan-05bf/app/api/weather/route.ts
- https://github.com/PosPk/kamhub/blob/cursor/deep-repository-scan-05bf/components/WeatherWidget.tsx

---

## üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê

- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** 553
  - API: 310 —Å—Ç—Ä–æ–∫
  - Widget: 243 —Å—Ç—Ä–æ–∫–∏
- **–°–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ–≥–æ–¥—ã:** 12
- **–ò–∫–æ–Ω–æ–∫:** 9
- **–ò—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö:** 2
- **–î–Ω–µ–π –ø—Ä–æ–≥–Ω–æ–∑–∞:** 7
- **–°—Ç—Ä–∞–Ω–∏—Ü –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** 4+

---

## ‚úÖ –ò–¢–û–ì

**–ü–û–õ–ù–û–¶–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ü–û–ì–û–î–´ –ì–û–¢–û–í–ê!** ‚òÄÔ∏è

- ‚úÖ API Endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Beautiful Widget –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- ‚úÖ 2 –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 7 –¥–Ω–µ–π
- ‚úÖ –£—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ç—É—Ä–∏—Å—Ç–æ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ –¢—ë–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

---

**–î–æ–∫—É–º–µ–Ω—Ç:** –ü–û–ì–û–î–ê_–í_–ü–†–û–ï–ö–¢–ï.md  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** Cursor Agent  
**–î–∞—Ç–∞:** 4 –Ω–æ—è–±—Ä—è 2025
