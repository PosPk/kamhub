# ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢: –î–ï–ü–õ–û–ô –ù–ê TIMEWEB VDS

**IP:** `5.129.248.224`  
**SSH:** `root@5.129.248.224`

---

## üöÄ –®–ê–ì 1: –ù–ê–°–¢–†–û–ô–ö–ê GITHUB SECRETS (2 –º–∏–Ω—É—Ç—ã)

### –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
```
https://github.com/–í–ê–®_USERNAME/kamhub/settings/secrets/actions
```

### –î–æ–±–∞–≤—å—Ç–µ 3 —Å–µ–∫—Ä–µ—Ç–∞:

| üîë –ù–∞–∑–≤–∞–Ω–∏–µ | üíæ –ó–Ω–∞—á–µ–Ω–∏–µ | üìù –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|-------------|-------------|
| `TIMEWEB_SSH_HOST` | `5.129.248.224` | IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ |
| `TIMEWEB_SSH_USER` | `root` | SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| `TIMEWEB_SSH_PASSWORD` | `xQvB1pv?yZTjaR` | SSH –ø–∞—Ä–æ–ª—å |

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å:**
1. –ù–∞–∂–º–∏—Ç–µ "New repository secret"
2. –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `TIMEWEB_SSH_HOST`)
3. –í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ (`5.129.248.224`)
4. –ù–∞–∂–º–∏—Ç–µ "Add secret"
5. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è –≤—Å–µ—Ö 3 —Å–µ–∫—Ä–µ—Ç–æ–≤

---

## ‚úÖ –®–ê–ì 2: –ü–†–û–í–ï–†–ö–ê WORKFLOW (1 –º–∏–Ω—É—Ç–∞)

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
```
.github/workflows/timeweb-ssh-deploy.yml
```

‚úÖ –§–∞–π–ª —É–∂–µ —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

---

## üéØ –®–ê–ì 3: –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô (–ø—Ä–æ—Å—Ç–æ push!)

```bash
git add .
git commit -m "Ready for deployment"
git push origin main
```

**–í—Å—ë!** GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç –∫–æ–¥
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –°–æ–±–µ—Ä–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç —á–µ—Ä–µ–∑ PM2

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:**
```
https://github.com/–í–ê–®_USERNAME/kamhub/actions
```

---

## üìã –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: –†–£–ß–ù–û–ô –î–ï–ü–õ–û–ô

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

```bash
export TIMEWEB_SSH_HOST=5.129.248.224
export TIMEWEB_SSH_USER=root
export TIMEWEB_SSH_PASSWORD=xQvB1pv?yZTjaR

chmod +x scripts/deploy-timeweb-vds.sh
./scripts/deploy-timeweb-vds.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SSH –≤—Ä—É—á–Ω—É—é

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@5.129.248.224

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
cd /var/www/kamhub || mkdir -p /var/www/kamhub && cd /var/www/kamhub
git clone https://github.com/–í–ê–®_USERNAME/kamhub.git .
npm install
npm run build

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env
nano .env
# –î–æ–±–∞–≤—å—Ç–µ:
# DATABASE_URL=postgresql://...
# JWT_SECRET=...

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ
pm2 start ecosystem.config.js
pm2 save
```

---

## üîß –ù–ê–°–¢–†–û–ô–ö–ê –°–ï–†–í–ï–†–ê (–ø–µ—Ä–≤—ã–π —Ä–∞–∑)

–ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
ssh root@5.129.248.224

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt-get install -y nodejs

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm install -g pm2
pm2 startup

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL –∫–ª–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
apt-get install -y postgresql-client

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
mkdir -p /var/www/kamhub
```

---

## üîê –ù–ê–°–¢–†–û–ô–ö–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•

### –í–∞—Ä–∏–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL

```bash
apt-get install -y postgresql postgresql-contrib
sudo -u postgres psql << EOF
CREATE DATABASE kamchatour;
CREATE USER kamhub_user WITH PASSWORD '–≤–∞—à_–ø–∞—Ä–æ–ª—å';
GRANT ALL PRIVILEGES ON DATABASE kamchatour TO kamhub_user;
EOF

# –†–∞—Å—à–∏—Ä–µ–Ω–∏—è
sudo -u postgres psql -d kamchatour << EOF
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS postgis;
EOF
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£–¥–∞–ª–µ–Ω–Ω—ã–π PostgreSQL (Timeweb Managed)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `DATABASE_URL` –∏–∑ –ø–∞–Ω–µ–ª–∏ Timeweb Cloud.

---

## üìù –ù–ê–°–¢–†–û–ô–ö–ê .ENV –ù–ê –°–ï–†–í–ï–†–ï

```bash
nano /var/www/kamhub/.env
```

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä:**
```env
NODE_ENV=production
DATABASE_URL=postgresql://kamhub_user:–ø–∞—Ä–æ–ª—å@localhost:5432/kamchatour
JWT_SECRET=—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ_—á–µ—Ä–µ–∑_openssl_rand_-base64_32
PORT=3000
```

**–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å JWT_SECRET:**
```bash
openssl rand -base64 32
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ PM2:
```bash
ssh root@5.129.248.224
pm2 list
pm2 logs kamchatour-hub
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
curl http://localhost:3000/api/health
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–≤–Ω–µ:
```bash
curl http://5.129.248.224:3000/api/health
```

---

## üêõ –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### GitHub Actions –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Actions tab
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ workflow —Ñ–∞–π–ª –Ω–∞ –º–µ—Å—Ç–µ

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
```bash
ssh root@5.129.248.224
cd /var/www/kamhub
pm2 logs kamchatour-hub
# –°–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DATABASE_URL
cat /var/www/kamhub/.env | grep DATABASE_URL

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
psql $DATABASE_URL -c "SELECT 1;"
```

---

## üìä –ß–¢–û –ü–û–õ–£–ß–ò–õ–û–°–¨

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** —á–µ—Ä–µ–∑ GitHub Actions  
‚úÖ **Workflow —Ñ–∞–π–ª** —Å–æ–∑–¥–∞–Ω (`.github/workflows/timeweb-ssh-deploy.yml`)  
‚úÖ **–î–µ–ø–ª–æ–π —Å–∫—Ä–∏–ø—Ç** –≥–æ—Ç–æ–≤ (`scripts/deploy-timeweb-vds.sh`)  
‚úÖ **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–µ–∫—Ä–µ—Ç–∞–º** —Å–æ–∑–¥–∞–Ω–∞ (`.github/SECRETS_SETUP.md`)  
‚úÖ **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** —Å–æ–∑–¥–∞–Ω–∞ (`–î–ï–ü–õ–û–ô_TIMEWEB_VDS.md`)  

---

## üéâ –ì–û–¢–û–í–û!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub Secrets:

1. **–ü—Ä–æ—Å—Ç–æ –¥–µ–ª–∞–π—Ç–µ `git push`** - –¥–µ–ø–ª–æ–π –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üöÄ
2. **–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç** –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
3. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ** –ø–æ –∞–¥—Ä–µ—Å—É: `http://5.129.248.224:3000`

---

## üìû –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Secrets
2. ‚úÖ –°–¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π push
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–í—Å—ë –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéä
