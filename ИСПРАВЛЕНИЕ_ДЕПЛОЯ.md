# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò –î–ï–ü–õ–û–Ø

> **–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ Timeweb Cloud Apps  
> **–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –¥–ª—è `output: 'standalone'`  
> **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `output: 'standalone'` –≤ Next.js:

```javascript
output: 'standalone'  // –°–æ–∑–¥–∞–µ—Ç .next/standalone/server.js
```

**–ù–û:** –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –±—ã–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π:
```json
"start": "next start"  // ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ standalone
```

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞

**package.json:**
```json
{
  "scripts": {
    "start": "node .next/standalone/server.js",  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ
    "start:default": "next start"                // Fallback
  }
}
```

---

### 2. –£–ª—É—á—à–µ–Ω next.config.js

```javascript
{
  output: 'standalone',
  outputFileTracingRoot: process.cwd(),  // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  poweredByHeader: false,                // –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
}
```

---

### 3. –°–æ–∑–¥–∞–Ω timeweb.json

**–§–∞–π–ª:** `timeweb.json`

```json
{
  "framework": "nextjs",
  "buildCommand": "npm install && npm run build",
  "startCommand": "node .next/standalone/server.js",
  "nodeVersion": "20",
  "port": 3000,
  "env": {
    "NODE_ENV": "production"
  }
}
```

---

## üöÄ –ß–¢–û –î–ê–õ–¨–®–ï

### –í Timeweb Cloud Apps –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

**https://timeweb.cloud/my/apps/125051**

### Settings ‚Üí Build & Deploy:

```yaml
Framework: Next.js

Build Command:
  npm install && npm run build

Start Command:
  node .next/standalone/server.js

Node Version: 20.x

Port: 3000

Environment: production
```

**–í–ê–ñ–ù–û:** –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:
```bash
node .next/standalone/server.js
```

**–ù–ï:**
```bash
npm start  # ‚ùå
next start # ‚ùå
```

---

## üîÑ –ü–ï–†–ï–ó–ê–ü–£–°–¢–ò–¢–¨ DEPLOY

1. **–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –≤ GitHub**
2. **–í Timeweb Cloud Apps:**
   - Settings ‚Üí Build & Deploy
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Start Command
   - –ï—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Üí –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ `node .next/standalone/server.js`
   - Save
3. **Deployments ‚Üí Trigger Deploy**
4. **–°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏**

---

## ‚úÖ –ü–†–ò–ó–ù–ê–ö–ò –£–°–ü–ï–®–ù–û–ì–û –î–ï–ü–õ–û–Ø

### –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
‚úì Building application
‚úì Compiled successfully
‚úì Generating static pages
‚úì Finalizing page optimization
‚úì Collecting page data
‚úì Creating standalone build

Build completed successfully!

Starting server...
Server listening on http://0.0.0.0:3000
Ready in XXXms
```

---

## üìù –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–û–ï –†–ï–®–ï–ù–ò–ï

–ï—Å–ª–∏ standalone –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å:

### next.config.js:

```javascript
const nextConfig = {
  reactStrictMode: true,
  experimental: {
    serverComponentsExternalPackages: ['pg'],
  },
  // output: 'standalone',  // ‚Üê –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å
  images: {
    unoptimized: true,
  },
};
```

### package.json:

```json
{
  "scripts": {
    "start": "next start"  // ‚Üê –í–µ—Ä–Ω—É—Ç—å –æ–±—ã—á–Ω—É—é –∫–æ–º–∞–Ω–¥—É
  }
}
```

### –í Timeweb:

```
Start Command: npm start
–∏–ª–∏
Start Command: next start -p 3000
```

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ standalone:

‚úÖ –ú–µ–Ω—å—à–∏–π —Ä–∞–∑–º–µ—Ä deploy  
‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–ø—É—Å–∫  
‚úÖ –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
‚úÖ –õ—É—á—à–µ –¥–ª—è production  

### –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å standalone:

‚ùå –ï—Å–ª–∏ —Ö–æ—Å—Ç–∏–Ω–≥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã  
‚ùå –ï—Å–ª–∏ –Ω—É–∂–Ω—ã devDependencies –≤ runtime  
‚ùå –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  

---

## üîç –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –î–ï–ü–õ–û–Ø

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è:

```bash
curl https://kamchatour-125051.timeweb.cloud/api/health
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
```json
{"success":true,"status":"healthy"}
```

---

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
https://kamchatour-125051.timeweb.cloud
```

**–î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:**
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ API endpoints –æ—Ç–≤–µ—á–∞—é—Ç

---

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

**–í Timeweb Cloud Apps:**
- Runtime ‚Üí Logs
- –î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å: "Server listening on..."

---

## ‚ö†Ô∏è –ï–°–õ–ò –í–°–ï –ï–©–ï –û–®–ò–ë–ö–ê

### –ü—Ä–∏—à–ª–∏—Ç–µ –ü–û–õ–ù–´–ô —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏–∑ –ª–æ–≥–æ–≤:

1. Timeweb Cloud Apps ‚Üí Deployments
2. Latest deploy ‚Üí View Logs
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –í–ï–°–¨ –ª–æ–≥ –æ—à–∏–±–∫–∏
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ

**–ú–Ω–µ –Ω—É–∂–Ω–æ –≤–∏–¥–µ—Ç—å:**
- ‚ùå –ö–∞–∫–∞—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –æ—à–∏–±–∫–∞
- üìù –ü–æ–ª–Ω—ã–π stack trace
- üîç –í –∫–∞–∫–æ–π –º–æ–º–µ–Ω—Ç –ø–∞–¥–∞–µ—Ç (build/start/runtime)

---

## üìä –ò–¢–û–ì

```
‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ start
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω outputFileTracingRoot
‚úÖ –°–æ–∑–¥–∞–Ω timeweb.json
‚úÖ –ö–æ–¥ –≤ GitHub –æ–±–Ω–æ–≤–ª–µ–Ω
```

**–°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Start Command –≤ Timeweb
2. Trigger Deploy
3. –°–æ–æ–±—â–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

**–ê–≤—Ç–æ—Ä:** Cursor AI Agent  
**–î–∞—Ç–∞:** 30 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** Standalone configuration fixed ‚úÖ
