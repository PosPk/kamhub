# ‚ö° –£–°–¢–ê–ù–û–í–ö–ê KAMHUB - –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø

**IP —Å–µ—Ä–≤–µ—Ä–∞:** `5.129.248.224`  
**–í–µ–±-–∫–æ–Ω—Å–æ–ª—å:** https://timeweb.cloud/my/servers/5898003 ‚Üí `–ö–æ–Ω—Å–æ–ª—å`

---

## üöÄ –í–ê–†–ò–ê–ù–¢ 1: –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ –ø–æ—Ä—è–¥–∫—É

### **–ö–æ–º–∞–Ω–¥–∞ 1: –ß–µ—Ä–µ–∑ curl**
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –≤–µ–±-–∫–æ–Ω—Å–æ–ª—å:

```bash
curl -fsSL https://raw.githubusercontent.com/PosPk/kamhub/main/timeweb-vds-install.sh -o /tmp/install.sh && chmod +x /tmp/install.sh && bash /tmp/install.sh
```

---

### **–ö–æ–º–∞–Ω–¥–∞ 2: –ï—Å–ª–∏ curl –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —á–µ—Ä–µ–∑ wget**

```bash
wget -O /tmp/install.sh https://raw.githubusercontent.com/PosPk/kamhub/main/timeweb-vds-install.sh && chmod +x /tmp/install.sh && bash /tmp/install.sh
```

---

### **–ö–æ–º–∞–Ω–¥–∞ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ curl –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç**

–ï—Å–ª–∏ –≤—ã–¥–∞—ë—Ç "curl: command not found":

```bash
apt-get update && apt-get install -y curl && curl -fsSL https://raw.githubusercontent.com/PosPk/kamhub/main/timeweb-vds-install.sh -o /tmp/install.sh && chmod +x /tmp/install.sh && bash /tmp/install.sh
```

---

## üöÄ –í–ê–†–ò–ê–ù–¢ 2: –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤—Ä—É—á–Ω—É—é:

### **–®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª**

```bash
cat > /tmp/install.sh << 'EOF'
#!/bin/bash
set -e
echo "üöÄ –ù–∞—á–∏–Ω–∞—é —É—Å—Ç–∞–Ω–æ–≤–∫—É KamHub..."
cd /tmp
rm -rf kamhub-install
mkdir -p kamhub-install
cd kamhub-install
EOF
```

### **–®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ —Ç–µ–ª–æ —Å–∫—Ä–∏–ø—Ç–∞**

```bash
cat >> /tmp/install.sh << 'EOF'

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
export DEBIAN_FRONTEND=noninteractive
apt-get update -qq
apt-get upgrade -y -qq

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
apt-get install -y -qq curl wget git build-essential software-properties-common

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 20
if ! command -v node &> /dev/null; then
    curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
    apt-get install -y -qq nodejs
fi

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL 15
if ! command -v psql &> /dev/null; then
    sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
    wget -qO- https://www.postgresql.org/media/keys/ACCC4CF8.asc | apt-key add -
    apt-get update -qq
    apt-get install -y -qq postgresql-15 postgresql-contrib-15
fi

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è
DB_PASSWORD=$(openssl rand -base64 24 | tr -d "=+/" | cut -c1-24)

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
sudo -u postgres psql << EOSQL
DROP DATABASE IF EXISTS kamhub;
DROP USER IF EXISTS kamhub;
CREATE USER kamhub WITH PASSWORD '$DB_PASSWORD';
CREATE DATABASE kamhub OWNER kamhub;
GRANT ALL PRIVILEGES ON DATABASE kamhub TO kamhub;
ALTER USER kamhub CREATEDB;
\c kamhub
GRANT ALL ON SCHEMA public TO kamhub;
ALTER SCHEMA public OWNER TO kamhub;
EOSQL

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
cd /opt
rm -rf kamhub
git clone https://github.com/PosPk/kamhub.git
cd /opt/kamhub

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
JWT_SECRET=$(openssl rand -base64 32 | tr -d "=+/" | cut -c1-32)
NEXTAUTH_SECRET=$(openssl rand -base64 32 | tr -d "=+/" | cut -c1-32)
SERVER_IP=$(curl -s ifconfig.me || hostname -I | awk '{print $1}')

cat > /opt/kamhub/.env.local << ENVEOF
DATABASE_URL=postgresql://kamhub:${DB_PASSWORD}@localhost:5432/kamhub
JWT_SECRET=${JWT_SECRET}
NEXTAUTH_SECRET=${NEXTAUTH_SECRET}
NODE_ENV=production
NEXTAUTH_URL=http://${SERVER_IP}:3000
PORT=3000
ENVEOF

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm ci --omit=dev --quiet

# –°–±–æ—Ä–∫–∞
npm run build

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
npm install -g pm2 --quiet

# –ó–∞–ø—É—Å–∫
pm2 start npm --name kamhub -- start
pm2 save
pm2 startup systemd -u root --hp /root

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
apt-get install -y -qq nginx

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
cat > /etc/nginx/sites-available/kamhub << 'NGINXEOF'
server {
    listen 80;
    server_name _;
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
NGINXEOF

ln -sf /etc/nginx/sites-available/kamhub /etc/nginx/sites-enabled/
rm -f /etc/nginx/sites-enabled/default
nginx -t && systemctl restart nginx

# Firewall
ufw --force enable
ufw allow 22/tcp
ufw allow 80/tcp
ufw allow 443/tcp

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
cat > /root/kamhub-credentials.txt << CREDSEOF
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: kamhub
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: kamhub
–ü–∞—Ä–æ–ª—å: ${DB_PASSWORD}
URL: http://${SERVER_IP}
JWT_SECRET: ${JWT_SECRET}
NEXTAUTH_SECRET: ${NEXTAUTH_SECRET}
CREDSEOF

echo "‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
echo "üåê URL: http://${SERVER_IP}"
echo "üìã –î–∞–Ω–Ω—ã–µ: /root/kamhub-credentials.txt"
EOF
```

### **–®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç**

```bash
chmod +x /tmp/install.sh && bash /tmp/install.sh
```

---

## üìä –ß–¢–û –î–ï–õ–ê–¢–¨ –ï–°–õ–ò –í–´–î–ê–Å–¢ –û–®–ò–ë–ö–£:

### **–û—à–∏–±–∫–∞: "curl: command not found"**
```bash
apt-get update && apt-get install -y curl
```

### **–û—à–∏–±–∫–∞: "Permission denied"**
```bash
sudo su
# –ü–æ—Ç–æ–º –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É
```

### **–û—à–∏–±–∫–∞: "Could not resolve host"**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç
ping -c 3 8.8.8.8
```

---

## üéØ –°–ê–ú–´–ô –ü–†–û–°–¢–û–ô –í–ê–†–ò–ê–ù–¢:

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ **–í–°–Å –°–†–ê–ó–£ –í –û–î–ù–û–ô –ö–û–ú–ê–ù–î–ï**:

```bash
apt-get update -qq && apt-get install -y curl && curl -fsSL https://raw.githubusercontent.com/PosPk/kamhub/main/timeweb-vds-install.sh | bash
```

**–°–ö–û–ü–ò–†–£–ô–¢–ï –í–°–Æ –°–¢–†–û–ö–£ –¶–ï–õ–ò–ö–û–ú –ò –í–°–¢–ê–í–¨–¢–ï –í –ö–û–ù–°–û–õ–¨!**

---

## ‚úÖ –ü–û–°–õ–ï –ó–ê–í–ï–†–®–ï–ù–ò–Ø:

–û—Ç–∫—Ä–æ–π—Ç–µ: **http://5.129.248.224**

–ì–æ—Ç–æ–≤–æ! üéâ

---

## üìû –ï–°–õ–ò –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã:
```bash
curl -v https://raw.githubusercontent.com/PosPk/kamhub/main/timeweb-vds-install.sh
```

–Ø –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è! üí™
