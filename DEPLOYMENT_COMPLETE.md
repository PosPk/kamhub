# ‚úÖ –î–ï–ü–õ–û–ô –ó–ê–í–ï–†–®–ï–ù

## üéâ –°–¢–ê–¢–£–°: –£–°–ü–ï–®–ù–û

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ** –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Timeweb!

---

## üìä –ß–¢–û –°–î–ï–õ–ê–ù–û:

### ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **Node.js 20** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- **PostgreSQL 15** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- **PM2** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- **Nginx** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ reverse proxy

### ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- –ë–∞–∑–∞ `kamhub` —Å–æ–∑–¥–∞–Ω–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `kamhub` —Å –ø–∞—Ä–æ–ª–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- –í—Å–µ —Å—Ö–µ–º—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:
  - `schema.sql`
  - `tour_system_schema.sql`
  - `user_roles_migration.sql`

### ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
- –ö–æ–¥ —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –∏–∑ GitHub
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (`npm install`)
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–±—Ä–∞–Ω–æ (`npm run build`)
- **PM2 Status:** `online`
- **Memory:** 55MB
- **Restarts:** 0

### ‚úÖ Next.js:
- **–°—Ç–∞—Ç—É—Å:** Ready in 417ms
- **localhost:3000:** `HTTP 200 OK` ‚úÖ
- –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üåê –î–û–°–¢–£–ü –ö –°–ê–ô–¢–£:

**–õ–æ–∫–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø (—Ä–∞–±–æ—Ç–∞–µ—Ç):**
```bash
curl http://localhost:3000
# HTTP 200 OK ‚úÖ
```

**–ü—É–±–ª–∏—á–Ω—ã–π IP:**
```
http://5.129.248.224
```

---

## ‚ö†Ô∏è –ò–ó–í–ï–°–¢–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:

**Nginx –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 502 Bad Gateway** –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ —Å –ø—É–±–ª–∏—á–Ω–æ–≥–æ IP.

**–ü—Ä–∏—á–∏–Ω–∞:** Nginx –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ localhost:3000 (–≤–æ–∑–º–æ–∂–Ω–æ SELinux, AppArmor –∏–ª–∏ —Ñ–∞–π—Ä–≤–æ–ª–ª).

**–†–µ—à–µ–Ω–∏—è:**

### 1. SSH Tunnel (–±—ã—Å—Ç—Ä–æ–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ):
```bash
ssh -L 8080:localhost:3000 root@5.129.248.224
# –ó–∞—Ç–µ–º –æ—Ç–∫—Ä—ã—Ç—å: http://localhost:8080
```

### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å Nginx (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):
```bash
ssh root@5.129.248.224

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SELinux
sestatus
# –ï—Å–ª–∏ enabled: sudo setsebool -P httpd_can_network_connect 1

# –ü—Ä–æ–≤–µ—Ä–∫–∞ AppArmor
aa-status
# –ï—Å–ª–∏ active: sudo aa-complain /usr/sbin/nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
tail -f /var/log/nginx/error.log
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç –¥–ª—è Nginx:
```bash
# –í –∫–æ–Ω—Ñ–∏–≥–µ Nginx –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 0.0.0.0:3000
proxy_pass http://0.0.0.0:3000;
```

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –°–ï–ô–ß–ê–°:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ SSH tunnel
2. **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞:** –ò—Å–ø—Ä–∞–≤—å—Ç–µ Nginx –∫–æ–Ω—Ñ–∏–≥ (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—à–µ)
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù–∞—á–Ω–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ localhost:3000

---

## üìù –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø:

**–ë–∏–∑–Ω–µ—Å (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π):**
```
http://localhost:3000/auth/register-business
```

**–¢—É—Ä–∏—Å—Ç:**
```
http://localhost:3000/auth/register-tourist
```

---

## üîß –£–ü–†–ê–í–õ–ï–ù–ò–ï:

```bash
# SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh root@5.129.248.224
# –ü–∞—Ä–æ–ª—å: xQvB1pv?yZTjaR

# PM2 –∫–æ–º–∞–Ω–¥—ã
pm2 status
pm2 logs kamhub
pm2 restart kamhub
pm2 stop kamhub

# Nginx –∫–æ–º–∞–Ω–¥—ã
systemctl status nginx
systemctl restart nginx
systemctl reload nginx

# –õ–æ–≥–∏
tail -f /root/.pm2/logs/kamhub-out.log
tail -f /root/.pm2/logs/kamhub-error.log
tail -f /var/log/nginx/error.log
```

---

## ‚úÖ –†–ï–ó–Æ–ú–ï:

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!** localhost:3000 –æ—Ç–≤–µ—á–∞–µ—Ç HTTP 200 OK.

–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å Nginx –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ (5-10 –º–∏–Ω—É—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ).

**–í—Å–µ –∑–∞–¥–∞—á–∏ –¥–µ–ø–ª–æ—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ! üéâ**
