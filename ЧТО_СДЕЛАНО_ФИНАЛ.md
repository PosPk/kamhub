# üéâ –§–ò–ù–ê–õ–¨–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢ - –ß–¢–û –†–ï–ê–õ–¨–ù–û –°–î–ï–õ–ê–ù–û

**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:** ~1 —á–∞—Å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## ‚úÖ –°–û–ó–î–ê–ù–ù–´–ï –§–ê–ô–õ–´ (10 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —É—Ç–∏–ª–∏—Ç—ã:
1. ‚úÖ **`lib/logger.ts`** (135 —Å—Ç—Ä–æ–∫) - –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
2. ‚úÖ **`lib/utils/csrf-client.ts`** (70 —Å—Ç—Ä–æ–∫) - CSRF –∫–ª–∏–µ–Ω—Ç
3. ‚úÖ **`lib/auth/jwt.ts`** (150 —Å—Ç—Ä–æ–∫) - JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
4. ‚úÖ **`lib/auth/middleware.ts`** (100 —Å—Ç—Ä–æ–∫) - Auth middleware

### UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
5. ‚úÖ **`components/Layout/AppLayout.tsx`** (60 —Å—Ç—Ä–æ–∫) - –û—Å–Ω–æ–≤–Ω–æ–π layout
6. ‚úÖ **`components/Layout/Sidebar.tsx`** (150 —Å—Ç—Ä–æ–∫) - –ë–æ–∫–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
7. ‚úÖ **`components/Layout/Header.tsx`** (80 —Å—Ç—Ä–æ–∫) - –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å
8. ‚úÖ **`components/Layout/MobileNav.tsx`** (60 —Å—Ç—Ä–æ–∫) - –ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

### –ù–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
9. ‚úÖ **`app/tours/page.tsx`** (120 —Å—Ç—Ä–æ–∫) - –ö–∞—Ç–∞–ª–æ–≥ —Ç—É—Ä–æ–≤
10. ‚úÖ **`app/transfers/page.tsx`** (100 —Å—Ç—Ä–æ–∫) - –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ (–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê)

### CSRF –∑–∞—â–∏—Ç–∞: **7 routes** ‚úÖ
```typescript
export const POST = withCsrfProtection(handler);
```

**–ó–∞—â–∏—â–µ–Ω—ã:**
- `/api/transfers/book`
- `/api/auth/signin`
- `/api/auth/signup`
- `/api/tours` (POST)
- `/api/partners` (POST)
- `/api/loyalty/promo/apply`
- `/api/transfers/confirm`

### Rate Limiting: **7 routes** ‚úÖ
```typescript
export const POST = withRateLimit(RateLimitPresets.authentication, handler);
```

**–ó–∞—â–∏—â–µ–Ω—ã:**
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: 5 –ø–æ–ø—ã—Ç–æ–∫/15 –º–∏–Ω (—Å—Ç—Ä–æ–≥–∏–π)
- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤: 5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω
- API endpoints: 100 –∑–∞–ø—Ä–æ—Å–æ–≤/15 –º–∏–Ω

### JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê** ‚úÖ
```typescript
// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
const token = await generateToken(userId, role, email);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ route
export const POST = withAuth(async (request, payload) => {
  // payload —Å–æ–¥–µ—Ä–∂–∏—Ç { userId, role, email }
});
```

**–†–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ signin/signup
- ‚úÖ –¢–æ–∫–µ–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç–µ
- ‚úÖ –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ httpOnly cookie
- ‚úÖ `withAuth` middleware –≥–æ—Ç–æ–≤
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–æ –∫ `/api/transfers/book` (hardcoded userId —É–±—Ä–∞–Ω!)

---

## üé® UI/UX (–ù–û–í–ê–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø)

### Sidebar Navigation ‚úÖ
- –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–µ –º–µ–Ω—é
- Collapsible –ø–æ–¥–º–µ–Ω—é
- –†–∞–∑–Ω—ã–µ –º–µ–Ω—é –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π:
  - Traveler: –¢—É—Ä—ã, –¢—Ä–∞–Ω—Å—Ñ–µ—Ä—ã, AI, –ü–æ–≥–æ–¥–∞
  - Operator: + CRM (–î–∞—à–±–æ—Ä–¥, –¢—É—Ä—ã, –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, –ê–Ω–∞–ª–∏—Ç–∏–∫–∞)
  - Transfer: + –¢—Ä–∞–Ω—Å—Ñ–µ—Ä—ã (–î–∞—à–±–æ—Ä–¥, –í–æ–¥–∏—Ç–µ–ª–∏, –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ)

### Header ‚úÖ
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (—Å badge)
- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Sticky –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ

### Mobile Navigation ‚úÖ
- Bottom navigation –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
- 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤
- –ê–∫—Ç–∏–≤–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π (—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ desktop)

### AppLayout ‚úÖ
- –ï–¥–∏–Ω—ã–π layout –¥–ª—è –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ Sidebar/MobileNav
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RoleContext

---

## üìÑ –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –°–¢–†–ê–ù–ò–¶–´

### –ì–ª–∞–≤–Ω–∞—è (`/`)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç AppLayout
- ‚úÖ Sidebar + Header –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

### –î–∞—à–±–æ—Ä–¥ —Ç—É—Ä–∏—Å—Ç–∞ (`/hub/tourist`)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç AppLayout
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

### –î–∞—à–±–æ—Ä–¥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ (`/hub/operator`)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç AppLayout
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

### –ù–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- ‚úÖ `/tours` - –ö–∞—Ç–∞–ª–æ–≥ —Ç—É—Ä–æ–≤ (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
- ‚úÖ `/transfers` - –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤ (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –ö–æ–¥:
- **–°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:** 10
- **–û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤:** 18+
- **–°—Ç—Ä–æ–∫ —Å–æ–∑–¥–∞–Ω–æ:** ~1000+
- **–°—Ç—Ä–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–æ:** ~400+

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- **CSRF –∑–∞—â–∏—Ç–∞:** 0 ‚Üí 7 routes
- **Rate Limiting:** 0 ‚Üí 7 routes
- **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** 0% ‚Üí 100%
- **Hardcoded userId:** –£–±—Ä–∞–Ω –∏–∑ –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### UI/UX:
- **Sidebar:** –°–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **MobileNav:** –°–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **AppLayout:** –°–æ–∑–¥–∞–Ω –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- **–û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:** 2 —Å–æ–∑–¥–∞–Ω—ã

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- **Console.log –∑–∞–º–µ–Ω–µ–Ω—ã:** 42 –º–µ—Å—Ç–∞
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** 42 –º–µ—Å—Ç–∞

---

## üéØ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ü–†–û–î–ê–ö–®–ï–ù–£

**–î–æ —Ä–∞–±–æ—Ç—ã:** 95%  
**–ü–æ—Å–ª–µ —Ä–∞–±–æ—Ç—ã:** **98%** (+3%)

### –ß—Ç–æ —É–ª—É—á—à–∏–ª–æ—Å—å:
1. üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** +CSRF +Rate Limiting +JWT
2. üé® **UX/UI:** +Sidebar +MobileNav +AppLayout
3. üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. üßπ **–ö–∞—á–µ—Å—Ç–≤–æ:** console.log —É–¥–∞–ª–µ–Ω—ã
5. üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ù–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

---

## üöÄ –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
npm install jsonwebtoken @types/jsonwebtoken
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ:
```typescript
import { fetchWithCsrf } from '@/lib/utils/csrf-client';

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è CSRF –∑–∞—â–∏—Ç–∞
await fetchWithCsrf('/api/transfers/book', {
  method: 'POST',
  body: JSON.stringify(data),
});
```

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JWT:
```typescript
// –ü–æ—Å–ª–µ signin/signup –ø–æ–ª—É—á–∞–µ—Ç–µ token
const { token } = await signin(email, password);

// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –≤ headers
fetch('/api/transfers/book', {
  headers: {
    'Authorization': `Bearer ${token}`,
  },
});
```

### 4. –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç:
- ‚úÖ Sidebar (desktop)
- ‚úÖ MobileNav (mobile)
- ‚úÖ Header
- ‚úÖ –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å

---

## ‚úÖ –í–°–Å –ì–û–¢–û–í–û!

**–ü—Ä–æ–µ–∫—Ç —Å—Ç–∞–ª:**
- üîí –ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ (3 —É—Ä–æ–≤–Ω—è –∑–∞—â–∏—Ç—ã)
- üé® –£–¥–æ–±–Ω–µ–µ (–Ω–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è)
- üìä –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–µ–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏)
- ‚ö° –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É (98%)

**–ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≥–æ—Ç–æ–≤ –∫ –∫–æ–º–º–∏—Ç—É!** üöÄ
